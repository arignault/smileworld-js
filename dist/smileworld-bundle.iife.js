(function(z){"use strict";/*!
 * SplitText 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2025, GreenSock. All rights reserved. Subject to the terms at https://gsap.com/standard-license.
 * @author: Jack Doyle
 */let O,W,Z,ke=()=>Z||de.register(window.gsap),ie=typeof Intl<"u"?new Intl.Segmenter:0,V=i=>typeof i=="string"?V(document.querySelectorAll(i)):"length"in i?Array.from(i):[i],ne=i=>V(i).filter(e=>e instanceof HTMLElement),K=[],X=function(){},_e=/\s+/g,se=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),ae={left:0,top:0,width:0,height:0},oe=(i,e)=>{if(e){let t=new Set(i.join("").match(e)||K),n=i.length,s,o,a,l;if(t.size)for(;--n>-1;){o=i[n];for(a of t)if(a.startsWith(o)&&a.length>o.length){for(s=0,l=o;a.startsWith(l+=i[n+ ++s])&&l.length<a.length;);if(s&&l.length===a.length){i[n]=a,i.splice(n+1,s);break}}}}return i},re=i=>window.getComputedStyle(i).display==="inline"&&(i.style.display="inline-block"),D=(i,e,t)=>e.insertBefore(typeof i=="string"?document.createTextNode(i):i,t),Y=(i,e,t)=>{let n=e[i+"sClass"]||"",{tag:s="div",aria:o="auto",propIndex:a=!1}=e,l=i==="line"?"block":"inline-block",r=n.indexOf("++")>-1,u=m=>{let v=document.createElement(s),k=t.length+1;return n&&(v.className=n+(r?" "+n+k:"")),a&&v.style.setProperty("--"+i,k+""),o!=="none"&&v.setAttribute("aria-hidden","true"),s!=="span"&&(v.style.position="relative",v.style.display=l),v.textContent=m,t.push(v),v};return r&&(n=n.replace("++","")),u.collection=t,u},Ae=(i,e,t,n)=>{let s=Y("line",t,n),o=window.getComputedStyle(i).textAlign||"left";return(a,l)=>{let r=s("");for(r.style.textAlign=o,i.insertBefore(r,e[a]);a<l;a++)r.appendChild(e[a]);r.normalize()}},le=(i,e,t,n,s,o,a,l,r,u)=>{var m;let v=Array.from(i.childNodes),k=0,{wordDelimiter:I,reduceWhiteSpace:M=!0,prepareText:G}=e,U=i.getBoundingClientRect(),x=U,R=!M&&window.getComputedStyle(i).whiteSpace.substring(0,3)==="pre",_=0,w=t.collection,d,g,N,c,y,b,$,p,f,L,A,P,T,q,S,h,C,E;for(typeof I=="object"?(N=I.delimiter||I,g=I.replaceWith||""):g=I===""?"":I||" ",d=g!==" ";k<v.length;k++)if(c=v[k],c.nodeType===3){for(S=c.textContent||"",M?S=S.replace(_e," "):R&&(S=S.replace(/\n/g,g+`
`)),G&&(S=G(S,i)),c.textContent=S,y=g||N?S.split(N||g):S.match(l)||K,C=y[y.length-1],p=d?C.slice(-1)===" ":!C,C||y.pop(),x=U,$=d?y[0].charAt(0)===" ":!y[0],$&&D(" ",i,c),y[0]||y.shift(),oe(y,r),o&&u||(c.textContent=""),f=1;f<=y.length;f++)if(h=y[f-1],!M&&R&&h.charAt(0)===`
`&&((m=c.previousSibling)==null||m.remove(),D(document.createElement("br"),i,c),h=h.slice(1)),!M&&h==="")D(g,i,c);else if(h===" ")i.insertBefore(document.createTextNode(" "),c);else{if(d&&h.charAt(0)===" "&&D(" ",i,c),_&&f===1&&!$&&w.indexOf(_.parentNode)>-1?(b=w[w.length-1],b.appendChild(document.createTextNode(n?"":h))):(b=t(n?"":h),D(b,i,c),_&&f===1&&!$&&b.insertBefore(_,b.firstChild)),n)for(A=ie?oe([...ie.segment(h)].map(B=>B.segment),r):h.match(l)||K,E=0;E<A.length;E++)b.appendChild(A[E]===" "?document.createTextNode(" "):n(A[E]));if(o&&u){if(S=c.textContent=S.substring(h.length+1,S.length),L=b.getBoundingClientRect(),L.top>x.top&&L.left<=x.left){for(P=i.cloneNode(),T=i.childNodes[0];T&&T!==b;)q=T,T=T.nextSibling,P.appendChild(q);i.parentNode.insertBefore(P,i),s&&re(P)}x=L}(f<y.length||p)&&D(f>=y.length?" ":d&&h.slice(-1)===" "?" "+g:g,i,c)}i.removeChild(c),_=0}else c.nodeType===1&&(a&&a.indexOf(c)>-1?(w.indexOf(c.previousSibling)>-1&&w[w.length-1].appendChild(c),_=c):(le(c,e,t,n,s,o,a,l,r,!0),_=0),s&&re(c))};const ce=class be{constructor(e,t){this.isSplit=!1,ke(),this.elements=ne(e),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=t,this._split=()=>this.isSplit&&this.split(this.vars);let n=[],s,o=()=>{let a=n.length,l;for(;a--;){l=n[a];let r=l.element.offsetWidth;if(r!==l.width){l.width=r,this._split();return}}};this._data={orig:n,obs:typeof ResizeObserver<"u"&&new ResizeObserver(()=>{clearTimeout(s),s=setTimeout(o,200)})},X(this),this.split(t)}split(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars||{};let{type:t="chars,words,lines",aria:n="auto",deepSlice:s=!0,smartWrap:o,onSplit:a,autoSplit:l=!1,specialChars:r,mask:u}=this.vars,m=t.indexOf("lines")>-1,v=t.indexOf("chars")>-1,k=t.indexOf("words")>-1,I=v&&!k&&!m,M=r&&("push"in r?new RegExp("(?:"+r.join("|")+")","gu"):r),G=M?new RegExp(M.source+"|"+se.source,"gu"):se,U=!!e.ignore&&ne(e.ignore),{orig:x,animTime:R,obs:_}=this._data,w;return(v||k||m)&&(this.elements.forEach((d,g)=>{x[g]={element:d,html:d.innerHTML,ariaL:d.getAttribute("aria-label"),ariaH:d.getAttribute("aria-hidden")},n==="auto"?d.setAttribute("aria-label",(d.textContent||"").trim()):n==="hidden"&&d.setAttribute("aria-hidden","true");let N=[],c=[],y=[],b=v?Y("char",e,N):null,$=Y("word",e,c),p,f,L,A;if(le(d,e,$,b,I,s&&(m||I),U,G,M,!1),m){let P=V(d.childNodes),T=Ae(d,P,e,y),q,S=[],h=0,C=P.map(B=>B.nodeType===1?B.getBoundingClientRect():ae),E=ae;for(p=0;p<P.length;p++)q=P[p],q.nodeType===1&&(q.nodeName==="BR"?(S.push(q),T(h,p+1),h=p+1,E=C[h]):(p&&C[p].top>E.top&&C[p].left<=E.left&&(T(h,p),h=p),E=C[p]));h<p&&T(h,p),S.forEach(B=>{var we;return(we=B.parentNode)==null?void 0:we.removeChild(B)})}if(!k){for(p=0;p<c.length;p++)if(f=c[p],v||!f.nextSibling||f.nextSibling.nodeType!==3)if(o&&!m){for(L=document.createElement("span"),L.style.whiteSpace="nowrap";f.firstChild;)L.appendChild(f.firstChild);f.replaceWith(L)}else f.replaceWith(...f.childNodes);else A=f.nextSibling,A&&A.nodeType===3&&(A.textContent=(f.textContent||"")+(A.textContent||""),f.remove());c.length=0,d.normalize()}this.lines.push(...y),this.words.push(...c),this.chars.push(...N)}),u&&this[u]&&this.masks.push(...this[u].map(d=>{let g=d.cloneNode();return d.replaceWith(g),g.appendChild(d),d.className&&(g.className=d.className.replace(/(\b\w+\b)/g,"$1-mask")),g.style.overflow="clip",g}))),this.isSplit=!0,W&&(l?W.addEventListener("loadingdone",this._split):W.status==="loading"&&console.warn("SplitText called before fonts loaded")),(w=a&&a(this))&&w.totalTime&&(this._data.anim=R?w.totalTime(R):w),m&&l&&this.elements.forEach((d,g)=>{x[g].width=d.offsetWidth,_&&_.observe(d)}),this}revert(){var e,t;let{orig:n,anim:s,obs:o}=this._data;return o&&o.disconnect(),n.forEach(({element:a,html:l,ariaL:r,ariaH:u})=>{a.innerHTML=l,r?a.setAttribute("aria-label",r):a.removeAttribute("aria-label"),u?a.setAttribute("aria-hidden",u):a.removeAttribute("aria-hidden")}),this.chars.length=this.words.length=this.lines.length=n.length=this.masks.length=0,this.isSplit=!1,W==null||W.removeEventListener("loadingdone",this._split),s&&(this._data.animTime=s.totalTime(),s.revert()),(t=(e=this.vars).onRevert)==null||t.call(e,this),this}static create(e,t){return new be(e,t)}static register(e){O=O||e||window.gsap,O&&(V=O.utils.toArray,X=O.core.context||X),!Z&&window.innerWidth>0&&(W=document.fonts,Z=!0)}};ce.version="3.13.0";let de=ce;console.log("ðŸš€ loading-screen.js v1.2.0 chargÃ©");const J={fadeOutDuration:.4,ease:"power2.out"};let H=!1,j=!1;function Te(){if(console.log("ðŸŽ¬ initLoadingScreen - DÃ©but de l'initialisation"),H)return console.log("â„¹ï¸ Ã‰cran de chargement dÃ©jÃ  initialisÃ©"),Promise.resolve();const i=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");return console.log("ðŸ” Ã‰lÃ©ments trouvÃ©s:",{loadingScreen:!!i,logoWrap:!!e}),!i||!e?(console.warn("âš ï¸ Ã‰lÃ©ments manquants:",{loadingScreen:i?"OK":"Non trouvÃ©",logoWrap:e?"OK":"Non trouvÃ©"}),H=!1,Promise.resolve(null)):(console.log("ðŸŽ¨ Configuration des styles initiaux"),window.gsap.set(i,{opacity:1,display:"flex",backgroundColor:"white"}),window.gsap.set(e,{opacity:0,scale:.9}),window.gsap.to(e,{opacity:1,scale:1,duration:.5,delay:.1,ease:J.ease}),H=!0,console.log("âœ… Ã‰cran de chargement initialisÃ© avec succÃ¨s"),Promise.resolve(i))}function Ee(){if(console.log("ðŸŽ¬ hideLoadingScreen - DÃ©but du masquage"),!H){console.warn("âš ï¸ Ã‰cran de chargement non initialisÃ©");return}if(j){console.log("â„¹ï¸ Masquage dÃ©jÃ  en cours");return}j=!0;const i=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");if(console.log("ðŸ” Ã‰lÃ©ments trouvÃ©s pour le masquage:",{loadingScreen:!!i,logoWrap:!!e}),!i||!e){console.warn("âš ï¸ Ã‰lÃ©ments manquants pour le masquage"),j=!1;return}console.log("ðŸŽ¬ DÃ©marrage de l'animation de masquage"),window.gsap.timeline({onComplete:()=>{console.log("âœ… Animation de masquage terminÃ©e"),window.gsap.set(i,{display:"none"}),j=!1}}).to(i,{opacity:0,duration:J.fadeOutDuration,ease:J.ease})}function Ie(){const i=document.querySelector(".loadingscreen");i&&window.gsap.to(i,{opacity:0,duration:.5,onComplete:()=>{window.gsap.set(i,{display:"none"})}}),j=!1}console.log("ðŸš€ menu-mobile.js v2.0.0 chargÃ©");class Le{constructor(){if(this.elements={menu:document.querySelector(".menu-mobile")},this.navBar=document.querySelector(".w-nav"),this.animation=null,!this.navBar||!this.elements.menu){console.error("[MenuMobile] Barre de navigation (.w-nav) ou menu (.menu-mobile) introuvable. Initialisation annulÃ©e.");return}this._setupEventListeners(),console.log("âœ… Menu Mobile initialisÃ© avec la dÃ©lÃ©gation d'Ã©vÃ©nements.")}_setupEventListeners(){this.navBar.addEventListener("click",e=>{const t=e.target.closest(".menu-button-open"),n=e.target.closest(".menu-button-close");t?this._animateOpen():n&&this._animateClose()})}_animateOpen(){this.animation&&this.animation.isActive()||(this.animation=window.gsap.timeline(),this.animation.set(this.elements.menu,{display:"block"}).to(this.elements.menu,{right:"0%",duration:.5,ease:"power3.inOut"}))}_animateClose(){this.animation&&this.animation.isActive()||(this.animation=window.gsap.timeline(),this.animation.to(this.elements.menu,{right:"-100%",duration:.5,ease:"power3.inOut"}).set(this.elements.menu,{display:"none"}))}}let ue=0;const Pe=50;function pe(){document.querySelector(".menu-mobile")?(console.log("âœ… .menu-mobile trouvÃ©. Initialisation du menu mobile."),new Le):(ue++,ue<Pe?(console.log("[MenuMobile] Conteneur non trouvÃ©, nouvelle tentative dans 100ms..."),setTimeout(pe,100)):console.error("[MenuMobile] Initialisation annulÃ©e aprÃ¨s 5 secondes. .menu-mobile introuvable."))}function Ce(){pe()}console.log("ðŸš€ menu-desktop.js v2.3.0 chargÃ©");class Me{constructor(){if(this.elements={wrapper:document.querySelector(".desktop_menu_wrapper"),parcs:document.querySelector(".parc_menu_desktop"),activites:document.querySelector(".activites_menu_desktop"),offres:document.querySelector(".offres_menu_desktop")},this.navBar=document.querySelector(".w-nav"),this.currentMenu=null,this.currentTimeline=null,this.leaveTimeout=null,!this.navBar||!this.elements.wrapper){console.error("[MenuDesktop] Barre de navigation (.w-nav) ou wrapper (.desktop_menu_wrapper) introuvable. Initialisation annulÃ©e.");return}this._setupEventListeners(),console.log("âœ… Menu Desktop initialisÃ© avec la dÃ©lÃ©gation d'Ã©vÃ©nements.")}_setupEventListeners(){this.navBar.addEventListener("mouseover",e=>{const t=e.target.closest("[data-menu-target]");t&&this._handleMenuEnter(t)}),this.elements.wrapper.addEventListener("mouseleave",this._handleMenuLeave.bind(this))}_handleMenuEnter(e){clearTimeout(this.leaveTimeout);const t=e.dataset.menuTarget;this.currentMenu&&this.currentMenu===this.elements[t]||(this.currentMenu&&this._animateMenuClose(!1),this._animateMenuOpen(t))}_handleMenuLeave(){this.leaveTimeout=setTimeout(()=>{this._animateMenuClose(!0)},50)}_animateMenuClose(e){if(console.log("ðŸŽ¬ Animation de fermeture du menu",this.currentMenu),this.currentMenu){const t=this.currentMenu.querySelector(".menu-desktop-content");this.currentTimeline&&this.currentTimeline.isActive()&&this.currentTimeline.kill(),this.currentTimeline=window.gsap.timeline({onComplete:()=>{this.currentMenu.classList.remove("is-active"),e&&this.elements.wrapper.classList.remove("is-active"),this.currentMenu=null}}),this.currentTimeline.to(t,{opacity:0,duration:.2,ease:"power1.in"})}}_animateMenuOpen(e){if(!this.elements[e])return;this.currentMenu=this.elements[e];const t=this.currentMenu.querySelector(".menu-desktop-content");console.log("ðŸŽ¬ Animation d'ouverture du menu",this.currentMenu),this.currentTimeline&&this.currentTimeline.isActive()&&this.currentTimeline.kill(),this.elements.wrapper.classList.add("is-active"),["parcs","activites","offres"].forEach(n=>{if(n!==e&&this.elements[n]){this.elements[n].classList.remove("is-active");const s=this.elements[n].querySelector(".menu-desktop-content");s&&window.gsap.set(s,{opacity:0})}}),this.currentMenu.classList.add("is-active"),this.currentTimeline=window.gsap.from(t,{opacity:0,y:"-10px",duration:.3,ease:"power2.out"})}}let Q=0;const he=50;function me(){document.querySelector(".desktop_menu_wrapper")?(console.log("âœ… .desktop_menu_wrapper trouvÃ©. Initialisation du menu desktop."),new Me):(Q++,Q<he?(console.log(`[MenuDesktop] Wrapper non trouvÃ©, nouvelle tentative dans 100ms (${Q}/${he})`),setTimeout(me,100)):console.error("[MenuDesktop] Initialisation annulÃ©e aprÃ¨s 5 secondes. .desktop_menu_wrapper introuvable."))}function xe(){me()}let ee=!1;async function fe(i,e){if(!i||!i.classList.contains("is-open"))return;const t=i.querySelector(e.contentSelector),n=i.querySelector(e.arrowSelector);i.classList.remove("is-open");const s=z.gsap.timeline();s.to(t,{height:0,opacity:0,duration:.4,ease:"back.in(1.7)"},0),n&&s.to(n,{rotation:0,duration:.25,ease:"power2.inOut"},0),await s,t.style.display="none"}async function qe(i,e){if(!i||i.classList.contains("is-open"))return;i.classList.add("is-open");const t=i.querySelector(e.contentSelector),n=i.querySelector(e.arrowSelector);z.gsap.set(t,{display:"block",height:"auto",opacity:0});const s=t.scrollHeight,o=z.gsap.timeline();o.from(t,{height:0,opacity:0},0),o.to(t,{height:s,opacity:1,duration:.6,ease:"elastic.out(1.2, 0.5)"},0),n&&o.to(n,{rotation:90,duration:.25,ease:"back.out(1.7)"},"<"),await o}async function Be(i,e){if(!ee){ee=!0;try{if(i.classList.contains("is-open"))await fe(i,e);else{const n=document.querySelectorAll(`${e.itemSelector}.is-open`);await Promise.all(Array.from(n).map(o=>fe(o,e))),await qe(i,e);const s=new CustomEvent("accordion:opened",{bubbles:!0,detail:{item:i,config:e}});i.dispatchEvent(s)}}catch(t){console.error("Erreur lors du toggle de l'accordÃ©on:",t)}finally{ee=!1}}}function ge(i){const e=document.querySelectorAll(i.itemSelector);e.length!==0&&e.forEach(t=>{const n=t.querySelector(i.triggerSelector),s=t.querySelector(i.contentSelector);!n||!s||(t.classList.contains("is-open")||z.gsap.set(s,{display:"none",height:0}),n.addEventListener("click",o=>{o.preventDefault(),Be(t,i)}))})}console.log("ðŸš€ centre-card.js v4.1.0 chargÃ© â€“ RefactorisÃ© avec Accordion et Events");const F={scaleDuration:.4,scaleAmount:1.05,scaleEase:"power2.out",shadow:"0px 10px 30px rgba(0, 0, 0, 0.1)"};function We(i,e){!e||e.classList.contains("is-open")||window.gsap.to(e,{scale:F.scaleAmount,duration:F.scaleDuration,ease:F.scaleEase})}function De(i){i&&window.gsap.to(i,{scale:1,duration:F.scaleDuration,ease:F.scaleEase,onComplete:()=>{i.classList.contains("is-open")||(i.style.boxShadow="")}})}function Fe(){const i={itemSelector:".card-offre-h-s",triggerSelector:".accordion_head",contentSelector:".accordion_content",iconSelector:".accordion_icon",openClass:"is-open",animation:{onOpen:(t,n)=>{window.gsap.set(t,{height:"auto",opacity:1}),window.gsap.from(t,{height:0,opacity:0,duration:.5,ease:"power2.out"}),window.gsap.to(n,{rotation:"+=180",duration:.4,ease:"power2.out"})},onClose:(t,n)=>{window.gsap.to(t,{height:0,opacity:0,duration:.4,ease:"power2.in"}),window.gsap.to(n,{rotation:"+=180",duration:.4,ease:"power2.in"})}}};ge(i),document.querySelectorAll(i.itemSelector).forEach(t=>{t.addEventListener("mouseenter",s=>We(s,t)),t.addEventListener("mouseleave",()=>De(t)),new MutationObserver(s=>{s.forEach(o=>{if(o.attributeName==="class"){const a=o.target;a.classList.contains("is-open")?a.style.boxShadow=F.shadow:a.style.boxShadow=""}})}).observe(t,{attributes:!0})})}const Ne=()=>{const i=document.querySelector(".desktop_menu_content.right .w-dyn-items"),e=document.querySelectorAll(".desktop_menu_list.acitivt-s .default-container");if(!i||!e.length)return;const t=Array.from(i.children).find(a=>{const l=a.querySelector("img");return l&&l.id==="Bowling"});Array.from(i.children).forEach(a=>{a===t?(a.style.opacity="1",a.style.display="block"):(a.style.opacity="0",a.style.display="none")});const n=new Map,s=(a,l)=>{const r=Array.from(i.children).find(u=>{const m=u.querySelector("img");return m&&m.id===a});if(r)if(n.has(r)&&(n.get(r).kill(),n.delete(r)),l){if(t&&t!==r){n.has(t)&&n.get(t).kill();const m=gsap.to(t,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{t&&(t.style.display="none"),n.delete(t)}});n.set(t,m)}r.style.display="block";const u=gsap.to(r,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(r)});n.set(r,u)}else{const u=gsap.to(r,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{if(r.style.display="none",t){t.style.display="block",n.has(t)&&n.get(t).kill();const m=gsap.to(t,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(t)});n.set(t,m)}n.delete(r)}});n.set(r,u)}},o=(a,l)=>{n.has(a)&&(n.get(a).kill(),n.delete(a));const r={duration:l?.1:.05,ease:"power2.out",onComplete:()=>n.delete(a)},u=l?{scale:1.1,backgroundColor:"#FFFFFF"}:{scale:1,backgroundColor:""},m=gsap.to(a,{...u,...r});n.set(a,m)};e.forEach(a=>{const l=a.getAttribute("data-name");l&&(a.addEventListener("mouseenter",()=>{s(l,!0),o(a,!0)}),a.addEventListener("mouseleave",()=>{s(l,!1),o(a,!1)}))})};console.log("ðŸš€ text-animation.js v2.1.0 chargÃ©");function ve(){const i=document.querySelector(".span_mover");if(i)try{let n=function(){if(t)return;t=!0;const s=gsap.timeline({onComplete:()=>{t=!1,gsap.to(i,{y:e.positions.start,duration:e.duration,ease:e.ease,onComplete:()=>{setTimeout(n,e.cycleDelay*1e3)}})}}),o=[e.positions.start,e.positions.middle,e.positions.end];for(let a=0;a<o.length;a++)s.to(i,{y:o[a],duration:e.duration,ease:e.ease}),a<o.length-1&&s.to({},{duration:e.pauseDuration});s.play()};const e={duration:.6,ease:"back.out(1.7)",pauseDuration:1.5,cycleDelay:.5,positions:{start:"0%",middle:"-34%",end:"-68%"}};let t=!1;n(),window.addEventListener("beforeunload",()=>{gsap.killTweensOf(i)})}catch(e){console.error("Erreur dans l'animation de texte:",e)}}function ye(){setTimeout(typeof gsap<"u"?ve:ye,100)}ye(),console.log("ðŸš€ faq-toggle.js v1.1.0 chargÃ©");async function $e(){ge({itemSelector:".faq_item.effect-cartoon-shadow",triggerSelector:".faq_wrapper",contentSelector:".faq_respond",arrowSelector:".svg-holder.medium"})}console.log("ðŸ—ºï¸ map-integration.js v2.0.0 chargÃ©");const te={map:null,markers:[],infoWindow:null,initialCenter:{lat:48.82,lng:2.25},initialZoom:10,initMap:function(){const i=document.getElementById("map");if(!i){console.error("Erreur : L'Ã©lÃ©ment #map est introuvable dans le DOM.");return}this.map=new google.maps.Map(i,{center:this.initialCenter,zoom:this.initialZoom,disableDefaultUI:!0,zoomControl:!0,styles:[]}),this.infoWindow=new google.maps.InfoWindow,this.createMarkers(),this.listenForFocusEvents()},createMarkers:function(){const i=document.querySelectorAll(".w-dyn-item[data-place-id]");console.log(`ðŸ“ ${i.length} cartes trouvÃ©es pour la crÃ©ation des marqueurs.`),i.forEach(e=>{var l;const t=parseFloat(e.dataset.lat),n=parseFloat(e.dataset.lng),s=e.dataset.placeId,o=e.getAttribute("id");if(!t||!n||!s){console.warn("âš ï¸ Carte ignorÃ©e car il manque data-lat, data-lng ou data-place-id",e);return}const a=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:t,lng:n},title:((l=e.querySelector("h3"))==null?void 0:l.textContent)||"Centre Smile World"});a.addListener("click",()=>{const r=e.querySelector('.clickable_wrap[data-attribute="data-card-toggle"]');r?r.click():console.warn("Impossible de trouver l'Ã©lÃ©ment cliquable pour ouvrir la carte",e)}),this.markers.push({placeId:s,cardId:o,marker:a})})},focusOnCenter:function(i){if(!i||!this.map)return;console.log(`ðŸ”Ž Zoom sur le centre avec Place ID : ${i}`),new google.maps.places.PlacesService(this.map).getDetails({placeId:i,fields:["name","formatted_address","geometry","rating","website","url"]},(t,n)=>{var s;if(n===google.maps.places.PlacesServiceStatus.OK&&t&&t.geometry&&t.geometry.location){this.map.panTo(t.geometry.location),this.map.setZoom(15);const o=`
                    <div class="map-infowindow-content">
                        <div class="map-infowindow-title">${t.name}</div>
                        <div class="map-infowindow-address">${t.formatted_address}</div>
                        ${t.rating?`<div class="map-infowindow-rating">Note : ${t.rating} â˜…</div>`:""}
                        <a href="${t.url}" target="_blank">Voir sur Google Maps</a>
                    </div>
                `;this.infoWindow.setContent(o);const a=(s=this.markers.find(l=>l.placeId===i))==null?void 0:s.marker;a&&this.infoWindow.open(this.map,a)}else console.error(`Erreur lors de la rÃ©cupÃ©ration des dÃ©tails pour le Place ID ${i}: ${n}`)})},resetMapView:function(){this.map&&(console.log("ðŸ”„ RÃ©initialisation de la vue de la carte."),this.infoWindow.close(),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))},listenForFocusEvents:function(){document.addEventListener("map:focus",i=>{this.focusOnCenter(i.detail.placeId)})}};window.initGoogleMap=te.initMap.bind(te);function Oe(){const i=document.getElementById("map");if(!i){console.warn("âš ï¸ L'Ã©lÃ©ment #map est introuvable, l'intÃ©gration de la carte est annulÃ©e.");return}const e=i.dataset.apiKey;if(!e){console.error(`âŒ ClÃ© API Google Maps manquante. Veuillez l'ajouter dans l'attribut "data-api-key" de la div #map.`);return}if(window.google&&window.google.maps){console.log("ðŸ—ºï¸ Google Maps API dÃ©jÃ  chargÃ©e."),te.initMap();return}console.log("ðŸ—ºï¸ Chargement de l'API Google Maps...");const t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,marker&callback=initGoogleMap`,t.async=!0,document.head.appendChild(t)}console.log("ðŸ” main_gsap.js - Module chargÃ© et exÃ©cution commencÃ©e"),console.log("ðŸ“¦ main_gsap.js - DÃ©but du chargement");function je(){document.querySelectorAll(".desktop_menu_wrapper, .parc_menu_desktop, .activites_menu_desktop, .offres_menu_desktop, .menu-mobile").forEach(i=>{i&&i.classList.add("is-hidden")})}async function Re(){console.log("ðŸŽ¬ DÃ©but de l'initialisation des modules");try{je(),console.log("âœ… Ã‰tats initiaux dÃ©finis via classes CSS");const i=await Te();xe(),Ce();const e=[Fe(),Ne(),ve(),$e(),Oe()];if(await Promise.all(e),console.log("âœ¨ Tous les modules ont Ã©tÃ© initialisÃ©s"),document.getElementById("container-initial")){console.log("ðŸï¸ Page de rÃ©servation dÃ©tectÃ©e, chargement du module...");try{const{SmileWorldReservation:n}=await Promise.resolve().then(()=>Ve);new n,console.log("âœ… Module de rÃ©servation chargÃ© et initialisÃ©.")}catch(n){console.error("âŒ Erreur lors du chargement du module de rÃ©servation:",n)}}i&&Ee()}catch(i){console.error("âŒ Erreur fatale lors de l'initialisation:",i),Ie()}}function Se(){const i=!!window.gsap,e=!!document.querySelector(".w-nav");i&&e?(console.log("âœ… GSAP et .w-nav sont prÃªts. Initialisation de l'application..."),window.gsap.registerPlugin(de),Re()):(console.log(`â³ Attente... GSAP: ${i}, .w-nav: ${e}. Nouvelle tentative dans 100ms...`),setTimeout(Se,100))}window.Webflow=window.Webflow||[],window.Webflow.push(Se);class ze{constructor(){this.config={defaultVideoUrl:"https://player.vimeo.com/progressive_redirect/playback/1088767237/rendition/1080p/file.mp4?loc=external&signature=1d46b415bde9b315b01d645374b5f7319940ecff5995ac8ac213f847577f6536",ids:{initialContainer:"container-initial",filteredContainer:"container-filtre",hiddenMap:"hidden-map",initialActivitiesPane:"tab-pane-initial-activites",initialParksPane:"tab-pane-initial-parcs",filteredActivitiesPane:"tab-pane-filtre-activites",filteredParksPane:"tab-pane-filtre-parcs",initialActivitiesTabLink:"tab-link-initial-activites",initialParksTabLink:"tab-link-initial-parcs",filteredActivitiesTabLink:"tab-link-filtre-activites",filteredParksTabLink:"tab-link-filtre-parcs",selectionWrapper:"selection-wrapper",label:"selection-label",reserveBtn:"reserve-btn",iframeWrap:"iframe-wrapper"}},this.state={primarySelectionType:null,selectedInitialSlugs:new Set,selectedInitialParkId:null,finalSelectedParkId:null,finalSelectedSlugs:new Set},this.dom={},this.mapItems=[],this.init()}init(){this._setupDomElements()&&(this._injectStyles(),this._injectVideoPlayer(),this._setupEventListeners(),this._applyUrlParameters(),this._setInitialUiState())}_setupDomElements(){for(const e in this.config.ids)if(this.dom[e]=document.getElementById(this.config.ids[e]),!this.dom[e])return console.error(`[SW-RSV] Essential element #${this.config.ids[e]} is missing.`),!1;return this.dom.videoBackgroundDiv=document.querySelector('[data-attribute="video_background"]'),this.dom.resetButton=document.querySelector('[data-attribute="reset_form"]'),this.mapItems=Array.from(this.dom.hiddenMap.querySelectorAll(".map-item")),!0}_setInitialUiState(){this.dom.filteredContainer.style.display="none",this.dom.reserveBtn.classList.add("disabled"),this.dom.iframeWrap.style.display="none",this.dom.selectionWrapper&&(window.gsap.set(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none"}),window.gsap.set(this.dom.label,{opacity:0}))}_setupEventListeners(){this.dom.initialActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"initialActivity")),this.dom.initialParksPane.addEventListener("click",this._handleSelection.bind(this,"initialPark")),this.dom.filteredActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"finalActivity")),this.dom.filteredParksPane.addEventListener("click",this._handleSelection.bind(this,"finalPark")),this.dom.reserveBtn.addEventListener("click",this._handleReserveClick.bind(this)),this.dom.resetButton&&this.dom.resetButton.addEventListener("click",this._fullReset.bind(this))}_handleSelection(e,t){const n=t.target.closest("[data-activity-slug], [data-centre-apex-id]");if(!n)return;const s=n.dataset.activitySlug,o=n.dataset.centreApexId;switch(e){case"initialActivity":this._handleInitialActivitySelection(s,n);break;case"initialPark":this._handleInitialParkSelection(o,n);break;case"finalActivity":this._handleFinalActivitySelection(s,n);break;case"finalPark":this._handleFinalParkSelection(o,n);break}}_handleInitialActivitySelection(e,t){if(this.state.primarySelectionType==="parks"&&(this._resetInitialSelections("parks"),this._resetInitialTabs()),this.state.primarySelectionType="activities",t.classList.toggle("isSelected"),t.classList.contains("isSelected")?this.state.selectedInitialSlugs.add(e):this.state.selectedInitialSlugs.delete(e),this._resetFinalSelections(),this.state.selectedInitialSlugs.size>0){this.dom.initialParksTabLink.style.display="none";const n=Array.from(this.state.selectedInitialSlugs).map(a=>new Set(this.mapItems.filter(l=>l.dataset.activitySlug===a).map(l=>l.dataset.centreApexId))),s=n.length>0?n[0]:new Set,o=n.reduce((a,l)=>new Set([...a].filter(r=>l.has(r))),s);this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(a=>{a.style.display=o.has(a.dataset.centreApexId)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("parks")}else this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this.state.primarySelectionType=null;this._updateStateAndButton()}_handleInitialParkSelection(e,t){this.state.primarySelectionType==="activities"&&(this._resetInitialSelections("activities"),this._resetInitialTabs()),this.state.primarySelectionType="parks";const n=this.state.selectedInitialParkId===e;if(this._resetFinalSelections(),n)this.state.selectedInitialParkId=null,t.classList.remove("isSelected"),this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this._updateVideoSource(null);else{this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(o=>o.classList.remove("isSelected")),this.state.selectedInitialParkId=e,t.classList.add("isSelected"),this._updateVideoSource(t),this.dom.initialActivitiesTabLink.style.display="none";const s=new Set(this.mapItems.filter(o=>o.dataset.centreApexId===e).map(o=>o.dataset.activitySlug));this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(o=>{o.style.display=s.has(o.dataset.activitySlug)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("activities")}this._updateStateAndButton()}_handleFinalParkSelection(e,t){this.state.primarySelectionType==="activities"&&(this.state.finalSelectedParkId===e?(this.state.finalSelectedParkId=null,t.classList.remove("isSelected"),this._updateVideoSource(null)):(this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(n=>n.classList.remove("isSelected")),this.state.finalSelectedParkId=e,t.classList.add("isSelected"),this._updateVideoSource(t)),this._updateStateAndButton())}_handleFinalActivitySelection(e,t){this.state.primarySelectionType==="parks"&&(t.classList.toggle("isSelected"),t.classList.contains("isSelected")?this.state.finalSelectedSlugs.add(e):this.state.finalSelectedSlugs.delete(e),this._updateStateAndButton())}_handleReserveClick(e){if(this.dom.reserveBtn.classList.contains("disabled")){e.preventDefault();return}e.preventDefault();const t=this.dom.reserveBtn.href;if(t&&t!=="#"){this.dom.iframeWrap.innerHTML=`<iframe src="${t}" style="width: 100%; height: 100vh; border: none;"></iframe>`,this.dom.iframeWrap.style.display="block";const n=this.dom.iframeWrap.getBoundingClientRect().top+window.scrollY,o=7*parseFloat(getComputedStyle(document.documentElement).fontSize);window.scrollTo({top:n-o,behavior:"smooth"})}}_updateStateAndButton(){let e=null,t=null;if(this.state.primarySelectionType==="activities"?(e=this.state.finalSelectedParkId,t=this.state.selectedInitialSlugs):this.state.primarySelectionType==="parks"&&(e=this.state.selectedInitialParkId,t=this.state.finalSelectedSlugs),e&&t&&t.size>0){const n=Array.from(t).map(s=>{const o=this.mapItems.find(a=>a.dataset.centreApexId===e&&a.dataset.activitySlug===s);return o?o.dataset.activityApexId:null}).filter(Boolean);if(n.length===t.size){const s=n.join(",");this.dom.reserveBtn.href=`https://www.apex-timing.com/gokarts/sessions_booking.php?center=${e}&categories=${s}&language=fr&iframe_id=axiframe_0`,this.dom.reserveBtn.classList.remove("disabled");const o=this.state.primarySelectionType==="activities"?this.dom.filteredParksPane.querySelector(`[data-centre-apex-id="${e}"]`):this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${e}"]`),a=o?o.dataset.parkLabel:"",l=Array.from(t).map(r=>{const u=this.state.primarySelectionType==="activities"?this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${r}"]`):this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${r}"]`);return u?u.dataset.activityLabel:r});this.dom.label.textContent=`C'est parti pour ${l.map(r=>`un ${r}`).join(" & ")} Ã  ${a} !`,this._animateSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="La combinaison sÃ©lectionnÃ©e est invalide.",this._resetSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="Veuillez terminer votre sÃ©lection.",this._resetSelectionAppearance()}_switchFilteredTab(e){const t="w--current",n=e==="parks"?"Parks":"Activities",s=e==="parks"?"Activities":"Parks";this.dom[`filtered${n}TabLink`].classList.add(t),this.dom[`filtered${s}TabLink`].classList.remove(t),this.dom[`filtered${n}Pane`].classList.add(t),this.dom[`filtered${s}Pane`].classList.remove(t),this.dom[`filtered${n}TabLink`].style.display="inline-block",this.dom[`filtered${n}Pane`].style.display="block",this.dom[`filtered${s}TabLink`].style.display="none",this.dom[`filtered${s}Pane`].style.display="none"}_animateSelectionAppearance(){if(!this.dom.selectionWrapper)return;window.gsap.timeline().to(this.dom.selectionWrapper,{opacity:1,pointerEvents:"auto",duration:.4,ease:"power2.inOut"}).from(this.dom.selectionWrapper,{scale:.9,ease:"elastic.out(1, 0.6)",duration:1.2},"-=0.2").to(this.dom.label,{opacity:1,duration:.5},"-=1")}_resetSelectionAppearance(){this.dom.selectionWrapper&&(window.gsap.to(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none",duration:.3}),window.gsap.to(this.dom.label,{opacity:0,duration:.2}))}_updateVideoSource(e){if(!this.dom.videoBackgroundDiv)return;const t=this.dom.videoBackgroundDiv.querySelector("source"),n=this.dom.videoBackgroundDiv.querySelector("video");if(!t||!n)return;const s=e&&e.dataset.video?e.dataset.video:this.config.defaultVideoUrl;t.src!==s&&(t.src=s,n.load(),n.play().catch(()=>{}))}_fullReset(e){e&&e.preventDefault(),this.state.primarySelectionType=null,this._resetInitialSelections("activities"),this._resetInitialSelections("parks"),this._resetFinalSelections(),this._resetInitialTabs(),this._resetFilteredTabs(),this.dom.filteredContainer.style.display="none",this.dom.iframeWrap.style.display="none",this._updateStateAndButton()}_resetInitialTabs(){this.dom.initialActivitiesTabLink&&(this.dom.initialActivitiesTabLink.style.display="flex"),this.dom.initialParksTabLink&&(this.dom.initialParksTabLink.style.display="flex")}_resetInitialSelections(e){e==="activities"?(this.dom.initialActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(t=>t.classList.remove("isSelected")),this.state.selectedInitialSlugs.clear()):e==="parks"&&(this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(t=>t.classList.remove("isSelected")),this.state.selectedInitialParkId=null,this._updateVideoSource(null))}_resetFinalSelections(){this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedSlugs.clear(),this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedParkId=null}_resetFilteredTabs(){this.dom.filteredActivitiesTabLink.style.display="inline-block",this.dom.filteredParksTabLink.style.display="inline-block"}_injectStyles(){const e=document.createElement("style");e.id="sw-rsv-styles",e.textContent=`
        .isSelected .tags_content { background-color: black !important; color: white !important; }
        .isSelected .tags_content * { color: white !important; }`,document.head.appendChild(e)}_injectVideoPlayer(){this.dom.videoBackgroundDiv&&(this.dom.videoBackgroundDiv.innerHTML=`
        <div style="width: 100%; height: 100%;" class="w-background-video w-background-video-atom">
          <video playsinline loop muted autoplay data-wf-ignore="true" data-object-fit="cover">
            <source src="${this.config.defaultVideoUrl}" data-wf-ignore="true"/>
          </video>
        </div>`)}_applyUrlParameters(){const e=new URLSearchParams(window.location.search),t=e.get("activite"),n=e.get("parc");!t&&!n||setTimeout(()=>{if(n&&t){const s=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${n}"]`);if(s){this._handleInitialParkSelection(n,s);const o=this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${t}"]`);o&&this._handleFinalActivitySelection(t,o)}}else if(n){const s=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${n}"]`);s&&s.click()}else if(t){const s=this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${t}"]`);s&&s.click()}},100)}}const Ve=Object.freeze(Object.defineProperty({__proto__:null,SmileWorldReservation:ze},Symbol.toStringTag,{value:"Module"}))})(gsap);
