(function(Z){"use strict";/*!
 * SplitText 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2025, GreenSock. All rights reserved. Subject to the terms at https://gsap.com/standard-license.
 * @author: Jack Doyle
 */let V,F,ie,We=()=>ie||ke.register(window.gsap),he=typeof Intl<"u"?new Intl.Segmenter:0,Y=t=>typeof t=="string"?Y(document.querySelectorAll(t)):"length"in t?Array.from(t):[t],fe=t=>Y(t).filter(e=>e instanceof HTMLElement),ne=[],oe=function(){},De=/\s+/g,ge=new RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),ye={left:0,top:0,width:0,height:0},Se=(t,e)=>{if(e){let i=new Set(t.join("").match(e)||ne),n=t.length,o,a,s,l;if(i.size)for(;--n>-1;){a=t[n];for(s of i)if(s.startsWith(a)&&s.length>a.length){for(o=0,l=a;s.startsWith(l+=t[n+ ++o])&&l.length<s.length;);if(o&&l.length===s.length){t[n]=s,t.splice(n+1,o);break}}}}return t},ve=t=>window.getComputedStyle(t).display==="inline"&&(t.style.display="inline-block"),$=(t,e,i)=>e.insertBefore(typeof t=="string"?document.createTextNode(t):t,i),se=(t,e,i)=>{let n=e[t+"sClass"]||"",{tag:o="div",aria:a="auto",propIndex:s=!1}=e,l=t==="line"?"block":"inline-block",r=n.indexOf("++")>-1,d=h=>{let y=document.createElement(o),_=i.length+1;return n&&(y.className=n+(r?" "+n+_:"")),s&&y.style.setProperty("--"+t,_+""),a!=="none"&&y.setAttribute("aria-hidden","true"),o!=="span"&&(y.style.position="relative",y.style.display=l),y.textContent=h,i.push(y),y};return r&&(n=n.replace("++","")),d.collection=i,d},Fe=(t,e,i,n)=>{let o=se("line",i,n),a=window.getComputedStyle(t).textAlign||"left";return(s,l)=>{let r=o("");for(r.style.textAlign=a,t.insertBefore(r,e[s]);s<l;s++)r.appendChild(e[s]);r.normalize()}},we=(t,e,i,n,o,a,s,l,r,d)=>{var h;let y=Array.from(t.childNodes),_=0,{wordDelimiter:L,reduceWhiteSpace:x=!0,prepareText:ee}=e,te=t.getBoundingClientRect(),N=te,K=!x&&window.getComputedStyle(t).whiteSpace.substring(0,3)==="pre",A=0,w=i.collection,u,g,U,c,S,b,z,p,f,T,E,P,C,W,v,m,q,I;for(typeof L=="object"?(U=L.delimiter||L,g=L.replaceWith||""):g=L===""?"":L||" ",u=g!==" ";_<y.length;_++)if(c=y[_],c.nodeType===3){for(v=c.textContent||"",x?v=v.replace(De," "):K&&(v=v.replace(/\n/g,g+`
`)),ee&&(v=ee(v,t)),c.textContent=v,S=g||U?v.split(U||g):v.match(l)||ne,q=S[S.length-1],p=u?q.slice(-1)===" ":!q,q||S.pop(),N=te,z=u?S[0].charAt(0)===" ":!S[0],z&&$(" ",t,c),S[0]||S.shift(),Se(S,r),a&&d||(c.textContent=""),f=1;f<=S.length;f++)if(m=S[f-1],!x&&K&&m.charAt(0)===`
`&&((h=c.previousSibling)==null||h.remove(),$(document.createElement("br"),t,c),m=m.slice(1)),!x&&m==="")$(g,t,c);else if(m===" ")t.insertBefore(document.createTextNode(" "),c);else{if(u&&m.charAt(0)===" "&&$(" ",t,c),A&&f===1&&!z&&w.indexOf(A.parentNode)>-1?(b=w[w.length-1],b.appendChild(document.createTextNode(n?"":m))):(b=i(n?"":m),$(b,t,c),A&&f===1&&!z&&b.insertBefore(A,b.firstChild)),n)for(E=he?Se([...he.segment(m)].map(D=>D.segment),r):m.match(l)||ne,I=0;I<E.length;I++)b.appendChild(E[I]===" "?document.createTextNode(" "):n(E[I]));if(a&&d){if(v=c.textContent=v.substring(m.length+1,v.length),T=b.getBoundingClientRect(),T.top>N.top&&T.left<=N.left){for(P=t.cloneNode(),C=t.childNodes[0];C&&C!==b;)W=C,C=C.nextSibling,P.appendChild(W);t.parentNode.insertBefore(P,t),o&&ve(P)}N=T}(f<S.length||p)&&$(f>=S.length?" ":u&&m.slice(-1)===" "?" "+g:g,t,c)}t.removeChild(c),A=0}else c.nodeType===1&&(s&&s.indexOf(c)>-1?(w.indexOf(c.previousSibling)>-1&&w[w.length-1].appendChild(c),A=c):(we(c,e,i,n,o,a,s,l,r,!0),A=0),o&&ve(c))};const be=class Ne{constructor(e,i){this.isSplit=!1,We(),this.elements=fe(e),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=i,this._split=()=>this.isSplit&&this.split(this.vars);let n=[],o,a=()=>{let s=n.length,l;for(;s--;){l=n[s];let r=l.element.offsetWidth;if(r!==l.width){l.width=r,this._split();return}}};this._data={orig:n,obs:typeof ResizeObserver<"u"&&new ResizeObserver(()=>{clearTimeout(o),o=setTimeout(a,200)})},oe(this),this.split(i)}split(e){this.isSplit&&this.revert(),this.vars=e=e||this.vars||{};let{type:i="chars,words,lines",aria:n="auto",deepSlice:o=!0,smartWrap:a,onSplit:s,autoSplit:l=!1,specialChars:r,mask:d}=this.vars,h=i.indexOf("lines")>-1,y=i.indexOf("chars")>-1,_=i.indexOf("words")>-1,L=y&&!_&&!h,x=r&&("push"in r?new RegExp("(?:"+r.join("|")+")","gu"):r),ee=x?new RegExp(x.source+"|"+ge.source,"gu"):ge,te=!!e.ignore&&fe(e.ignore),{orig:N,animTime:K,obs:A}=this._data,w;return(y||_||h)&&(this.elements.forEach((u,g)=>{N[g]={element:u,html:u.innerHTML,ariaL:u.getAttribute("aria-label"),ariaH:u.getAttribute("aria-hidden")},n==="auto"?u.setAttribute("aria-label",(u.textContent||"").trim()):n==="hidden"&&u.setAttribute("aria-hidden","true");let U=[],c=[],S=[],b=y?se("char",e,U):null,z=se("word",e,c),p,f,T,E;if(we(u,e,z,b,L,o&&(h||L),te,ee,x,!1),h){let P=Y(u.childNodes),C=Fe(u,P,e,S),W,v=[],m=0,q=P.map(D=>D.nodeType===1?D.getBoundingClientRect():ye),I=ye;for(p=0;p<P.length;p++)W=P[p],W.nodeType===1&&(W.nodeName==="BR"?(v.push(W),C(m,p+1),m=p+1,I=q[m]):(p&&q[p].top>I.top&&q[p].left<=I.left&&(C(m,p),m=p),I=q[p]));m<p&&C(m,p),v.forEach(D=>{var Oe;return(Oe=D.parentNode)==null?void 0:Oe.removeChild(D)})}if(!_){for(p=0;p<c.length;p++)if(f=c[p],y||!f.nextSibling||f.nextSibling.nodeType!==3)if(a&&!h){for(T=document.createElement("span"),T.style.whiteSpace="nowrap";f.firstChild;)T.appendChild(f.firstChild);f.replaceWith(T)}else f.replaceWith(...f.childNodes);else E=f.nextSibling,E&&E.nodeType===3&&(E.textContent=(f.textContent||"")+(E.textContent||""),f.remove());c.length=0,u.normalize()}this.lines.push(...S),this.words.push(...c),this.chars.push(...U)}),d&&this[d]&&this.masks.push(...this[d].map(u=>{let g=u.cloneNode();return u.replaceWith(g),g.appendChild(u),u.className&&(g.className=u.className.replace(/(\b\w+\b)/g,"$1-mask")),g.style.overflow="clip",g}))),this.isSplit=!0,F&&(l?F.addEventListener("loadingdone",this._split):F.status==="loading"&&console.warn("SplitText called before fonts loaded")),(w=s&&s(this))&&w.totalTime&&(this._data.anim=K?w.totalTime(K):w),h&&l&&this.elements.forEach((u,g)=>{N[g].width=u.offsetWidth,A&&A.observe(u)}),this}revert(){var e,i;let{orig:n,anim:o,obs:a}=this._data;return a&&a.disconnect(),n.forEach(({element:s,html:l,ariaL:r,ariaH:d})=>{s.innerHTML=l,r?s.setAttribute("aria-label",r):s.removeAttribute("aria-label"),d?s.setAttribute("aria-hidden",d):s.removeAttribute("aria-hidden")}),this.chars.length=this.words.length=this.lines.length=n.length=this.masks.length=0,this.isSplit=!1,F==null||F.removeEventListener("loadingdone",this._split),o&&(this._data.animTime=o.totalTime(),o.revert()),(i=(e=this.vars).onRevert)==null||i.call(e,this),this}static create(e,i){return new Ne(e,i)}static register(e){V=V||e||window.gsap,V&&(Y=V.utils.toArray,oe=V.core.context||oe),!ie&&window.innerWidth>0&&(F=document.fonts,ie=!0)}};be.version="3.13.0";let ke=be;console.log("🚀 loading-screen.js v1.2.0 chargé");const ae={fadeOutDuration:.4,ease:"power2.out"};let J=!1,G=!1;function $e(){if(console.log("🎬 initLoadingScreen - Début de l'initialisation"),J)return console.log("ℹ️ Écran de chargement déjà initialisé"),Promise.resolve();const t=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");return console.log("🔍 Éléments trouvés:",{loadingScreen:!!t,logoWrap:!!e}),!t||!e?(console.warn("⚠️ Éléments manquants:",{loadingScreen:t?"OK":"Non trouvé",logoWrap:e?"OK":"Non trouvé"}),J=!1,Promise.resolve(null)):(console.log("🎨 Configuration des styles initiaux"),window.gsap.set(t,{opacity:1,display:"flex",backgroundColor:"white"}),window.gsap.set(e,{opacity:0,scale:.9}),window.gsap.to(e,{opacity:1,scale:1,duration:.5,delay:.1,ease:ae.ease}),J=!0,console.log("✅ Écran de chargement initialisé avec succès"),Promise.resolve(t))}function Re(){if(console.log("🎬 hideLoadingScreen - Début du masquage"),!J){console.warn("⚠️ Écran de chargement non initialisé");return}if(G){console.log("ℹ️ Masquage déjà en cours");return}G=!0;const t=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");if(console.log("🔍 Éléments trouvés pour le masquage:",{loadingScreen:!!t,logoWrap:!!e}),!t||!e){console.warn("⚠️ Éléments manquants pour le masquage"),G=!1;return}console.log("🎬 Démarrage de l'animation de masquage"),window.gsap.timeline({onComplete:()=>{console.log("✅ Animation de masquage terminée"),window.gsap.set(t,{display:"none"}),G=!1}}).to(t,{opacity:0,duration:ae.fadeOutDuration,ease:ae.ease})}function je(){const t=document.querySelector(".loadingscreen");t&&window.gsap.to(t,{opacity:0,duration:.5,onComplete:()=>{window.gsap.set(t,{display:"none"})}}),G=!1}console.log("🚀 menu-mobile.js v1.2.0 chargé");const k={MENU_BUTTON:"#hamburger-menu",MAIN_MENU:"#main-menu-mobile",ALL_MENUS:"#main-menu-mobile, #parc-menu-mobile, #activite-menu-mobile, #offres-menu-mobile",SUB_MENU_TRIGGERS:{"#parcs-nav_button_mobile":"#parc-menu-mobile","#activites-nav_button_mobile":"#activite-menu-mobile","#formules-nav_button_mobile":"#offres-menu-mobile"},CLOSE_BUTTONS:".button-close",BACK_BUTTONS:".button-back-menu"};let Q,H,re=0;function Ue(){re=window.pageYOffset||document.documentElement.scrollTop,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.top=`-${re}px`}function ze(){document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.top="",window.scrollTo(0,re)}function le(t){t&&(t.classList.add("is-open"),H.fromTo(t,{x:"100%"},{x:"0%",duration:.4,ease:"power2.out"}))}function ce(t,e){t&&H.to(t,{x:"100%",duration:.3,ease:"power2.in",onComplete:()=>{t.classList.remove("is-open")}})}function de(){document.querySelectorAll(k.ALL_MENUS).forEach(t=>{t.classList.contains("is-open")&&ce(t)}),H.reverse(),ze()}function Ve(){de();const t=document.querySelector(k.MAIN_MENU);le(t),H.play(),Ue()}function Ge(t){const e=document.querySelector(k.MAIN_MENU),i=document.querySelector(t);ce(e),le(i)}function He(){const t=document.querySelector(".is-open:not(#main-menu-mobile)"),e=document.querySelector(k.MAIN_MENU);t&&ce(t),le(e)}function Ke(){var t;if(Q=document.querySelector(k.MENU_BUTTON),!!Q){H=window.gsap.timeline({paused:!0}).to(Q,{rotation:90,duration:.4,ease:"elastic.out(1, 0.5)"}),Q.addEventListener("click",()=>{document.querySelector(k.ALL_MENUS+".is-open")?de():Ve()});for(const e in k.SUB_MENU_TRIGGERS)(t=document.querySelector(e))==null||t.addEventListener("click",()=>{Ge(k.SUB_MENU_TRIGGERS[e])});document.querySelectorAll(k.CLOSE_BUTTONS).forEach(e=>{e.addEventListener("click",de)}),document.querySelectorAll(k.BACK_BUTTONS).forEach(e=>{e.addEventListener("click",He)}),console.log("✅ Écouteurs d'événements pour le menu mobile configurés")}}console.log("🚀 menu-desktop.js v2.2.0 chargé");let _e=!1,X=!1,B=!1,Ae=new Map,M=null,Ee="";const O=[{buttonId:"nav-link-desktop-parcs",containerSelector:".parc_menu_desktop",isOpen:!1},{buttonId:"nav-link-desktop-activites",containerSelector:".activites_menu_desktop",isOpen:!1},{buttonId:"nav-link-desktop-offres",containerSelector:".offres_menu_desktop",isOpen:!1}];function Ce(t){t?(Ee=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=Ee}function Ze(){console.log("🔄 Initialisation des boutons de menu..."),O.forEach(t=>{const e=document.getElementById(t.buttonId);e?(Ae.set(t.buttonId,e),console.log(`✅ Bouton trouvé: ${t.buttonId}`)):console.log(`❌ Bouton non trouvé: ${t.buttonId}`)})}function ue(t){return Ae.get(t)}function R(t){if(!t)return!1;const e=window.getComputedStyle(t);return e.display!=="none"&&e.visibility!=="hidden"&&e.opacity!=="0"}function Ie(t){if(!t||B)return;B=!0;const e=window.gsap.timeline({onComplete:()=>{t&&t.setAttribute("style","display: none !important;"),X=!1,B=!1,Ce(!1)}});O.forEach(i=>{const n=document.querySelector(i.containerSelector);n&&R(n)&&e.to(n,{opacity:0,duration:.3,ease:"power2.inOut",onComplete:()=>{n.setAttribute("style","display: none !important;"),i.isOpen=!1}},0)}),R(t)&&e.to(t,{opacity:0,duration:.3,ease:"power2.inOut"},0)}function Ye(t){M&&document.removeEventListener("click",M),M=e=>{if(B)return;!O.some(n=>{const o=ue(n.buttonId),a=document.querySelector(n.containerSelector);return o&&e.target===o||a&&e.target.closest(n.containerSelector)})&&!e.target.closest(".desktop_menu_wrapper")&&X&&R(t)&&(Ie(t),Le())},document.addEventListener("click",M)}function Le(){M&&(document.removeEventListener("click",M),M=null)}function Je(){O.forEach(t=>{const e=document.querySelector(t.containerSelector);e&&(e.style.transition="width 0.4s ease-in-out",e.style.overflow="hidden")})}function Te(){if(console.log("🚀 Démarrage de l'initialisation du menu desktop"),_e){console.log("⚠️ Le menu desktop est déjà initialisé");return}Je(),console.log("🔍 Recherche des éléments du menu..."),Ze();const t=document.querySelector(".desktop_menu_wrapper");if(!t){console.log("❌ Menu wrapper non trouvé");return}console.log("✅ Menu wrapper trouvé"),O.forEach(e=>{const i=ue(e.buttonId),n=document.querySelector(e.containerSelector);!i||!n||(n.style.display="none",n.style.opacity="0",i.addEventListener("click",o=>{if(o.preventDefault(),o.stopPropagation(),!B)if(e.isOpen)Ie(t),Le();else{B=!0;const a=window.gsap.timeline({onComplete:()=>{B=!1}});X||(t.style.display="flex",t.style.height="auto",console.log("🎯 Affichage du wrapper:",t.style.display),a.to(t,{opacity:1,duration:.3,ease:"power2.out"}),X=!0,Ye(t),Ce(!0)),O.forEach(l=>{if(l!==e){const r=document.querySelector(l.containerSelector),d=ue(l.buttonId);r&&R(r)&&(console.log("🔒 Fermeture du menu:",l.containerSelector),a.to(r,{width:0,opacity:0,duration:.4,ease:"power2.inOut",onComplete:()=>{r.setAttribute("style","display: none !important; width: auto;"),l.isOpen=!1}},0)),d&&R(d)&&a.to(d,{opacity:0,duration:.2,ease:"power2.out"},0)}}),O.forEach(l=>{if(l!==e){const r=document.querySelector(l.containerSelector);r&&R(r)&&a.to(r,{opacity:0,duration:.2,ease:"power2.inOut",onComplete:()=>{r.setAttribute("style","display: none !important;"),l.isOpen=!1}},0)}});const s=document.querySelector(e.containerSelector);a.to({},{duration:.1,onComplete:()=>{s.setAttribute("style","display: flex !important; opacity: 0;"),a.to(s,{opacity:1,duration:.3,ease:"power2.inOut"})}},">0.1"),e.isOpen=!0}}))}),console.log("Menu Wrapper:",document.querySelector(".desktop_menu_wrapper")),console.log("Boutons de menu:",{parcs:document.getElementById("nav-link-desktop-parcs"),activites:document.getElementById("nav-link-desktop-activites"),offres:document.getElementById("nav-link-desktop-offres")}),console.log("Conteneurs de menu:",{parcs:document.querySelector(".parc_menu_desktop"),activites:document.querySelector(".activites_menu_desktop"),offres:document.querySelector(".offres_menu_desktop")}),_e=!0}let pe=!1;async function Pe(t,e){if(!t||!t.classList.contains("is-open"))return;const i=t.querySelector(e.contentSelector),n=t.querySelector(e.arrowSelector);t.classList.remove("is-open");const o=Z.gsap.timeline();o.to(i,{height:0,opacity:0,duration:.4,ease:"back.in(1.7)"},0),n&&o.to(n,{rotation:0,duration:.25,ease:"power2.inOut"},0),await o,i.style.display="none"}async function Qe(t,e){if(!t||t.classList.contains("is-open"))return;t.classList.add("is-open");const i=t.querySelector(e.contentSelector),n=t.querySelector(e.arrowSelector);Z.gsap.set(i,{display:"block",height:"auto",opacity:0});const o=i.scrollHeight,a=Z.gsap.timeline();a.from(i,{height:0,opacity:0},0),a.to(i,{height:o,opacity:1,duration:.6,ease:"elastic.out(1.2, 0.5)"},0),n&&a.to(n,{rotation:90,duration:.25,ease:"back.out(1.7)"},"<"),await a}async function Xe(t,e){if(!pe){pe=!0;try{if(t.classList.contains("is-open"))await Pe(t,e);else{const n=document.querySelectorAll(`${e.itemSelector}.is-open`);await Promise.all(Array.from(n).map(a=>Pe(a,e))),await Qe(t,e);const o=new CustomEvent("accordion:opened",{bubbles:!0,detail:{item:t,config:e}});t.dispatchEvent(o)}}catch(i){console.error("Erreur lors du toggle de l'accordéon:",i)}finally{pe=!1}}}function qe(t){const e=document.querySelectorAll(t.itemSelector);e.length!==0&&e.forEach(i=>{const n=i.querySelector(t.triggerSelector),o=i.querySelector(t.contentSelector);!n||!o||(i.classList.contains("is-open")||Z.gsap.set(o,{display:"none",height:0}),n.addEventListener("click",a=>{a.preventDefault(),Xe(i,t)}))})}console.log("🚀 centre-card.js v4.1.0 chargé – Refactorisé avec Accordion et Events");const j={scaleDuration:.4,scaleAmount:1.05,scaleEase:"power2.out",shadow:"0px 10px 30px rgba(0, 0, 0, 0.1)"};function et(t,e){!e||e.classList.contains("is-open")||window.gsap.to(e,{scale:j.scaleAmount,duration:j.scaleDuration,ease:j.scaleEase})}function tt(t){t&&window.gsap.to(t,{scale:1,duration:j.scaleDuration,ease:j.scaleEase,onComplete:()=>{t.classList.contains("is-open")||(t.style.boxShadow="")}})}function it(){const t={itemSelector:".card-offre-h-s",triggerSelector:".accordion_head",contentSelector:".accordion_content",iconSelector:".accordion_icon",openClass:"is-open",animation:{onOpen:(i,n)=>{window.gsap.set(i,{height:"auto",opacity:1}),window.gsap.from(i,{height:0,opacity:0,duration:.5,ease:"power2.out"}),window.gsap.to(n,{rotation:"+=180",duration:.4,ease:"power2.out"})},onClose:(i,n)=>{window.gsap.to(i,{height:0,opacity:0,duration:.4,ease:"power2.in"}),window.gsap.to(n,{rotation:"+=180",duration:.4,ease:"power2.in"})}}};qe(t),document.querySelectorAll(t.itemSelector).forEach(i=>{i.addEventListener("mouseenter",o=>et(o,i)),i.addEventListener("mouseleave",()=>tt(i)),new MutationObserver(o=>{o.forEach(a=>{if(a.attributeName==="class"){const s=a.target;s.classList.contains("is-open")?s.style.boxShadow=j.shadow:s.style.boxShadow=""}})}).observe(i,{attributes:!0})})}const nt=()=>{const t=document.querySelector(".desktop_menu_content.right .w-dyn-items"),e=document.querySelectorAll(".desktop_menu_list.acitivt-s .default-container");if(!t||!e.length)return;const i=Array.from(t.children).find(s=>{const l=s.querySelector("img");return l&&l.id==="Bowling"});Array.from(t.children).forEach(s=>{s===i?(s.style.opacity="1",s.style.display="block"):(s.style.opacity="0",s.style.display="none")});const n=new Map,o=(s,l)=>{const r=Array.from(t.children).find(d=>{const h=d.querySelector("img");return h&&h.id===s});if(r)if(n.has(r)&&(n.get(r).kill(),n.delete(r)),l){if(i&&i!==r){n.has(i)&&n.get(i).kill();const h=gsap.to(i,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{i&&(i.style.display="none"),n.delete(i)}});n.set(i,h)}r.style.display="block";const d=gsap.to(r,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(r)});n.set(r,d)}else{const d=gsap.to(r,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{if(r.style.display="none",i){i.style.display="block",n.has(i)&&n.get(i).kill();const h=gsap.to(i,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(i)});n.set(i,h)}n.delete(r)}});n.set(r,d)}},a=(s,l)=>{n.has(s)&&(n.get(s).kill(),n.delete(s));const r={duration:l?.1:.05,ease:"power2.out",onComplete:()=>n.delete(s)},d=l?{scale:1.1,backgroundColor:"#FFFFFF"}:{scale:1,backgroundColor:""},h=gsap.to(s,{...d,...r});n.set(s,h)};e.forEach(s=>{const l=s.getAttribute("data-name");l&&(s.addEventListener("mouseenter",()=>{o(l,!0),a(s,!0)}),s.addEventListener("mouseleave",()=>{o(l,!1),a(s,!1)}))})};console.log("🚀 text-animation.js v2.1.0 chargé");function xe(){const t=document.querySelector(".span_mover");if(t)try{let n=function(){if(i)return;i=!0;const o=gsap.timeline({onComplete:()=>{i=!1,gsap.to(t,{y:e.positions.start,duration:e.duration,ease:e.ease,onComplete:()=>{setTimeout(n,e.cycleDelay*1e3)}})}}),a=[e.positions.start,e.positions.middle,e.positions.end];for(let s=0;s<a.length;s++)o.to(t,{y:a[s],duration:e.duration,ease:e.ease}),s<a.length-1&&o.to({},{duration:e.pauseDuration});o.play()};const e={duration:.6,ease:"back.out(1.7)",pauseDuration:1.5,cycleDelay:.5,positions:{start:"0%",middle:"-34%",end:"-68%"}};let i=!1;n(),window.addEventListener("beforeunload",()=>{gsap.killTweensOf(t)})}catch(e){console.error("Erreur dans l'animation de texte:",e)}}function Be(){setTimeout(typeof gsap<"u"?xe:Be,100)}Be(),console.log("🚀 faq-toggle.js v1.1.0 chargé");async function ot(){qe({itemSelector:".faq_item.effect-cartoon-shadow",triggerSelector:".faq_wrapper",contentSelector:".faq_respond",arrowSelector:".svg-holder.medium"})}console.log("🗺️ map-integration.js v2.0.0 chargé");const me={map:null,markers:[],infoWindow:null,initialCenter:{lat:48.82,lng:2.25},initialZoom:10,initMap:function(){const t=document.getElementById("map");if(!t){console.error("Erreur : L'élément #map est introuvable dans le DOM.");return}this.map=new google.maps.Map(t,{center:this.initialCenter,zoom:this.initialZoom,disableDefaultUI:!0,zoomControl:!0,styles:[]}),this.infoWindow=new google.maps.InfoWindow,this.createMarkers(),this.listenForFocusEvents()},createMarkers:function(){const t=document.querySelectorAll(".w-dyn-item[data-place-id]");console.log(`📍 ${t.length} cartes trouvées pour la création des marqueurs.`),t.forEach(e=>{var l;const i=parseFloat(e.dataset.lat),n=parseFloat(e.dataset.lng),o=e.dataset.placeId,a=e.getAttribute("id");if(!i||!n||!o){console.warn("⚠️ Carte ignorée car il manque data-lat, data-lng ou data-place-id",e);return}const s=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:i,lng:n},title:((l=e.querySelector("h3"))==null?void 0:l.textContent)||"Centre Smile World"});s.addListener("click",()=>{const r=e.querySelector('.clickable_wrap[data-attribute="data-card-toggle"]');r?r.click():console.warn("Impossible de trouver l'élément cliquable pour ouvrir la carte",e)}),this.markers.push({placeId:o,cardId:a,marker:s})})},focusOnCenter:function(t){if(!t||!this.map)return;console.log(`🔎 Zoom sur le centre avec Place ID : ${t}`),new google.maps.places.PlacesService(this.map).getDetails({placeId:t,fields:["name","formatted_address","geometry","rating","website","url"]},(i,n)=>{var o;if(n===google.maps.places.PlacesServiceStatus.OK&&i&&i.geometry&&i.geometry.location){this.map.panTo(i.geometry.location),this.map.setZoom(15);const a=`
                    <div class="map-infowindow-content">
                        <div class="map-infowindow-title">${i.name}</div>
                        <div class="map-infowindow-address">${i.formatted_address}</div>
                        ${i.rating?`<div class="map-infowindow-rating">Note : ${i.rating} ★</div>`:""}
                        <a href="${i.url}" target="_blank">Voir sur Google Maps</a>
                    </div>
                `;this.infoWindow.setContent(a);const s=(o=this.markers.find(l=>l.placeId===t))==null?void 0:o.marker;s&&this.infoWindow.open(this.map,s)}else console.error(`Erreur lors de la récupération des détails pour le Place ID ${t}: ${n}`)})},resetMapView:function(){this.map&&(console.log("🔄 Réinitialisation de la vue de la carte."),this.infoWindow.close(),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))},listenForFocusEvents:function(){document.addEventListener("map:focus",t=>{this.focusOnCenter(t.detail.placeId)})}};window.initGoogleMap=me.initMap.bind(me);function st(){const t=document.getElementById("map");if(!t){console.warn("⚠️ L'élément #map est introuvable, l'intégration de la carte est annulée.");return}const e=t.dataset.apiKey;if(!e){console.error(`❌ Clé API Google Maps manquante. Veuillez l'ajouter dans l'attribut "data-api-key" de la div #map.`);return}if(window.google&&window.google.maps){console.log("🗺️ Google Maps API déjà chargée."),me.initMap();return}console.log("🗺️ Chargement de l'API Google Maps...");const i=document.createElement("script");i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,marker&callback=initGoogleMap`,i.async=!0,document.head.appendChild(i)}console.log("🔍 main_gsap.js - Module chargé et exécution commencée"),console.log("📦 main_gsap.js - Début du chargement");function at(){document.querySelectorAll(".desktop_menu_wrapper, .parc_menu_desktop, .activites_menu_desktop, .offres_menu_desktop, .menu-mobile").forEach(t=>{t&&t.classList.add("is-hidden")})}function rt(){document.querySelector(".desktop_menu_wrapper")?(console.log("✅ Menu wrapper trouvé immédiatement. Initialisation..."),Te()):(console.log("⏳ Menu wrapper non trouvé. Mise en place d'un observateur..."),new MutationObserver((i,n)=>{document.querySelector(".desktop_menu_wrapper")&&(console.log("👀 L'observateur a détecté le menu wrapper. Initialisation..."),Te(),n.disconnect())}).observe(document.body,{childList:!0,subtree:!0}))}async function lt(){console.log("🎬 Début de l'initialisation des modules");try{at(),console.log("✅ États initiaux définis via classes CSS");const t=await $e();rt();const e=[Ke(),it(),nt(),xe(),ot(),st()];if(await Promise.all(e),console.log("✨ Tous les modules ont été initialisés"),document.getElementById("container-initial")){console.log("🏝️ Page de réservation détectée, chargement du module...");try{const{SmileWorldReservation:n}=await Promise.resolve().then(()=>dt);new n,console.log("✅ Module de réservation chargé et initialisé.")}catch(n){console.error("❌ Erreur lors du chargement du module de réservation:",n)}}t&&Re()}catch(t){console.error("❌ Erreur fatale lors de l'initialisation:",t),je()}}function Me(){window.gsap?(console.log("✅ GSAP a été trouvé sur window, initialisation de l'application..."),window.gsap.registerPlugin(ke),lt()):(console.log("⏳ GSAP non trouvé, nouvelle tentative dans 100ms..."),setTimeout(Me,100))}window.Webflow=window.Webflow||[],window.Webflow.push(Me);class ct{constructor(){this.config={defaultVideoUrl:"https://player.vimeo.com/progressive_redirect/playback/1088767237/rendition/1080p/file.mp4?loc=external&signature=1d46b415bde9b315b01d645374b5f7319940ecff5995ac8ac213f847577f6536",ids:{initialContainer:"container-initial",filteredContainer:"container-filtre",hiddenMap:"hidden-map",initialActivitiesPane:"tab-pane-initial-activites",initialParksPane:"tab-pane-initial-parcs",filteredActivitiesPane:"tab-pane-filtre-activites",filteredParksPane:"tab-pane-filtre-parcs",initialActivitiesTabLink:"tab-link-initial-activites",initialParksTabLink:"tab-link-initial-parcs",filteredActivitiesTabLink:"tab-link-filtre-activites",filteredParksTabLink:"tab-link-filtre-parcs",selectionWrapper:"selection-wrapper",label:"selection-label",reserveBtn:"reserve-btn",iframeWrap:"iframe-wrapper"}},this.state={primarySelectionType:null,selectedInitialSlugs:new Set,selectedInitialParkId:null,finalSelectedParkId:null,finalSelectedSlugs:new Set},this.dom={},this.mapItems=[],this.init()}init(){this._setupDomElements()&&(this._injectStyles(),this._injectVideoPlayer(),this._setupEventListeners(),this._applyUrlParameters(),this._setInitialUiState())}_setupDomElements(){for(const e in this.config.ids)if(this.dom[e]=document.getElementById(this.config.ids[e]),!this.dom[e])return console.error(`[SW-RSV] Essential element #${this.config.ids[e]} is missing.`),!1;return this.dom.videoBackgroundDiv=document.querySelector('[data-attribute="video_background"]'),this.dom.resetButton=document.querySelector('[data-attribute="reset_form"]'),this.mapItems=Array.from(this.dom.hiddenMap.querySelectorAll(".map-item")),!0}_setInitialUiState(){this.dom.filteredContainer.style.display="none",this.dom.reserveBtn.classList.add("disabled"),this.dom.iframeWrap.style.display="none",this.dom.selectionWrapper&&(window.gsap.set(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none"}),window.gsap.set(this.dom.label,{opacity:0}))}_setupEventListeners(){this.dom.initialActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"initialActivity")),this.dom.initialParksPane.addEventListener("click",this._handleSelection.bind(this,"initialPark")),this.dom.filteredActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"finalActivity")),this.dom.filteredParksPane.addEventListener("click",this._handleSelection.bind(this,"finalPark")),this.dom.reserveBtn.addEventListener("click",this._handleReserveClick.bind(this)),this.dom.resetButton&&this.dom.resetButton.addEventListener("click",this._fullReset.bind(this))}_handleSelection(e,i){const n=i.target.closest("[data-activity-slug], [data-centre-apex-id]");if(!n)return;const o=n.dataset.activitySlug,a=n.dataset.centreApexId;switch(e){case"initialActivity":this._handleInitialActivitySelection(o,n);break;case"initialPark":this._handleInitialParkSelection(a,n);break;case"finalActivity":this._handleFinalActivitySelection(o,n);break;case"finalPark":this._handleFinalParkSelection(a,n);break}}_handleInitialActivitySelection(e,i){if(this.state.primarySelectionType==="parks"&&(this._resetInitialSelections("parks"),this._resetInitialTabs()),this.state.primarySelectionType="activities",i.classList.toggle("isSelected"),i.classList.contains("isSelected")?this.state.selectedInitialSlugs.add(e):this.state.selectedInitialSlugs.delete(e),this._resetFinalSelections(),this.state.selectedInitialSlugs.size>0){this.dom.initialParksTabLink.style.display="none";const n=Array.from(this.state.selectedInitialSlugs).map(s=>new Set(this.mapItems.filter(l=>l.dataset.activitySlug===s).map(l=>l.dataset.centreApexId))),o=n.length>0?n[0]:new Set,a=n.reduce((s,l)=>new Set([...s].filter(r=>l.has(r))),o);this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(s=>{s.style.display=a.has(s.dataset.centreApexId)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("parks")}else this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this.state.primarySelectionType=null;this._updateStateAndButton()}_handleInitialParkSelection(e,i){this.state.primarySelectionType==="activities"&&(this._resetInitialSelections("activities"),this._resetInitialTabs()),this.state.primarySelectionType="parks";const n=this.state.selectedInitialParkId===e;if(this._resetFinalSelections(),n)this.state.selectedInitialParkId=null,i.classList.remove("isSelected"),this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this._updateVideoSource(null);else{this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(a=>a.classList.remove("isSelected")),this.state.selectedInitialParkId=e,i.classList.add("isSelected"),this._updateVideoSource(i),this.dom.initialActivitiesTabLink.style.display="none";const o=new Set(this.mapItems.filter(a=>a.dataset.centreApexId===e).map(a=>a.dataset.activitySlug));this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(a=>{a.style.display=o.has(a.dataset.activitySlug)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("activities")}this._updateStateAndButton()}_handleFinalParkSelection(e,i){this.state.primarySelectionType==="activities"&&(this.state.finalSelectedParkId===e?(this.state.finalSelectedParkId=null,i.classList.remove("isSelected"),this._updateVideoSource(null)):(this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(n=>n.classList.remove("isSelected")),this.state.finalSelectedParkId=e,i.classList.add("isSelected"),this._updateVideoSource(i)),this._updateStateAndButton())}_handleFinalActivitySelection(e,i){this.state.primarySelectionType==="parks"&&(i.classList.toggle("isSelected"),i.classList.contains("isSelected")?this.state.finalSelectedSlugs.add(e):this.state.finalSelectedSlugs.delete(e),this._updateStateAndButton())}_handleReserveClick(e){if(this.dom.reserveBtn.classList.contains("disabled")){e.preventDefault();return}e.preventDefault();const i=this.dom.reserveBtn.href;if(i&&i!=="#"){this.dom.iframeWrap.innerHTML=`<iframe src="${i}" style="width: 100%; height: 100vh; border: none;"></iframe>`,this.dom.iframeWrap.style.display="block";const n=this.dom.iframeWrap.getBoundingClientRect().top+window.scrollY,a=7*parseFloat(getComputedStyle(document.documentElement).fontSize);window.scrollTo({top:n-a,behavior:"smooth"})}}_updateStateAndButton(){let e=null,i=null;if(this.state.primarySelectionType==="activities"?(e=this.state.finalSelectedParkId,i=this.state.selectedInitialSlugs):this.state.primarySelectionType==="parks"&&(e=this.state.selectedInitialParkId,i=this.state.finalSelectedSlugs),e&&i&&i.size>0){const n=Array.from(i).map(o=>{const a=this.mapItems.find(s=>s.dataset.centreApexId===e&&s.dataset.activitySlug===o);return a?a.dataset.activityApexId:null}).filter(Boolean);if(n.length===i.size){const o=n.join(",");this.dom.reserveBtn.href=`https://www.apex-timing.com/gokarts/sessions_booking.php?center=${e}&categories=${o}&language=fr&iframe_id=axiframe_0`,this.dom.reserveBtn.classList.remove("disabled");const a=this.state.primarySelectionType==="activities"?this.dom.filteredParksPane.querySelector(`[data-centre-apex-id="${e}"]`):this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${e}"]`),s=a?a.dataset.parkLabel:"",l=Array.from(i).map(r=>{const d=this.state.primarySelectionType==="activities"?this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${r}"]`):this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${r}"]`);return d?d.dataset.activityLabel:r});this.dom.label.textContent=`C'est parti pour ${l.map(r=>`un ${r}`).join(" & ")} à ${s} !`,this._animateSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="La combinaison sélectionnée est invalide.",this._resetSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="Veuillez terminer votre sélection.",this._resetSelectionAppearance()}_switchFilteredTab(e){const i="w--current",n=e==="parks"?"Parks":"Activities",o=e==="parks"?"Activities":"Parks";this.dom[`filtered${n}TabLink`].classList.add(i),this.dom[`filtered${o}TabLink`].classList.remove(i),this.dom[`filtered${n}Pane`].classList.add(i),this.dom[`filtered${o}Pane`].classList.remove(i),this.dom[`filtered${n}TabLink`].style.display="inline-block",this.dom[`filtered${n}Pane`].style.display="block",this.dom[`filtered${o}TabLink`].style.display="none",this.dom[`filtered${o}Pane`].style.display="none"}_animateSelectionAppearance(){if(!this.dom.selectionWrapper)return;window.gsap.timeline().to(this.dom.selectionWrapper,{opacity:1,pointerEvents:"auto",duration:.4,ease:"power2.inOut"}).from(this.dom.selectionWrapper,{scale:.9,ease:"elastic.out(1, 0.6)",duration:1.2},"-=0.2").to(this.dom.label,{opacity:1,duration:.5},"-=1")}_resetSelectionAppearance(){this.dom.selectionWrapper&&(window.gsap.to(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none",duration:.3}),window.gsap.to(this.dom.label,{opacity:0,duration:.2}))}_updateVideoSource(e){if(!this.dom.videoBackgroundDiv)return;const i=this.dom.videoBackgroundDiv.querySelector("source"),n=this.dom.videoBackgroundDiv.querySelector("video");if(!i||!n)return;const o=e&&e.dataset.video?e.dataset.video:this.config.defaultVideoUrl;i.src!==o&&(i.src=o,n.load(),n.play().catch(()=>{}))}_fullReset(e){e&&e.preventDefault(),this.state.primarySelectionType=null,this._resetInitialSelections("activities"),this._resetInitialSelections("parks"),this._resetFinalSelections(),this._resetInitialTabs(),this._resetFilteredTabs(),this.dom.filteredContainer.style.display="none",this.dom.iframeWrap.style.display="none",this._updateStateAndButton()}_resetInitialTabs(){this.dom.initialActivitiesTabLink&&(this.dom.initialActivitiesTabLink.style.display="flex"),this.dom.initialParksTabLink&&(this.dom.initialParksTabLink.style.display="flex")}_resetInitialSelections(e){e==="activities"?(this.dom.initialActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(i=>i.classList.remove("isSelected")),this.state.selectedInitialSlugs.clear()):e==="parks"&&(this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(i=>i.classList.remove("isSelected")),this.state.selectedInitialParkId=null,this._updateVideoSource(null))}_resetFinalSelections(){this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedSlugs.clear(),this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedParkId=null}_resetFilteredTabs(){this.dom.filteredActivitiesTabLink.style.display="inline-block",this.dom.filteredParksTabLink.style.display="inline-block"}_injectStyles(){const e=document.createElement("style");e.id="sw-rsv-styles",e.textContent=`
        .isSelected .tags_content { background-color: black !important; color: white !important; }
        .isSelected .tags_content * { color: white !important; }`,document.head.appendChild(e)}_injectVideoPlayer(){this.dom.videoBackgroundDiv&&(this.dom.videoBackgroundDiv.innerHTML=`
        <div style="width: 100%; height: 100%;" class="w-background-video w-background-video-atom">
          <video playsinline loop muted autoplay data-wf-ignore="true" data-object-fit="cover">
            <source src="${this.config.defaultVideoUrl}" data-wf-ignore="true"/>
          </video>
        </div>`)}_applyUrlParameters(){const e=new URLSearchParams(window.location.search),i=e.get("activite"),n=e.get("parc");!i&&!n||setTimeout(()=>{if(n&&i){const o=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${n}"]`);if(o){this._handleInitialParkSelection(n,o);const a=this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${i}"]`);a&&this._handleFinalActivitySelection(i,a)}}else if(n){const o=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${n}"]`);o&&o.click()}else if(i){const o=this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${i}"]`);o&&o.click()}},100)}}const dt=Object.freeze(Object.defineProperty({__proto__:null,SmileWorldReservation:ct},Symbol.toStringTag,{value:"Module"}))})(gsap);
