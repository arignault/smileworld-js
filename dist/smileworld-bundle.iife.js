(function(){"use strict";console.log("üöÄ loading-screen.js v1.2.0 charg√©");const S={fadeOutDuration:.4,ease:"power2.out"};let f=!1,h=!1;function D(){if(console.log("üé¨ initLoadingScreen - D√©but de l'initialisation"),f)return console.log("‚ÑπÔ∏è √âcran de chargement d√©j√† initialis√©"),Promise.resolve();const t=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");return console.log("üîç √âl√©ments trouv√©s:",{loadingScreen:!!t,logoWrap:!!e}),!t||!e?(console.warn("‚ö†Ô∏è √âl√©ments manquants:",{loadingScreen:t?"OK":"Non trouv√©",logoWrap:e?"OK":"Non trouv√©"}),f=!1,Promise.resolve(null)):(console.log("üé® Configuration des styles initiaux"),window.gsap.set(t,{opacity:1,display:"flex",backgroundColor:"white"}),window.gsap.set(e,{opacity:0,scale:.9}),window.gsap.to(e,{opacity:1,scale:1,duration:.5,delay:.1,ease:S.ease}),f=!0,console.log("‚úÖ √âcran de chargement initialis√© avec succ√®s"),Promise.resolve(t))}function w(){if(console.log("üé¨ hideLoadingScreen - D√©but du masquage"),!f){console.warn("‚ö†Ô∏è √âcran de chargement non initialis√©");return}if(h){console.log("‚ÑπÔ∏è Masquage d√©j√† en cours");return}h=!0;const t=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");if(console.log("üîç √âl√©ments trouv√©s pour le masquage:",{loadingScreen:!!t,logoWrap:!!e}),!t||!e){console.warn("‚ö†Ô∏è √âl√©ments manquants pour le masquage"),h=!1;return}console.log("üé¨ D√©marrage de l'animation de masquage"),window.gsap.timeline({onComplete:()=>{console.log("‚úÖ Animation de masquage termin√©e"),window.gsap.set(t,{display:"none"}),h=!1}}).to(t,{opacity:0,duration:S.fadeOutDuration,ease:S.ease})}console.log("üöÄ text-animation.js v2.1.0 charg√©");function W(){const t=document.querySelector(".span_mover");if(t)try{let a=function(){if(i)return;i=!0;const n=gsap.timeline({onComplete:()=>{i=!1,gsap.to(t,{y:e.positions.start,duration:e.duration,ease:e.ease,onComplete:()=>{setTimeout(a,e.cycleDelay*1e3)}})}}),s=[e.positions.start,e.positions.middle,e.positions.end];for(let o=0;o<s.length;o++)n.to(t,{y:s[o],duration:e.duration,ease:e.ease}),o<s.length-1&&n.to({},{duration:e.pauseDuration});n.play()};const e={duration:.6,ease:"back.out(1.7)",pauseDuration:1.5,cycleDelay:.5,positions:{start:"0%",middle:"-34%",end:"-68%"}};let i=!1;a(),window.addEventListener("beforeunload",()=>{gsap.killTweensOf(t)})}catch(e){console.error("Erreur dans l'animation de texte:",e)}}console.log("üöÄ faq-toggle.js v2.0.0 charg√©");let m=!1;async function I(t){if(!t||!t.classList.contains("is-open"))return;m=!0;const e=t.querySelector(".faq_respond"),i=t.querySelector(".svg-holder.medium");t.classList.remove("is-open"),await window.gsap.to(e,{height:0,opacity:0,duration:.3,ease:"power1.in"}),i&&window.gsap.to(i,{rotation:0,duration:.2,ease:"power1.inOut"}),e.style.display="none",m=!1}async function O(t){if(!t||t.classList.contains("is-open"))return;m=!0;const e=t.querySelector(".faq_respond"),i=t.querySelector(".svg-holder.medium");t.classList.add("is-open"),window.gsap.set(e,{display:"block",height:"auto",opacity:0});const a=e.scrollHeight;i&&window.gsap.to(i,{rotation:90,duration:.3,ease:"back.out(1.7)"}),await window.gsap.fromTo(e,{height:0,opacity:0},{height:a,opacity:1,duration:.5,ease:"elastic.out(1.2, 0.5)"}),m=!1}async function R(t){if(m)return;if(t.classList.contains("is-open"))await I(t);else{const i=document.querySelectorAll(".faq_item.is-open");await Promise.all(Array.from(i).map(a=>I(a))),await O(t)}}function F(){document.querySelectorAll(".faq_item.effect-cartoon-shadow").forEach(e=>{const i=e.querySelector(".faq_wrapper");if(i){if(i.dataset.faqInitialized)return;i.dataset.faqInitialized="true",i.addEventListener("click",a=>{a.target.closest(".faq_respond a, .faq_respond button")||(a.preventDefault(),R(e))})}})}function z(){const t=document.querySelector("#hamburger-menu"),e=document.querySelector("#main-menu-mobile"),i=document.body,a=document.querySelector("#parcs-nav_button_mobile"),n=document.querySelector("#activites-nav_button_mobile"),s=document.querySelector("#formules-nav_button_mobile"),o=document.querySelector("#parc-menu-mobile"),r=document.querySelector("#activite-menu-mobile"),c=document.querySelector("#offres-menu-mobile"),y=document.querySelectorAll(".button-close"),X=document.querySelectorAll(".button-back-menu");let u=!1,A=0,g=window.gsap.timeline({paused:!0});const L=window.gsap.timeline({paused:!0});L.to(t,{rotation:90,duration:.4,ease:"elastic.out(1, 0.5)",transformOrigin:"center center"}),[e,o,r,c].forEach(l=>{l.style.display="none"});function C(){A=window.pageYOffset||document.documentElement.scrollTop,i.style.overflow="hidden",i.style.position="fixed",i.style.width="100%",i.style.top=`-${A}px`}function M(){i.style.overflow="",i.style.position="",i.style.width="",i.style.top="",window.scrollTo(0,A)}function $(){return window.gsap.timeline({paused:!0}).add(()=>{e.style.display="flex",[o,r,c].forEach(l=>{l.style.display="none"})},"openMainMenu").add(()=>{e.style.display="none",o.style.display="flex"},"openParcMenu").add(()=>{e.style.display="none",r.style.display="flex"},"openActiviteMenu").add(()=>{e.style.display="none",c.style.display="flex"},"openOffresMenu")}g=$();function P(l=null){[a,n,s,document.querySelector("#parcs-nav_button"),document.querySelector("#activites-nav_button"),document.querySelector("#formules-nav_button")].forEach(p=>{p&&(l&&p.id===l?p.classList.add("active"):p.classList.remove("active"))})}function v(l){l?L.play():L.reverse()}function ee(l){const p={"parcs-nav_button":o,"activites-nav_button":r,"formules-nav_button":c,"parcs-nav_button_mobile":o,"activites-nav_button_mobile":r,"formules-nav_button_mobile":c}[l];if(p){if(e.style.display="none",o.style.display="none",r.style.display="none",c.style.display="none",u&&p.style.display==="flex"){u=!1,M(),P(),v(!1);return}requestAnimationFrame(()=>{p.style.display="flex",u=!0,C(),P(l),v(!0)})}}function B(){g&&g.kill(),u=!1,[e,o,r,c].forEach(l=>{l.style.display="none"}),M(),P(),v(!1),g=$()}function te(){[o,r,c].forEach(l=>{l.style.display="none"}),e.style.display="flex",u=!0}function x(l){e.style.display="none",u=!0,l.style.display="flex"}t.addEventListener("click",()=>{u?B():([o,r,c].forEach(l=>{l.style.display="none"}),e.style.display="flex",u=!0,C(),v(!0))}),a.addEventListener("click",()=>x(o)),n.addEventListener("click",()=>x(r)),s.addEventListener("click",()=>x(c)),y.forEach(l=>{l.addEventListener("click",B)}),X.forEach(l=>{l.addEventListener("click",te)}),document.querySelectorAll("#parcs-nav_button, #activites-nav_button, #formules-nav_button, #parcs-nav_button_mobile, #activites-nav_button_mobile, #formules-nav_button_mobile").forEach(l=>{l.addEventListener("click",q=>{q.preventDefault(),ee(l.id)})})}console.log("üöÄ centre-card.js v6.0.0 charg√© ‚Äì Logique old.js r√©int√©gr√©e");const d={CARD:".centre-card_wrapper.effect-cartoon-shadow",CLICKABLE_WRAP:'.clickable_wrap[data-attribute="data-card-toggle"]',TOGGLE_ELEMENTS:[".centre-card_scroll_wrapper",".centre-card_list",".centre-card_button-holder",".tag_holder_wrapper"],ARROW:".svg-holder.arrow",INTERNAL_LINKS:".centre-card_button-holder a, .centre-card_button-holder button"},E=new WeakSet;let b=!1;async function T(t){if(!t||!t.classList.contains("is-open"))return;const e=t.querySelectorAll(d.TOGGLE_ELEMENTS.join(",")),i=t.querySelector(d.ARROW);t.classList.remove("is-open");const a=window.gsap.timeline({onComplete:()=>{window.gsap.set(e,{display:"none"})}});a.to(e,{opacity:0,y:-10,duration:.2,ease:"power1.in",stagger:.02},0),i&&a.to(i,{rotation:0,duration:.25,ease:"power2.inOut"},0),await a}async function N(t){if(!t||t.classList.contains("is-open"))return;t.classList.add("is-open");const e=t.querySelectorAll(d.TOGGLE_ELEMENTS.join(",")),i=t.querySelector(d.ARROW);e.forEach(n=>{window.gsap.set(n,{display:n.dataset.originalDisplay||"block",opacity:0,y:-20})});const a=window.gsap.timeline();i&&a.to(i,{rotation:90,duration:.25,ease:"back.out(1.7)"},"<"),a.to(e,{opacity:1,y:0,duration:.3,ease:"power2.out",stagger:.035},"<0.05"),await a}async function j(t){if(!b){b=!0;try{if(t.classList.contains("is-open"))await T(t);else{const i=document.querySelectorAll(`${d.CARD}.is-open`);await Promise.all(Array.from(i).map(a=>T(a))),await N(t)}}finally{b=!1}}}function k(t){if(!t||E.has(t))return;const e=t.parentElement.querySelector(d.CLICKABLE_WRAP);if(!e)return;const i=t.querySelectorAll(d.TOGGLE_ELEMENTS.join(","));i.forEach(n=>{n.dataset.originalDisplay=window.getComputedStyle(n).display}),window.gsap.set(i,{display:"none",opacity:0,y:-20});const a=n=>{n.target.closest(d.INTERNAL_LINKS)||(n.preventDefault(),n.stopPropagation(),j(t))};e.addEventListener("click",a),E.add(t)}function H(){const t=document.querySelector(".collection-list-centre-wrapper");if(!t)return;new MutationObserver(i=>{for(const a of i)a.type==="childList"&&a.addedNodes.forEach(n=>{n.nodeType===1&&(n.matches(d.CARD)&&k(n),n.querySelectorAll(d.CARD).forEach(k))})}).observe(t,{childList:!0,subtree:!0})}function G(){document.querySelectorAll(d.CARD).forEach(k),H()}function V(){console.group("--- Informations de D√©bogage ---"),console.log("Wrapper Menu Desktop:",document.querySelector(".desktop_menu_wrapper")),console.log("Boutons de menu:",{parcs:document.querySelector('[data-attribute="nav-link-desktop-parcs"]'),activites:document.querySelector('[data-attribute="nav-link-desktop-activites"]'),offres:document.querySelector('[data-attribute="nav-link-desktop-offres"]')}),console.log("Conteneurs de menu:",{parcs:document.querySelector(".parc_menu_desktop"),activites:document.querySelector(".activites_menu_desktop"),offres:document.querySelector(".offres_menu_desktop")}),console.groupEnd()}function U(){window.location.hash==="#debug"&&(console.log("üêõ Mode de d√©bogage activ√©."),V())}class K{constructor(){this.config={defaultVideoUrl:"https://player.vimeo.com/progressive_redirect/playback/1088767237/rendition/1080p/file.mp4?loc=external&signature=1d46b415bde9b315b01d645374b5f7319940ecff5995ac8ac213f847577f6536",ids:{initialContainer:"container-initial",filteredContainer:"container-filtre",hiddenMap:"hidden-map",initialActivitiesPane:"tab-pane-initial-activites",initialParksPane:"tab-pane-initial-parcs",filteredActivitiesPane:"tab-pane-filtre-activites",filteredParksPane:"tab-pane-filtre-parcs",initialActivitiesTabLink:"tab-link-initial-activites",initialParksTabLink:"tab-link-initial-parcs",filteredActivitiesTabLink:"tab-link-filtre-activites",filteredParksTabLink:"tab-link-filtre-parcs",selectionWrapper:"selection-wrapper",label:"selection-label",reserveBtn:"reserve-btn",iframeWrap:"iframe-wrapper"}},this.state={primarySelectionType:null,selectedInitialSlugs:new Set,selectedInitialParkId:null,finalSelectedParkId:null,finalSelectedSlugs:new Set},this.dom={},this.mapItems=[],this.init()}init(){this._setupDomElements()&&(this._injectStyles(),this._injectVideoPlayer(),this._setupEventListeners(),this._applyUrlParameters(),this._setInitialUiState())}_setupDomElements(){for(const e in this.config.ids)if(this.dom[e]=document.getElementById(this.config.ids[e]),!this.dom[e])return console.error(`[SW-RSV] Essential element #${this.config.ids[e]} is missing.`),!1;return this.dom.videoBackgroundDiv=document.querySelector('[data-attribute="video_background"]'),this.dom.resetButton=document.querySelector('[data-attribute="reset_form"]'),this.mapItems=Array.from(this.dom.hiddenMap.querySelectorAll(".map-item")),!0}_setInitialUiState(){this.dom.filteredContainer.style.display="none",this.dom.reserveBtn.classList.add("disabled"),this.dom.iframeWrap.style.display="none",this.dom.selectionWrapper&&(window.gsap.set(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none"}),window.gsap.set(this.dom.label,{opacity:0}))}_setupEventListeners(){this.dom.initialActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"initialActivity")),this.dom.initialParksPane.addEventListener("click",this._handleSelection.bind(this,"initialPark")),this.dom.filteredActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"finalActivity")),this.dom.filteredParksPane.addEventListener("click",this._handleSelection.bind(this,"finalPark")),this.dom.reserveBtn.addEventListener("click",this._handleReserveClick.bind(this)),this.dom.resetButton&&this.dom.resetButton.addEventListener("click",this._fullReset.bind(this))}_handleSelection(e,i){const a=i.target.closest("[data-activity-slug], [data-centre-apex-id]");if(!a)return;const n=a.dataset.activitySlug,s=a.dataset.centreApexId;switch(e){case"initialActivity":this._handleInitialActivitySelection(n,a);break;case"initialPark":this._handleInitialParkSelection(s,a);break;case"finalActivity":this._handleFinalActivitySelection(n,a);break;case"finalPark":this._handleFinalParkSelection(s,a);break}}_handleInitialActivitySelection(e,i){if(this.state.primarySelectionType==="parks"&&(this._resetInitialSelections("parks"),this._resetInitialTabs()),this.state.primarySelectionType="activities",i.classList.toggle("isSelected"),i.classList.contains("isSelected")?this.state.selectedInitialSlugs.add(e):this.state.selectedInitialSlugs.delete(e),this._resetFinalSelections(),this.state.selectedInitialSlugs.size>0){this.dom.initialParksTabLink.style.display="none";const a=Array.from(this.state.selectedInitialSlugs).map(o=>new Set(this.mapItems.filter(r=>r.dataset.activitySlug===o).map(r=>r.dataset.centreApexId))),n=a.length>0?a[0]:new Set,s=a.reduce((o,r)=>new Set([...o].filter(c=>r.has(c))),n);this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(o=>{o.style.display=s.has(o.dataset.centreApexId)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("parks")}else this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this.state.primarySelectionType=null;this._updateStateAndButton()}_handleInitialParkSelection(e,i){this.state.primarySelectionType==="activities"&&(this._resetInitialSelections("activities"),this._resetInitialTabs()),this.state.primarySelectionType="parks";const a=this.state.selectedInitialParkId===e;if(this._resetFinalSelections(),a)this.state.selectedInitialParkId=null,i.classList.remove("isSelected"),this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this._updateVideoSource(null);else{this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(s=>s.classList.remove("isSelected")),this.state.selectedInitialParkId=e,i.classList.add("isSelected"),this._updateVideoSource(i),this.dom.initialActivitiesTabLink.style.display="none";const n=new Set(this.mapItems.filter(s=>s.dataset.centreApexId===e).map(s=>s.dataset.activitySlug));this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(s=>{s.style.display=n.has(s.dataset.activitySlug)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("activities")}this._updateStateAndButton()}_handleFinalParkSelection(e,i){this.state.primarySelectionType==="activities"&&(this.state.finalSelectedParkId===e?(this.state.finalSelectedParkId=null,i.classList.remove("isSelected"),this._updateVideoSource(null)):(this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(a=>a.classList.remove("isSelected")),this.state.finalSelectedParkId=e,i.classList.add("isSelected"),this._updateVideoSource(i)),this._updateStateAndButton())}_handleFinalActivitySelection(e,i){this.state.primarySelectionType==="parks"&&(i.classList.toggle("isSelected"),i.classList.contains("isSelected")?this.state.finalSelectedSlugs.add(e):this.state.finalSelectedSlugs.delete(e),this._updateStateAndButton())}_handleReserveClick(e){if(this.dom.reserveBtn.classList.contains("disabled")){e.preventDefault();return}e.preventDefault();const i=this.dom.reserveBtn.href;if(i&&i!=="#"){this.dom.iframeWrap.innerHTML=`<iframe src="${i}" style="width: 100%; height: 100vh; border: none;"></iframe>`,this.dom.iframeWrap.style.display="block";const a=this.dom.iframeWrap.getBoundingClientRect().top+window.scrollY,s=7*parseFloat(getComputedStyle(document.documentElement).fontSize);window.scrollTo({top:a-s,behavior:"smooth"})}}_updateStateAndButton(){let e=null,i=null;if(this.state.primarySelectionType==="activities"?(e=this.state.finalSelectedParkId,i=this.state.selectedInitialSlugs):this.state.primarySelectionType==="parks"&&(e=this.state.selectedInitialParkId,i=this.state.finalSelectedSlugs),e&&i&&i.size>0){const a=Array.from(i).map(n=>{const s=this.mapItems.find(o=>o.dataset.centreApexId===e&&o.dataset.activitySlug===n);return s?s.dataset.activityApexId:null}).filter(Boolean);if(a.length===i.size){const n=a.join(",");this.dom.reserveBtn.href=`https://www.apex-timing.com/gokarts/sessions_booking.php?center=${e}&categories=${n}&language=fr&iframe_id=axiframe_0`,this.dom.reserveBtn.classList.remove("disabled");const s=this.state.primarySelectionType==="activities"?this.dom.filteredParksPane.querySelector(`[data-centre-apex-id="${e}"]`):this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${e}"]`),o=s?s.dataset.parkLabel:"",r=Array.from(i).map(c=>{const y=this.state.primarySelectionType==="activities"?this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${c}"]`):this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${c}"]`);return y?y.dataset.activityLabel:c});this.dom.label.textContent=`C'est parti pour ${r.map(c=>`un ${c}`).join(" & ")} √† ${o} !`,this._animateSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="La combinaison s√©lectionn√©e est invalide.",this._resetSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="Veuillez terminer votre s√©lection.",this._resetSelectionAppearance()}_switchFilteredTab(e){const i="w--current",a=e==="parks"?"Parks":"Activities",n=e==="parks"?"Activities":"Parks";this.dom[`filtered${a}TabLink`].classList.add(i),this.dom[`filtered${n}TabLink`].classList.remove(i),this.dom[`filtered${a}Pane`].classList.add(i),this.dom[`filtered${n}Pane`].classList.remove(i),this.dom[`filtered${a}TabLink`].style.display="inline-block",this.dom[`filtered${a}Pane`].style.display="block",this.dom[`filtered${n}TabLink`].style.display="none",this.dom[`filtered${n}Pane`].style.display="none"}_animateSelectionAppearance(){if(!this.dom.selectionWrapper)return;window.gsap.timeline().to(this.dom.selectionWrapper,{opacity:1,pointerEvents:"auto",duration:.4,ease:"power2.inOut"}).from(this.dom.selectionWrapper,{scale:.9,ease:"elastic.out(1, 0.6)",duration:1.2},"-=0.2").to(this.dom.label,{opacity:1,duration:.5},"-=1")}_resetSelectionAppearance(){this.dom.selectionWrapper&&(window.gsap.to(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none",duration:.3}),window.gsap.to(this.dom.label,{opacity:0,duration:.2}))}_updateVideoSource(e){if(!this.dom.videoBackgroundDiv)return;const i=this.dom.videoBackgroundDiv.querySelector("source"),a=this.dom.videoBackgroundDiv.querySelector("video");if(!i||!a)return;const n=e&&e.dataset.video?e.dataset.video:this.config.defaultVideoUrl;i.src!==n&&(i.src=n,a.load(),a.play().catch(()=>{}))}_fullReset(e){e&&e.preventDefault(),this.state.primarySelectionType=null,this._resetInitialSelections("activities"),this._resetInitialSelections("parks"),this._resetFinalSelections(),this._resetInitialTabs(),this._resetFilteredTabs(),this.dom.filteredContainer.style.display="none",this.dom.iframeWrap.style.display="none",this._updateStateAndButton()}_resetInitialTabs(){this.dom.initialActivitiesTabLink&&(this.dom.initialActivitiesTabLink.style.display="flex"),this.dom.initialParksTabLink&&(this.dom.initialParksTabLink.style.display="flex")}_resetInitialSelections(e){e==="activities"?(this.dom.initialActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(i=>i.classList.remove("isSelected")),this.state.selectedInitialSlugs.clear()):e==="parks"&&(this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(i=>i.classList.remove("isSelected")),this.state.selectedInitialParkId=null,this._updateVideoSource(null))}_resetFinalSelections(){this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedSlugs.clear(),this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedParkId=null}_resetFilteredTabs(){this.dom.filteredActivitiesTabLink.style.display="inline-block",this.dom.filteredParksTabLink.style.display="inline-block"}_injectStyles(){const e=document.createElement("style");e.id="sw-rsv-styles",e.textContent=`
        .isSelected .tags_content { background-color: black !important; color: white !important; }
        .isSelected .tags_content * { color: white !important; }`,document.head.appendChild(e)}_injectVideoPlayer(){this.dom.videoBackgroundDiv&&(this.dom.videoBackgroundDiv.innerHTML=`
        <div style="width: 100%; height: 100%;" class="w-background-video w-background-video-atom">
          <video playsinline loop muted autoplay data-wf-ignore="true" data-object-fit="cover">
            <source src="${this.config.defaultVideoUrl}" data-wf-ignore="true"/>
          </video>
        </div>`)}_applyUrlParameters(){const e=new URLSearchParams(window.location.search),i=e.get("activite"),a=e.get("parc");!i&&!a||setTimeout(()=>{if(a&&i){const n=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${a}"]`);if(n){this._handleInitialParkSelection(a,n);const s=this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${i}"]`);s&&this._handleFinalActivitySelection(i,s)}}else if(a){const n=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${a}"]`);n&&n.click()}else if(i){const n=this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${i}"]`);n&&n.click()}},100)}}function Z(){new K}console.log("üó∫Ô∏è map-integration.js v2.0.1 charg√©");const _={map:null,markers:[],infoWindow:null,initialCenter:{lat:48.82,lng:2.25},initialZoom:10,initMap:function(){const t=document.getElementById("map");if(!t){console.error("Erreur : L'√©l√©ment #map est introuvable dans le DOM.");return}const e=t.dataset.mapId;e||console.warn("‚ö†Ô∏è data-map-id n'est pas d√©fini sur l'√©l√©ment #map. Les marqueurs avanc√©s pourraient ne pas fonctionner."),this.map=new google.maps.Map(t,{center:this.initialCenter,zoom:this.initialZoom,disableDefaultUI:!0,zoomControl:!0,mapId:e}),this.infoWindow=new google.maps.InfoWindow,google.maps.event.addListener(this.infoWindow,"closeclick",()=>{this.resetMapView()}),this.createMarkers()},createMarkers:function(){const t=document.querySelectorAll(".w-dyn-item[data-place-id]");console.log(`üìç ${t.length} cartes trouv√©es pour la cr√©ation des marqueurs.`),t.forEach(e=>{var o,r;const i=parseFloat(e.dataset.lat),a=parseFloat(e.dataset.lng),n=e.dataset.placeId;if(isNaN(i)||isNaN(a)||!n){const c=((o=e.querySelector("h3"))==null?void 0:o.textContent)||"Nom non trouv√©";console.warn(`‚ö†Ô∏è Carte ignor√©e (nom: "${c}") car ses donn√©es de latitude/longitude sont manquantes ou invalides.`,e);return}const s=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:i,lng:a},title:((r=e.querySelector("h3"))==null?void 0:r.textContent)||"Centre Smile World"});s.addListener("click",()=>{this.focusOnCenter(n)}),this.markers.push({placeId:n,marker:s})})},focusOnCenter:async function(t){var e;if(!(!t||!this.map)){console.log(`üîé Zoom sur le centre avec Place ID : ${t}`);try{const{Place:i}=await google.maps.importLibrary("places"),a=new i({id:t}),n=["displayName","formattedAddress","location","rating","googleMapsURI","photos","reviews","userRatingCount","regularOpeningHours"];if(await a.fetchFields({fields:n,language:"fr"}),a.location){this.map.panTo(a.location),this.map.setZoom(15);const s=this.buildInfoWindowContent(a);this.infoWindow.setContent(s);const o=(e=this.markers.find(r=>r.placeId===t))==null?void 0:e.marker;o&&this.infoWindow.open(this.map,o)}else console.error(`Aucune donn√©e de localisation trouv√©e pour le Place ID ${t}`)}catch(i){console.error(`Erreur lors de la r√©cup√©ration des d√©tails pour le Place ID ${t}:`,i)}}},buildInfoWindowContent:function(t){let e="";t.photos&&t.photos.length>0&&(e=`<img src="${t.photos[0].getURI({maxWidth:400,maxHeight:200})}" alt="Photo de ${t.displayName}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;">`);let i="";t.rating&&(i=`
                <div style="display: flex; align-items: center; color: #555; margin-bottom: 8px; font-size: 14px;">
                    <span style="color: #f8b400; font-size: 18px; margin-right: 8px;">${"‚òÖ".repeat(Math.round(t.rating))+"‚òÜ".repeat(5-Math.round(t.rating))}</span>
                    <span style="font-weight: bold; color: #111; margin-right: 5px;">${t.rating.toFixed(1)}</span>
                    <span>(${t.userRatingCount||0} avis)</span>
                </div>`);let a="";if(t.reviews&&t.reviews.length>0){const s=t.reviews[0];s.text&&(a=`
                    <div style="margin-top: 16px;">
                        <strong style="display: block; font-size: 14px; color: #111; margin-bottom: 8px; font-weight: 600;">Dernier avis</strong>
                        <div style="border-left: 3px solid #f0f0f0; padding-left: 12px; font-style: italic;">
                            <p style="margin: 0 0 5px 0; font-size: 13px; color: #555;">"${s.text.substring(0,100)}..."</p>
                            <span style="font-weight: 500; font-size: 12px; color: #333;">- ${s.authorAttribution.displayName}</span>
                        </div>
                    </div>
                `)}let n="";if(t.regularOpeningHours&&t.regularOpeningHours.weekdayDescriptions){const s=new Date().getDay(),o=s===0?6:s-1;n=`<div style="font-size: 13px; color: #333; margin-bottom: 12px; display: flex; align-items: center;"><svg viewBox="0 0 24 24" style="width:16px; height:16px; margin-right: 8px; fill: #555;"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M13 7h-2v6h6v-2h-4V7z"></path></svg><span>${t.regularOpeningHours.weekdayDescriptions[o]}</span></div>`}return`
            <div style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; max-width: 290px; padding: 5px;">
                ${e}
                <div style="font-size: 18px; font-weight: 700; color: #1a1a1a; margin-bottom: 4px;">${t.displayName}</div>
                <div style="font-size: 13px; color: #555; margin-bottom: 8px;">${t.formattedAddress}</div>
                ${i}
                ${n}
                <a href="${t.googleMapsURI}" target="_blank" style="display: inline-block; margin-top: 8px; font-size: 13px; color: #1a73e8; text-decoration: none; font-weight: 500;">Voir sur Google Maps</a>
                ${a}
            </div>
        `},resetMapView:function(){this.map&&(console.log("üîÑ R√©initialisation de la vue de la carte."),this.infoWindow.close(),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))}};window.initGoogleMap=_.initMap.bind(_);function Y(){const t=document.getElementById("map");if(!t)return;const e=t.dataset.apiKey;if(!e){console.error(`‚ùå Cl√© API Google Maps manquante. Veuillez l'ajouter dans l'attribut "data-api-key" de la div #map.`);return}if(window.google&&window.google.maps){console.log("üó∫Ô∏è Google Maps API d√©j√† charg√©e."),_.initMap();return}console.log("üó∫Ô∏è Chargement de l'API Google Maps...");const i=document.createElement("script");i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,marker&callback=initGoogleMap`,i.async=!0,i.setAttribute("loading","async"),document.head.appendChild(i)}console.log("üöÄ main_gsap.js v3.0.1 charg√©");function J(){console.log("‚úÖ GSAP est pr√™t. Initialisation des modules...");try{W(),F(),z(),U(),window.location.pathname.includes("/reservation")&&(console.log("-> Page R√©servation d√©tect√©e via l'URL. Chargement du module..."),Z(),console.log("‚úÖ Module R√©servation charg√© et initialis√©.")),Y(),console.log("‚ú® Tous les modules principaux ont √©t√© initialis√©s."),w()}catch(t){console.error("‚ùå Erreur lors de l'initialisation des modules. For√ßage du masquage du loader.",t),w()}}function Q(){D();let t=0;const e=100,a=setInterval(()=>{window.gsap?(clearInterval(a),J()):(t++,t>e&&(clearInterval(a),console.error("GSAP n'a pas pu √™tre charg√© apr√®s 10 secondes. Annulation de l'initialisation des modules."),w()))},100)}window.Webflow=window.Webflow||[],window.Webflow.push(function(){console.log("üöÄ Webflow est pr√™t, lancement de l'attente de GSAP."),Q()}),window.addEventListener("load",()=>{console.log("üé¨ La page est enti√®rement charg√©e. For√ßage de l'√©tat des cartes de centre."),G()})})();
