(function(){"use strict";console.log("üöÄ loading-screen.js v1.4.0 charg√©");const h={logoPopDuration:.3,fadeOutDuration:.4,ease:"power2.out",logoShrinkScale:.8};let v=!1,y=!1,P=!1,T=!1;function D(){P&&T&&Z()}function V(){try{if(sessionStorage.getItem("preloaderShown")){console.log("‚úÖ Preloader d√©j√† affich√© dans cette session, on le cache imm√©diatement.");const o=document.querySelector(".loadingscreen");return o&&(o.style.display="none"),v=!0,y=!0,Promise.resolve()}}catch(o){console.warn("Impossible d'acc√©der √† sessionStorage, le preloader s'affichera √† chaque fois.",o)}if(console.log("üé¨ initLoadingScreen - D√©but de l'initialisation (0.9s)"),v)return console.log("‚ÑπÔ∏è √âcran de chargement d√©j√† initialis√©"),Promise.resolve();const e=document.querySelector(".loadingscreen"),t=document.querySelector(".loading_logo_wrap");return console.log("üîç √âl√©ments trouv√©s:",{loadingScreen:!!e,logoWrap:!!t}),!e||!t?(console.warn("‚ö†Ô∏è √âl√©ments manquants:",{loadingScreen:e?"OK":"Non trouv√©",logoWrap:t?"OK":"Non trouv√©"}),v=!1,Promise.resolve(null)):(console.log("üé® Configuration des styles initiaux"),window.gsap.set(e,{opacity:1,display:"flex",backgroundColor:"white"}),window.gsap.set(t,{opacity:0,scale:.9}),window.gsap.to(t,{opacity:1,scale:1,duration:.5,delay:.1,ease:h.ease}),setTimeout(()=>{console.log("‚è±Ô∏è 0.9 secondes √©coul√©es."),T=!0,D()},900),v=!0,console.log("‚úÖ √âcran de chargement initialis√© avec succ√®s (0.9s)"),Promise.resolve(e))}function K(){console.log("üü¢ Application pr√™te, demande de masquage de l'√©cran de chargement."),P=!0,D()}function Z(){if(console.log("üé¨ hideLoadingScreen - D√©but du masquage"),!v){console.warn("‚ö†Ô∏è √âcran de chargement non initialis√©");return}if(y){console.log("‚ÑπÔ∏è Masquage d√©j√† en cours");return}y=!0;const e=document.querySelector(".loadingscreen"),t=document.querySelector(".loading_logo_wrap");if(console.log("üîç √âl√©ments trouv√©s pour le masquage:",{loadingScreen:!!e,logoWrap:!!t}),!e||!t){console.warn("‚ö†Ô∏è √âl√©ments manquants pour le masquage"),y=!1;return}console.log("üé¨ D√©marrage de l'animation de masquage am√©lior√©e"),window.gsap.timeline({onComplete:()=>{console.log("‚úÖ Animation de masquage termin√©e"),window.gsap.set(e,{display:"none"}),y=!1;try{sessionStorage.setItem("preloaderShown","true")}catch(n){console.warn("Impossible d'enregistrer l'√©tat du preloader dans sessionStorage.",n)}}}).to(t,{opacity:0,scale:h.logoShrinkScale,duration:h.logoPopDuration,ease:h.ease}).to(e,{opacity:0,duration:h.fadeOutDuration,ease:h.ease},"-=0.1")}function $(){const e=document.querySelector(".loadingscreen");e&&window.gsap.to(e,{opacity:0,duration:.5,onComplete:()=>{window.gsap.set(e,{display:"none"})}}),y=!1}console.log("üöÄ text-animation.js v2.1.0 charg√©");function X(){const e=document.querySelector(".span_mover");if(e)try{let n=function(){if(o)return;o=!0;const i=window.gsap.timeline({onComplete:()=>{o=!1,window.gsap.to(e,{y:t.positions.start,duration:t.duration,ease:t.ease,onComplete:()=>{setTimeout(n,t.cycleDelay*1e3)}})}}),s=[t.positions.start,t.positions.middle,t.positions.end];for(let r=0;r<s.length;r++)i.to(e,{y:s[r],duration:t.duration,ease:t.ease}),r<s.length-1&&i.to({},{duration:t.pauseDuration});i.play()};const t={duration:.6,ease:"back.out(1.7)",pauseDuration:1.5,cycleDelay:.5,positions:{start:"0%",middle:"-34%",end:"-68%"}};let o=!1;n(),window.addEventListener("beforeunload",()=>{window.gsap.killTweensOf(e)})}catch(t){console.error("Erreur dans l'animation de texte:",t)}}let b=!1;async function W(e){if(!e||!e.classList.contains("is-open"))return;b=!0;const t=e.querySelector(".faq_respond"),o=e.querySelector(".svg-holder");e.classList.remove("is-open");const n=window.gsap.timeline({onComplete:()=>{t&&(t.style.display="none"),b=!1}});o&&n.to(o,{rotation:0,duration:.25,ease:"power2.inOut"},0),t&&(n.to(t,{opacity:0,y:-10,duration:.2,ease:"power1.in"},0),n.to(t,{height:0,duration:.4,ease:"back.in(1.7)"},0)),await n}async function Y(e){if(!e||e.classList.contains("is-open"))return;b=!0;const t=e.querySelector(".faq_respond"),o=e.querySelector(".svg-holder");e.classList.add("is-open");const n=window.gsap.timeline({onComplete:()=>{b=!1}});if(t){window.gsap.set(t,{display:"block",opacity:0,y:-20,height:0}),window.getComputedStyle(t).height,window.gsap.set(t,{height:"auto"});const i=t.scrollHeight;window.gsap.set(t,{height:0}),n.to(t,{height:i,duration:.6,ease:"elastic.out(1.2, 0.5)"},0),n.to(t,{opacity:1,y:0,duration:.3,ease:"power2.out"},"<0.05")}o&&n.to(o,{rotation:90,duration:.25,ease:"back.out(1.7)"},0),await n}async function J(e){if(b)return;if(e.classList.contains("is-open"))await W(e);else{const o=document.querySelectorAll(".faq_item.is-open");await Promise.all(Array.from(o).map(n=>W(n))),await Y(e)}}function Q(){const e=document.querySelectorAll(".faq_item");e.length!==0&&e.forEach(t=>{t&&(t.classList.remove("is-open"),t.querySelector(".faq_respond")&&window.gsap.set(t.querySelector(".faq_respond"),{height:0,opacity:0,display:"none"}),t.querySelector(".svg-holder")&&window.gsap.set(t.querySelector(".svg-holder"),{rotation:0}),!t.dataset.faqInitialized&&(t.dataset.faqInitialized="true",t.addEventListener("click",o=>{o.target.closest(".faq_respond a, .faq_respond button")||(o.preventDefault(),J(t))})))})}console.log('üöÄ menu-desktop.js v14.0.0 charg√© - Strat√©gie "Wrapper"');class ee{constructor(){this.activePanel=null,this.isAnimating=!1,this.triggerSelector='[data-attribute^="nav-link-desktop-"]',this.wrapperSelector=".desktop_menu_wrapper",this.panelClassMap={parcs:".parc_menu_desktop",activites:".activites_menu_desktop",offres:".offres_menu_desktop"},this._addGlobalListener(),console.log('‚úÖ Gestionnaire de clic "Strat√©gie Wrapper" est actif.')}_addGlobalListener(){document.body.addEventListener("click",t=>{if(this.isAnimating)return;const o=t.target.closest(this.triggerSelector),n=document.querySelector(this.wrapperSelector);if(this.activePanel&&!o&&!this.activePanel.contains(t.target)){this._closeAll();return}if(!o)return;if(t.preventDefault(),t.stopPropagation(),!n){console.error(`Wrapper introuvable avec le s√©lecteur: ${this.wrapperSelector}`);return}const i=o.getAttribute("data-attribute").replace("nav-link-desktop-",""),s=n.querySelector(this.panelClassMap[i]);if(!s){console.error(`Panneau cible pour la cl√© "${i}" non trouv√© dans le wrapper.`);return}const r=this.activePanel===s,a=!this.activePanel;r?this._closeAll():a?this._openWrapperAndPanel(s):this._switchPanels(this.activePanel,s)})}_openWrapperAndPanel(t){const o=document.querySelector(this.wrapperSelector);this.isAnimating=!0,window.gsap.set(o,{display:"flex",opacity:0}),Object.values(this.panelClassMap).forEach(n=>{const i=o.querySelector(n);i&&window.gsap.set(i,{display:"none"})}),window.gsap.set(t,{display:"flex"}),window.gsap.to(o,{opacity:1,duration:.3,ease:"power2.out",onComplete:()=>{this.isAnimating=!1,this.activePanel=t}})}_closeAll(){const t=document.querySelector(this.wrapperSelector);!this.activePanel||!t||(this.isAnimating=!0,window.gsap.to(t,{opacity:0,duration:.2,ease:"power1.in",onComplete:()=>{window.gsap.set(t,{display:"none"}),this.activePanel&&window.gsap.set(this.activePanel,{display:"none"}),this.activePanel=null,this.isAnimating=!1}}))}_switchPanels(t,o){this.isAnimating=!0;const n=window.gsap.timeline({onComplete:()=>{this.isAnimating=!1,this.activePanel=o}});n.to(t,{opacity:0,duration:.15,onComplete:()=>window.gsap.set(t,{display:"none"})}),n.set(o,{display:"flex",opacity:0}),n.to(o,{opacity:1,duration:.15})}}function te(){new ee}function oe(){const e=document.querySelector("#hamburger-menu"),t=document.querySelector("#main-menu-mobile"),o=document.body,n=document.querySelector("#parcs-nav_button_mobile"),i=document.querySelector("#activites-nav_button_mobile"),s=document.querySelector("#formules-nav_button_mobile"),r=document.querySelector("#parc-menu-mobile"),a=document.querySelector("#activite-menu-mobile"),l=document.querySelector("#offres-menu-mobile"),d=document.querySelectorAll(".button-close"),u=document.querySelectorAll(".button-back-menu");let c=!1,g=0,E=window.gsap.timeline({paused:!0});const k=window.gsap.timeline({paused:!0});k.to(e,{rotation:90,duration:.4,ease:"elastic.out(1, 0.5)",transformOrigin:"center center"}),[t,r,a,l].forEach(p=>{p.style.display="none"});function j(){g=window.pageYOffset||document.documentElement.scrollTop,o.style.overflow="hidden",o.style.position="fixed",o.style.width="100%",o.style.top=`-${g}px`}function B(){o.style.overflow="",o.style.position="",o.style.width="",o.style.top="",window.scrollTo(0,g)}function U(){return window.gsap.timeline({paused:!0}).add(()=>{t.style.display="flex",[r,a,l].forEach(p=>{p.style.display="none"})},"openMainMenu").add(()=>{t.style.display="none",r.style.display="flex"},"openParcMenu").add(()=>{t.style.display="none",a.style.display="flex"},"openActiviteMenu").add(()=>{t.style.display="none",l.style.display="flex"},"openOffresMenu")}E=U();function M(p=null){[n,i,s,document.querySelector("#parcs-nav_button"),document.querySelector("#activites-nav_button"),document.querySelector("#formules-nav_button")].forEach(f=>{f&&(p&&f.id===p?f.classList.add("active"):f.classList.remove("active"))})}function A(p){p?k.play():k.reverse()}function Ce(p){const f={"parcs-nav_button":r,"activites-nav_button":a,"formules-nav_button":l,"parcs-nav_button_mobile":r,"activites-nav_button_mobile":a,"formules-nav_button_mobile":l}[p];if(f){if(t.style.display="none",r.style.display="none",a.style.display="none",l.style.display="none",c&&f.style.display==="flex"){c=!1,B(),M(),A(!1);return}requestAnimationFrame(()=>{f.style.display="flex",c=!0,j(),M(p),A(!0)})}}function G(){E&&E.kill(),c=!1,[t,r,a,l].forEach(p=>{p.style.display="none"}),B(),M(),A(!1),E=U()}function Ee(){[r,a,l].forEach(p=>{p.style.display="none"}),t.style.display="flex",c=!0}function L(p){t.style.display="none",c=!0,p.style.display="flex"}e.addEventListener("click",()=>{c?G():([r,a,l].forEach(p=>{p.style.display="none"}),t.style.display="flex",c=!0,j(),A(!0))}),n.addEventListener("click",()=>L(r)),i.addEventListener("click",()=>L(a)),s.addEventListener("click",()=>L(l)),d.forEach(p=>{p.addEventListener("click",G)}),u.forEach(p=>{p.addEventListener("click",Ee)}),document.querySelectorAll("#parcs-nav_button, #activites-nav_button, #formules-nav_button, #parcs-nav_button_mobile, #activites-nav_button_mobile, #formules-nav_button_mobile").forEach(p=>{p.addEventListener("click",I=>{I.preventDefault(),Ce(p.id)})})}console.log("üöÄ centre-card.js v6.1.0 charg√©");const m={CARD:".centre-card_wrapper.effect-cartoon-shadow",CLICKABLE_WRAP:'.clickable_wrap[data-attribute="data-card-toggle"]',TOGGLE_ELEMENTS:[".centre-card_scroll_wrapper",".centre-card_list",".centre-card_button-holder",".tag_holder_wrapper"],ARROW:".svg-holder.arrow",INTERNAL_LINKS:".centre-card_button-holder a, .centre-card_button-holder button"},O=new WeakSet;let q=!1;async function _(e){if(!e||!e.classList.contains("is-open"))return;const t=e.querySelectorAll(m.TOGGLE_ELEMENTS.join(",")),o=e.querySelector(m.ARROW),n=e.querySelector(".centre-card_scroll_wrapper");e.classList.remove("is-open");const i=window.gsap.timeline({onStart:()=>{n&&window.gsap.set(n,{height:"10rem"})},onComplete:()=>{window.gsap.set(t,{display:"none"}),n&&window.gsap.set(n,{height:0})}});i.to(t,{opacity:0,y:-10,duration:.2,ease:"power1.in",stagger:{each:.02,from:"start"}},0),o&&i.to(o,{rotation:0,duration:.25,ease:"power2.inOut"},0),n&&i.to(n,{height:0,duration:.4,ease:"back.in(1.7)"},0),await i}async function H(e){if(!e||e.classList.contains("is-open"))return;e.classList.add("is-open");const t=e.querySelectorAll(m.TOGGLE_ELEMENTS.join(",")),o=e.querySelector(m.ARROW),n=e.querySelector(".centre-card_scroll_wrapper");t.forEach(s=>{window.gsap.set(s,{display:s.dataset.originalDisplay||"block",opacity:0,y:-20})});const i=window.gsap.timeline({onStart:()=>{n&&window.gsap.set(n,{height:0})}});n&&i.to(n,{height:"10rem",duration:.6,ease:"elastic.out(1.2, 0.5)"},0),o&&i.to(o,{rotation:90,duration:.25,ease:"back.out(1.7)"},"<"),i.to(t,{opacity:1,y:0,duration:.3,ease:"power2.out",stagger:{each:.035,from:"start"}},"<0.05"),await i}async function ne(e){var t;if(!q){q=!0;try{if(e.classList.contains("is-open"))await _(e),document.dispatchEvent(new CustomEvent("map:reset")),console.log("üó∫Ô∏è √âv√©nement map:reset √©mis");else{const n=document.querySelectorAll(`${m.CARD}.is-open`);await Promise.all(Array.from(n).map(s=>_(s))),await H(e);const i=(t=e.closest(".w-dyn-item"))==null?void 0:t.dataset.placeId;i&&(document.dispatchEvent(new CustomEvent("map:focus",{detail:{placeId:i}})),console.log("üìç √âv√©nement map:focus √©mis pour:",i))}}finally{q=!1}}}function x(e){var i,s;if(!e||O.has(e)){console.log("‚è≠Ô∏è Carte d√©j√† initialis√©e, ignor√©e");return}console.log("üîß Initialisation de la carte:",e);let t=(i=e.parentElement)==null?void 0:i.querySelector(m.CLICKABLE_WRAP);if(t||(t=(s=e.parentElement)==null?void 0:s.querySelector(".clickable_wrap"),t&&console.log("‚úÖ Clickable wrap trouv√© sans attribut data-card-toggle")),!t){console.log("‚ùå Clickable wrap non trouv√© pour la carte:",e);return}const o=e.querySelectorAll(m.TOGGLE_ELEMENTS.join(","));console.log(`üìã √âl√©ments √† basculer trouv√©s: ${o.length}`),o.forEach(r=>{const a=window.getComputedStyle(r);r.dataset.originalDisplay=a.display,console.log(`üíæ Display original sauv√© pour ${r.className}: ${a.display}`)}),window.gsap.set(o,{display:"none",opacity:0,y:-20}),console.log("üîí Carte ferm√©e par d√©faut");const n=r=>{if(r.target.closest(m.INTERNAL_LINKS)){console.log("üîó Clic sur lien interne, toggle ignor√©");return}r.preventDefault(),r.stopPropagation(),console.log("üëÜ Clic sur carte d√©tect√©"),ne(e)};t.addEventListener("click",n),O.add(e),console.log("‚úÖ Carte initialis√©e avec succ√®s")}function ie(){const e=document.querySelector(".collection-list-centre-wrapper");if(!e)return;new MutationObserver(o=>{for(const n of o)n.type==="childList"&&n.addedNodes.forEach(i=>{i.nodeType===1&&(i.matches(m.CARD)&&x(i),i.querySelectorAll(m.CARD).forEach(s=>x(s)))})}).observe(e,{childList:!0,subtree:!0})}function se(e){if(!e)return null;const t=document.querySelectorAll(".w-dyn-item");for(const o of t){const n=o.querySelector(m.CARD);if(!n)continue;if(o.querySelectorAll('a[href*="/nos-parcs-a-paris-region-parisienne/'+e+'"]').length>0)return n}return null}function ae(){console.log("üéØ Configuration de l'√©coute du menu Parcs..."),document.addEventListener("click",e=>{const t=e.target.closest('a[href*="/nos-parcs-a-paris-region-parisienne/"]');if(!t||!window.location.pathname.includes("/activites-par-centre/"))return;const n=t.getAttribute("href").split("/nos-parcs-a-paris-region-parisienne/")[1];console.log("üñ±Ô∏è Clic d√©tect√© sur lien centre:",n),setTimeout(()=>{const i=se(n);i?(console.log("‚úÖ Carte trouv√©e pour le centre cliqu√©, ouverture..."),document.querySelectorAll(`${m.CARD}.is-open`).forEach(r=>{r!==i&&_(r)}),i.classList.contains("is-open")||H(i)):console.log("‚ùå Aucune carte trouv√©e pour le centre:",n)},300)}),console.log("‚úÖ √âcoute du menu Parcs configur√©e")}function re(){if(console.log("üöÄ === INITIALISATION DES CARTES DE CENTRE ==="),console.log("üìç Page actuelle:",window.location.pathname),console.log("üèóÔ∏è DOM ready state:",document.readyState),!window.gsap){console.log("‚ùå GSAP non disponible, initialisation annul√©e");return}let e=document.querySelectorAll(m.CARD);if(e.length===0){console.log("‚ö†Ô∏è Aucune carte trouv√©e avec le s√©lecteur principal. Tentative avec s√©lecteurs alternatifs...");const t=[".centre-card_wrapper",'[class*="centre-card"]',".card-centre_wrapper"];for(const o of t)if(e=document.querySelectorAll(o),e.length>0){console.log(`‚úÖ Cartes trouv√©es avec s√©lecteur alternatif: ${o} (${e.length} √©l√©ments)`);break}}if(console.log(`üìä ${e.length} cartes trouv√©es au total`),e.length===0){console.log("‚ùå Aucune carte trouv√©e, initialisation annul√©e");return}e.forEach(t=>{t.classList.contains("is-open")&&(console.log("üîí Fermeture forc√©e de carte ouverte au d√©marrage"),t.classList.remove("is-open"))}),e.forEach((t,o)=>{console.log(`üîß Initialisation carte ${o+1}/${e.length}`),x(t)}),ie(),ae(),console.log("‚úÖ === INITIALISATION TERMIN√âE ===")}function le(){console.group("--- Informations de D√©bogage ---"),console.log("Wrapper Menu Desktop:",document.querySelector(".desktop_menu_wrapper")),console.log("Boutons de menu:",{parcs:document.querySelector('[data-attribute="nav-link-desktop-parcs"]'),activites:document.querySelector('[data-attribute="nav-link-desktop-activites"]'),offres:document.querySelector('[data-attribute="nav-link-desktop-offres"]')}),console.log("Conteneurs de menu:",{parcs:document.querySelector(".parc_menu_desktop"),activites:document.querySelector(".activites_menu_desktop"),offres:document.querySelector(".offres_menu_desktop")}),console.groupEnd()}function ce(){window.location.hash==="#debug"&&(console.log("üêõ Mode de d√©bogage activ√©."),le())}(function(){if(!window.location.pathname.includes("/reservation"))return;const e="https://www.apex-timing.com/gokarts/sessions_booking.php?center=",t='[data-attribute="parc-item"]';window.matchMedia("(prefers-reduced-motion: reduce)").matches;{document.addEventListener("click",o=>{const n=o.target.closest(t);if(!n)return;const i=n.getAttribute("data-apex-id");if(!/^\d{3}$/.test(i))return;const s=e+i;try{o.preventDefault(),typeof o.stopImmediatePropagation=="function"&&o.stopImmediatePropagation(),typeof o.stopPropagation=="function"&&o.stopPropagation()}catch{}return window.open(s,"_blank","noopener")||(window.location.href=s),!1});try{const n=new URLSearchParams(window.location.search).get("parc");if(n&&/^\d{3}$/.test(n)){const i=e+n,s=window.open(i,"_blank","noopener")}}catch{}return}})(),console.log("üó∫Ô∏è map-integration.js v2.1.2 charg√©");const S={map:null,markers:[],infoWindow:null,bottomSheetElement:null,initialCenter:{lat:48.82,lng:2.25},initialZoom:10,_placeCacheMemory:new Map,cacheTtlMs:24*60*60*1e3,_cacheKey(e){return`sw_place_${e}`},getCachedPlaceData(e){try{const t=this._placeCacheMemory.get(e);if(t&&t.expiresAt>Date.now())return t.data;const o=localStorage.getItem(this._cacheKey(e));if(!o)return null;const n=JSON.parse(o);return n&&n.expiresAt>Date.now()?(this._placeCacheMemory.set(e,n),n.data):(localStorage.removeItem(this._cacheKey(e)),this._placeCacheMemory.delete(e),null)}catch{return null}},setCachedPlaceData(e,t){const o={data:t,expiresAt:Date.now()+this.cacheTtlMs};try{this._placeCacheMemory.set(e,o),localStorage.setItem(this._cacheKey(e),JSON.stringify(o))}catch{this._placeCacheMemory.set(e,o)}},normalizePlaceToData(e){let t=null,o=null;e.location&&(typeof e.location.lat=="function"?(t=e.location.lat(),o=e.location.lng()):typeof e.location.lat=="number"&&(t=e.location.lat,o=e.location.lng));let n=null;try{e.photos&&e.photos.length>0&&typeof e.photos[0].getURI=="function"&&(n=e.photos[0].getURI({maxWidth:400,maxHeight:200}))}catch{}return{displayName:e.displayName||"",formattedAddress:e.formattedAddress||"",location:t!=null&&o!=null?{lat:t,lng:o}:null,rating:typeof e.rating=="number"?e.rating:null,userRatingCount:typeof e.userRatingCount=="number"?e.userRatingCount:null,googleMapsURI:e.googleMapsURI||"",regularOpeningHours:e.regularOpeningHours&&e.regularOpeningHours.weekdayDescriptions?{weekdayDescriptions:e.regularOpeningHours.weekdayDescriptions}:null,photoUrl:n}},async getPlaceData(e){const t=this.getCachedPlaceData(e);if(t)return t;const{Place:o}=await google.maps.importLibrary("places"),n=new o({id:e}),i=["displayName","formattedAddress","location","rating","googleMapsURI","photos","userRatingCount","regularOpeningHours"];await n.fetchFields({fields:i});const s=this.normalizePlaceToData(n);return this.setCachedPlaceData(e,s),s},initMap:function(){const e=document.getElementById("map");if(!e){console.error("Erreur : L'√©l√©ment #map est introuvable dans le DOM.");return}const t=e.dataset.mapId;t||console.warn("‚ö†Ô∏è data-map-id n'est pas d√©fini sur l'√©l√©ment #map. Les marqueurs avanc√©s pourraient ne pas fonctionner."),this.map=new google.maps.Map(e,{center:this.initialCenter,zoom:this.initialZoom,disableDefaultUI:!0,zoomControl:!0,mapId:t}),this.infoWindow=new google.maps.InfoWindow,google.maps.event.addListener(this.infoWindow,"closeclick",()=>{this.resetMapView()}),this.injectBottomSheet(),this.createMarkers()},injectBottomSheet:function(){const e=document.createElement("style");e.textContent=`
            .map-bottom-sheet {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background-color: white;
                border-top-left-radius: 16px;
                border-top-right-radius: 16px;
                box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
                transform: translateY(100%);
                transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                z-index: 1000;
                max-height: 85vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                visibility: hidden;
            }
            .map-bottom-sheet.is-visible {
                transform: translateY(0);
                visibility: visible;
            }
            .map-bottom-sheet__content {
                padding: 24px;
                padding-top: 50px;
            }
            .map-bottom-sheet__close-btn {
                position: absolute;
                top: 12px;
                right: 12px;
                background: #f0f0f0;
                border: none;
                border-radius: 50%;
                width: 32px;
                height: 32px;
                font-size: 22px;
                line-height: 32px;
                text-align: center;
                cursor: pointer;
                font-weight: bold;
                color: #333;
                z-index: 2;
            }
            .map-bottom-sheet__handle {
                position: absolute;
                top: 8px;
                left: 50%;
                transform: translateX(-50%);
                width: 40px;
                height: 4px;
                background-color: #ccc;
                border-radius: 2px;
            }
        `,document.head.appendChild(e),document.body.insertAdjacentHTML("beforeend",`
            <div id="map-bottom-sheet" class="map-bottom-sheet" aria-hidden="true">
                <div class="map-bottom-sheet__handle"></div>
                <button class="map-bottom-sheet__close-btn" aria-label="Fermer">&times;</button>
                <div class="map-bottom-sheet__content"></div>
            </div>
        `),this.bottomSheetElement=document.getElementById("map-bottom-sheet"),this.bottomSheetElement.querySelector(".map-bottom-sheet__close-btn").addEventListener("click",()=>{this.hideBottomSheet()})},createMarkers:function(){const e=document.querySelectorAll(".w-dyn-item[data-place-id]");console.log(`üìç ${e.length} cartes trouv√©es pour la cr√©ation des marqueurs.`),e.forEach(t=>{var l,d;const o=parseFloat(t.dataset.lat),n=parseFloat(t.dataset.lng),i=t.dataset.placeId,s=t.dataset.centreUrl||null;let r=null;try{if(s){let u=s.trim();const c="/nos-parcs-a-paris-region-parisienne/";/^https?:\/\//i.test(u)?r=u:u.startsWith(c)?r=new URL(u,window.location.origin).href:u.startsWith("/")?r=new URL(c+u.replace(/^\/+/,""),window.location.origin).href:r=new URL(c+u,window.location.origin).href}else console.warn("Aucune URL de centre fournie (data-centre-url manquant) pour:",t)}catch{console.warn('URL de centre invalide d√©tect√©e dans data-centre-url, le bouton "Voir le centre" sera masqu√©.',s)}if(isNaN(o)||isNaN(n)||!i){const u=((l=t.querySelector("h3"))==null?void 0:l.textContent)||"Nom non trouv√©";console.warn(`‚ö†Ô∏è Carte ignor√©e (nom: "${u}") car ses donn√©es de latitude/longitude sont manquantes ou invalides.`,t);return}const a=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:o,lng:n},title:((d=t.querySelector("h3"))==null?void 0:d.textContent)||"Centre Smile World"});a.addListener("click",()=>{window.matchMedia("(max-width: 768px)").matches?this.showBottomSheetForPlace(i):this.focusOnCenter(i,a)}),this.markers.push({placeId:i,marker:a,centreUrl:r})})},focusOnCenter:async function(e,t){var o;if(!(!e||!this.map)){console.log(`üîé Zoom sur le centre avec Place ID : ${e}`);try{const n=await this.getPlaceData(e);if(n.location){this.map.panTo(n.location),this.map.setZoom(15);const i=this.markers.find(a=>a.placeId===e),s=this.buildInfoWindowContent(n,!1,i==null?void 0:i.centreUrl);this.infoWindow.setContent(s);const r=t||((o=this.markers.find(a=>a.placeId===e))==null?void 0:o.marker);r&&this.infoWindow.open(this.map,r)}else console.error(`Aucune donn√©e de localisation trouv√©e pour le Place ID ${e}`)}catch(n){console.error(`Erreur lors de la r√©cup√©ration des d√©tails pour le Place ID ${e}:`,n)}}},showBottomSheetForPlace:async function(e){if(!(!e||!this.map)){console.log(`üì± Affichage du panneau mobile pour Place ID : ${e}`);try{const t=await this.getPlaceData(e);if(t.location){this.map.panTo(t.location),this.map.setZoom(15);const o=this.markers.find(i=>i.placeId===e),n=this.buildInfoWindowContent(t,!0,o==null?void 0:o.centreUrl);this.bottomSheetElement.querySelector(".map-bottom-sheet__content").innerHTML=n,this.bottomSheetElement.classList.add("is-visible"),this.bottomSheetElement.setAttribute("aria-hidden","false")}else console.error(`Aucune donn√©e de localisation trouv√©e pour le Place ID ${e}`)}catch(t){console.error(`Erreur lors de la r√©cup√©ration des d√©tails pour le Place ID ${e}:`,t)}}},hideBottomSheet:function(){!this.bottomSheetElement||!this.map||(this.bottomSheetElement.classList.remove("is-visible"),this.bottomSheetElement.setAttribute("aria-hidden","true"),console.log("üîô R√©initialisation de la vue de la carte..."),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))},buildInfoWindowContent:function(e,t=!1,o=null){let n="";e.photoUrl?n=`<img src="${e.photoUrl}" alt="Photo de ${e.displayName}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;">`:e.photos&&e.photos.length>0&&typeof e.photos[0].getURI=="function"&&(n=`<img src="${e.photos[0].getURI({maxWidth:400,maxHeight:200})}" alt="Photo de ${e.displayName}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;">`);let i="";e.rating&&(i=`
                <div style="display: flex; align-items: center; color: #555; margin-bottom: 8px; font-size: 14px;">
                    <span style="color: #f8b400; font-size: 18px; margin-right: 8px;">${"‚òÖ".repeat(Math.round(e.rating))+"‚òÜ".repeat(5-Math.round(e.rating))}</span>
                    <span style="font-weight: bold; color: #111; margin-right: 5px;">${e.rating.toFixed(1)}</span>
                    <span>(${e.userRatingCount||0} avis)</span>
                </div>`);let s="",r="";if(e.regularOpeningHours&&e.regularOpeningHours.weekdayDescriptions){const u=new Date().getDay(),c=u===0?6:u-1;r=`<div style="font-size: 13px; color: #333; margin-bottom: 12px; display: flex; align-items: center;"><svg viewBox="0 0 24 24" style="width:16px; height:16px; margin-right: 8px; fill: #555;"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M13 7h-2v6h6v-2h-4V7z"></path></svg><span>${e.regularOpeningHours.weekdayDescriptions[c]}</span></div>`}const a=`font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; ${t?"":"max-width: 290px;"} padding: 5px;`,l=o?`<a href="${o}" style="display: inline-block; margin-top: 8px; margin-right: 8px; font-size: 13px; color: white; background-color: #1a73e8; text-decoration: none; font-weight: 600; padding: 8px 10px; border-radius: 6px;">Voir le centre</a>`:"",d=`<a href="${e.googleMapsURI}" target="_blank" style="display: inline-block; margin-top: 8px; font-size: 13px; color: #1a73e8; text-decoration: none; font-weight: 500;">Voir sur Google Maps</a>`;return`
            <div style="${a}">
                ${n}
                <div style="font-size: 18px; font-weight: 700; color: #1a1a1a; margin-bottom: 4px;">${e.displayName}</div>
                <div style="font-size: 13px; color: #555; margin-bottom: 8px;">${e.formattedAddress}</div>
                ${i}
                ${r}
                ${l}${d}
                ${s}
            </div>
        `},resetMapView:function(){this.map&&(console.log("üîÑ R√©initialisation de la vue de la carte."),this.infoWindow.close(),this.hideBottomSheet(),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))}};window.initGoogleMap=S.initMap.bind(S),window.mapManager=S;function de(){const e=document.getElementById("map");if(!e)return;const t=e.dataset.apiKey;if(!t){console.error(`‚ùå Cl√© API Google Maps manquante. Veuillez l'ajouter dans l'attribut "data-api-key" de la div #map.`);return}if(window.google&&window.google.maps){console.log("üó∫Ô∏è Google Maps API d√©j√† charg√©e."),S.initMap();return}console.log("üó∫Ô∏è Chargement de l'API Google Maps...");const o=document.createElement("script");o.src=`https://maps.googleapis.com/maps/api/js?key=${t}&libraries=places,marker&callback=initGoogleMap&loading=async&language=fr`,o.async=!0,document.head.appendChild(o)}console.log("üîó preselect.js pr√™t √† √™tre initialis√©");function ue(){const e="[SW-PRESELECT]",t=(...s)=>console.log(new Date().toLocaleTimeString(),e,...s),o=document.querySelector("[data-preselect-activity-slug], [data-preselect-park-id]");if(!o){console.warn(e,"Aucun √©l√©ment wrapper avec [data-preselect-activity-slug] ou [data-preselect-park-id] trouv√©.");return}const n=document.querySelectorAll('[data-attribute="preselect-booking-button"]');console.log("‚úÖ Module de pr√©s√©lection initialis√©.");const i=o.dataset.preselectParkId;if(i){const s=`https://www.apex-timing.com/gokarts/sessions_booking.php?center=${encodeURIComponent(i)}`;n.forEach(r=>{r.href=s,r.target="_blank",r.rel="noopener";const a=function(l){try{l.preventDefault(),typeof l.stopImmediatePropagation=="function"&&l.stopImmediatePropagation(),typeof l.stopPropagation=="function"&&l.stopPropagation()}catch{}return window.open(s,"_blank","noopener"),!1};r.addEventListener("click",a,!0)}),t(`Boutons configur√©s pour ouvrir Apex en nouvel onglet (sans redirection locale) -> ${s}`),document.addEventListener("click",function(a){if(a.target.closest('[data-attribute="preselect-booking-button"]')){try{a.preventDefault(),typeof a.stopImmediatePropagation=="function"&&a.stopImmediatePropagation(),typeof a.stopPropagation=="function"&&a.stopPropagation()}catch{}return window.open(s,"_blank","noopener"),!1}},!0)}}const pe=()=>{const e=document.querySelector(".desktop_menu_content.right .w-dyn-items"),t=document.querySelectorAll(".desktop_menu_list.acitivt-s .default-container");if(!e||!t.length)return;const o=Array.from(e.children).find(a=>{const l=a.querySelector("img");return l&&l.id==="Bowling"});Array.from(e.children).forEach(a=>{a===o?(a.style.opacity="1",a.style.display="block"):(a.style.opacity="0",a.style.display="none")});const n=new Map;let i=null;const s=(a,l)=>{const d=Array.from(e.children).find(u=>{const c=u.querySelector("img");return c&&c.id===a});if(d)if(n.has(d)&&(n.get(d).kill(),n.delete(d)),l){if(i=a,o&&o!==d){n.has(o)&&n.get(o).kill();const c=window.gsap.to(o,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{o&&(o.style.display="none"),n.delete(o)}});n.set(o,c)}d.style.display="block";const u=window.gsap.to(d,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(d)});n.set(d,u)}else{i===a&&(i=null);const u=window.gsap.to(d,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{if(d.style.display="none",i===null&&o){o.style.display="block",n.has(o)&&n.get(o).kill();const c=window.gsap.to(o,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>n.delete(o)});n.set(o,c)}n.delete(d)}});n.set(d,u)}},r=(a,l)=>{n.has(a)&&(n.get(a).kill(),n.delete(a));const d={duration:l?.1:.05,ease:"power2.out",onComplete:()=>n.delete(a)},u=l?{scale:1.1,backgroundColor:"rgba(255, 255, 255, 0.00);"}:{scale:1,backgroundColor:""},c=window.gsap.to(a,{...u,...d});n.set(a,c)};t.forEach(a=>{const l=a.getAttribute("data-name");l&&(a.addEventListener("mouseenter",()=>{s(l,!0),r(a,!0)}),a.addEventListener("mouseleave",()=>{s(l,!1),r(a,!1)}))})};function me(){console.log("üîß Configuration du gestionnaire de filtres vides v2.1.0..."),window.fsAttributes||(window.fsAttributes=[]),window.fsAttributes.push(["list",e=>{console.log("‚úÖ Finsweet list callback d√©clench√©!",e.length,"instances"),fe()}]),console.log("üìã Callback Finsweet configur√© correctement avec fsAttributes")}function fe(){console.log("üéØ Configuration des filtres vides...");const e=document.querySelectorAll("input[fs-list-field]");console.log(`üìä ${e.length} inputs fs-list-field trouv√©s`),e.forEach((t,o)=>{if(t.closest(".is-list-emptyfacet")){console.log(`üîí Input ${o+1} dans empty facet - d√©sactivation`),t.style.cursor="default";const i=t.closest("label");i&&(i.style.cursor="default")}t.addEventListener("click",i=>{if(t.closest(".is-list-emptyfacet")){console.log("üö´ Clic bloqu√© sur filtre vide"),i.preventDefault(),i.stopPropagation();return}}),t.addEventListener("change",()=>{var r;if(t.closest(".is-list-emptyfacet"))return;const s=(r=t.closest(".tag_wrap"))==null?void 0:r.querySelector(".tags_content");s&&(t.checked?s.classList.add("is-active"):s.classList.remove("is-active"))})}),console.log("üéØ Filtres vides configur√©s avec succ√®s")}class F{constructor(){this.version="1.2.1",this.initialized=!1,this.selectors={collectionList:'[fs-list-element="list"]',collectionItems:'[fs-list-element="item"]',filterInputs:"input[fs-list-field]",noItemsMessage:".w-dyn-empty",filterForms:'[fs-list-element="filters"]',cmsSlider:"#cms-slider-offres",helperText:"#helper-text"},this.messages={selectFilter:"üëÜ S√©lectionnez un parc ou un type d'offre pour voir nos offres disponibles",noResults:"Aucune offre ne correspond √† vos crit√®res. Essayez une autre s√©lection."}}init(){const t=window.location.pathname;if(!["/offres","/anniversaires","/tarifs-generaux","/anniversaire-enfant"].includes(t)){console.log(`üö´ mandatory-filter-selection.js - Page ${t} non concern√©e`);return}if(this.initialized){console.log("‚ö†Ô∏è mandatory-filter-selection.js d√©j√† initialis√©");return}console.log(`üéØ mandatory-filter-selection.js v${this.version} - Initialisation sur ${t}`),this.setupInitialState(),this.bindEvents(),this.initialized=!0,console.log("‚úÖ Filtrage obligatoire activ√© - S√©lectionnez un filtre pour voir les offres")}setupInitialState(){const t=document.querySelector(this.selectors.collectionList),o=document.querySelectorAll(this.selectors.collectionItems);if(!t){console.log("‚ùå Collection list non trouv√©e");return}o.forEach(n=>{n.style.display="none"}),this.showSelectionMessage(),this.hideCmsSlider(),this.showHelperText(),console.log(`üîí ${o.length} offres cach√©es - En attente de s√©lection de filtre`)}showSelectionMessage(){const t=document.querySelector(this.selectors.collectionList);if(!t)return;const o=t.querySelector(".mandatory-filter-message");o&&o.remove();const n=document.createElement("div");if(n.className="mandatory-filter-message",n.style.cssText=`
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            margin: 20px 0;
            color: white;
            font-size: 18px;
            font-weight: 500;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        `,n.innerHTML=`
            <div style="font-size: 48px; margin-bottom: 16px;">üéØ</div>
            <div>${this.messages.selectFilter}</div>
        `,!document.querySelector("#mandatory-filter-styles")){const i=document.createElement("style");i.id="mandatory-filter-styles",i.textContent=`
                @keyframes pulse {
                    0%, 100% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.02); opacity: 0.9; }
                }
                .mandatory-filter-message {
                    transition: all 0.3s ease;
                }
            `,document.head.appendChild(i)}t.appendChild(n)}bindEvents(){const t=document.querySelectorAll(this.selectors.filterInputs);t.forEach(o=>{o.addEventListener("change",()=>{this.handleFilterChange()})}),window.addEventListener("list-updated",()=>{this.handleListUpdate()}),console.log(`üîó ${t.length} filtres √©cout√©s`)}handleFilterChange(){const t=document.querySelectorAll(`${this.selectors.filterInputs}:checked`);t.length>0?(console.log(`‚úÖ ${t.length} filtre(s) s√©lectionn√©(s) - Affichage des offres`),this.showCollectionItems(),this.hideSelectionMessage(),this.showCmsSlider(),this.hideHelperText()):(console.log("üîí Aucun filtre s√©lectionn√© - Masquage des offres"),this.hideCollectionItems(),this.showSelectionMessage(),this.hideCmsSlider(),this.showHelperText())}handleListUpdate(){const t=document.querySelectorAll(`${this.selectors.filterInputs}:checked`),o=document.querySelectorAll(`${this.selectors.collectionItems}:not([style*="display: none"])`);t.length>0&&o.length===0&&(console.log("‚ö†Ô∏è Aucun r√©sultat pour les filtres s√©lectionn√©s"),this.showNoResultsMessage())}showCollectionItems(){document.querySelectorAll(this.selectors.collectionItems).forEach(o=>{o.style.display=""})}hideCollectionItems(){document.querySelectorAll(this.selectors.collectionItems).forEach(o=>{o.style.display="none"})}hideSelectionMessage(){const t=document.querySelector(".mandatory-filter-message");t&&(t.style.display="none")}showCmsSlider(){const t=document.querySelector(this.selectors.cmsSlider);t&&(t.style.display="",console.log("üëÅÔ∏è Slider CMS des offres affich√© (filtre s√©lectionn√©)"))}hideCmsSlider(){const t=document.querySelector(this.selectors.cmsSlider);t&&(t.style.display="none",console.log("üôà Slider CMS des offres masqu√© (aucun filtre)"))}showHelperText(){const t=document.querySelector(this.selectors.helperText);t&&(t.style.display="",console.log("üëÅÔ∏è Texte d'aide affich√© (aucun filtre)"))}hideHelperText(){const t=document.querySelector(this.selectors.helperText);t&&(t.style.display="none",console.log("üôà Texte d'aide masqu√© (filtre s√©lectionn√©)"))}showNoResultsMessage(){const t=document.querySelector(this.selectors.collectionList);if(!t||t.querySelector(".no-results-message"))return;const n=document.createElement("div");n.className="no-results-message",n.style.cssText=`
            padding: 30px 20px;
            text-align: center;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 20px 0;
            color: #6c757d;
            font-size: 16px;
        `,n.innerHTML=`
            <div style="font-size: 32px; margin-bottom: 12px;">üòï</div>
            <div>${this.messages.noResults}</div>
        `,t.appendChild(n),setTimeout(()=>{n.parentNode&&n.remove()},3e3)}reset(){this.hideSelectionMessage(),this.showCollectionItems(),this.hideCmsSlider(),this.showHelperText(),this.initialized=!1,console.log("üîÑ Filtrage obligatoire r√©initialis√©")}}window.mandatoryFilterSelection=new F,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.mandatoryFilterSelection.init()}):window.mandatoryFilterSelection.init(),console.log("üöÄ mandatory-filter-selection.js v1.2.1 charg√©");class R{constructor(){this.version="1.6.0",this.initialized=!1,this.selectors={formWrapper:"#devis-form-wrapper",filterElements:"[fs-list-value]",filterForms:'[fs-list-element="filters"]',mapElement:"#map"}}init(){const t=window.location.pathname;if(!["/smile-event-solutions-entreprises"].includes(t)){console.log(`üö´ event-form-visibility.js - Page ${t} non concern√©e`);return}if(this.initialized){console.log("‚ö†Ô∏è event-form-visibility.js d√©j√† initialis√©");return}console.log(`üéØ event-form-visibility.js v${this.version} - Initialisation sur ${t}`),this.setupInitialState(),this.bindEvents(),this.setupMapData(),this.initialized=!0,console.log("‚úÖ Logique d'affichage du formulaire de devis activ√©e")}setupInitialState(){const t=document.querySelector(this.selectors.formWrapper);if(!t){console.log("‚ùå Conteneur du formulaire de devis non trouv√©");return}t.style.display="none",console.log("üîí Formulaire de devis cach√© - En attente de s√©lection de centre")}setupMapData(){if(!document.querySelector(this.selectors.mapElement)){console.log("‚ÑπÔ∏è Aucun √©l√©ment #map trouv√©, pas d'initialisation de carte");return}const o=document.querySelector("select[fs-list-field]");if(!o){console.log("‚ùå Dropdown des centres non trouv√© pour r√©cup√©rer les donn√©es de la carte");return}const n=document.createElement("div");n.id="centres-data-container",n.style.display="none",document.body.appendChild(n);let i=0;Array.from(o.options).forEach((s,r)=>{if(r===0||!s.value)return;const a=s.dataset.placeId,l=s.dataset.lat,d=s.dataset.lng,u=s.textContent.trim();if(a&&l&&d){const c=document.createElement("div");c.className="w-dyn-item",c.setAttribute("data-place-id",a),c.setAttribute("data-lat",l),c.setAttribute("data-lng",d);const g=document.createElement("h3");g.textContent=u,c.appendChild(g),n.appendChild(c),i++}else console.warn(`‚ö†Ô∏è Donn√©es manquantes pour le centre "${u}". V√©rifiez les attributs data-place-id, data-lat, data-lng sur l'option du dropdown.`)}),i>0?(console.log(`üó∫Ô∏è ${i} centres configur√©s pour la carte Google Maps`),window.mapManager&&window.mapManager.createMarkers()):console.log("‚ö†Ô∏è Aucune donn√©e de centre trouv√©e pour la carte. Ajoutez les attributs data-place-id, data-lat, data-lng aux options du dropdown c√¥t√© Webflow.")}bindEvents(){const t=document.querySelectorAll(this.selectors.filterElements);t.forEach(o=>{o.addEventListener("change",()=>{this.handleFilterChange()}),o.addEventListener("click",()=>{this.handleFilterChange()})}),window.addEventListener("list-updated",()=>{this.handleFilterChange()}),console.log(`üîó ${t.length} √©l√©ment(s) de filtre √©cout√©(s)`)}handleFilterChange(){const t=document.querySelectorAll(this.selectors.filterElements);let o=!1;t.forEach(n=>{if(n.checked||n.classList.contains("w--current")||n.tagName.toLowerCase()==="select"&&n.value&&n.value!==""){const i=n.getAttribute("fs-list-value");i&&(o=!0,console.log(`üéØ Filtre actif d√©tect√©: ${i}`))}}),o?(console.log("‚úÖ Centre s√©lectionn√© - Affichage du formulaire de devis"),this.showFormWrapper()):(console.log("üîí Aucun centre s√©lectionn√© - Masquage du formulaire de devis"),this.hideFormWrapper())}showFormWrapper(){const t=document.querySelector(this.selectors.formWrapper);t&&(t.style.display="")}hideFormWrapper(){const t=document.querySelector(this.selectors.formWrapper);t&&(t.style.display="none")}reset(){this.hideFormWrapper();const t=document.getElementById("centres-data-container");t&&t.remove(),this.initialized=!1,console.log("üîÑ Logique du formulaire de devis r√©initialis√©e")}}window.eventFormVisibility=new R,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.eventFormVisibility.init()}):window.eventFormVisibility.init(),console.log("üöÄ event-form-visibility.js v1.6.0 charg√©"),console.log("üé† marquee-animation.js v1.4.1 charg√©");let w=null,C=new WeakMap;function ge(){console.log("üé¨ Initialisation de l'animation marquee...");const e=document.querySelector(".cms_slider_wrapper");if(!e){console.log("-> Aucun √©l√©ment .cms_slider_wrapper trouv√©. Animation marquee ignor√©e.");return}z(),he(e)}function z(){console.log("‚öôÔ∏è Configuration des √©tats initiaux..."),document.querySelectorAll(".vimeo.activity").forEach(o=>{o.style.display="none",o.style.opacity="0"}),document.querySelectorAll("#titre-original").forEach(o=>{o.style.opacity="1",o.style.visibility="visible",o.dataset.originalColor||(o.dataset.originalColor=window.getComputedStyle(o).color)})}function he(e){if(console.log("üèÉ‚Äç‚ôÇÔ∏è Cr√©ation de l'effet marquee..."),e.children.length===0){console.warn("-> Aucun √©l√©ment enfant trouv√© dans .cms_slider_wrapper");return}const o=window.matchMedia("(pointer:coarse)").matches||window.innerWidth<=768;o&&console.log("üì± Mobile d√©tect√© : on conserve la structure marquee mais on met la timeline en pause pour permettre le drag natif."),e.style.overflow=o?"auto":"hidden",e.style.whiteSpace="nowrap";const n=document.createElement("div");n.className="marquee-container",n.style.display="inline-flex",n.style.animation="none";const i=e.innerHTML;n.innerHTML=i+i,e.innerHTML="",e.appendChild(n),z();const s=n.scrollWidth/2,r=window.gsap.timeline({repeat:-1});if(r.set(n,{x:0}).to(n,{x:-s,duration:s/100,ease:"none"}),console.log(`‚úÖ Animation marquee cr√©√©e avec une largeur de ${s}px`),o){r.pause(0),e.style.overflowX="auto",e.style.touchAction="pan-x",e.style.webkitOverflowScrolling="touch";const a=e.querySelector(".cms_slider_list, .w-dyn-items");a&&(a.style.display="inline-flex",a.style.flexWrap="nowrap",a.style.whiteSpace="nowrap",a.querySelectorAll(".w-dyn-item").forEach(d=>{d.style.display="inline-block"}))}ye(n,r)}function ye(e,t){console.log("‚ú® Configuration des effets de survol...");const o=e.querySelectorAll('.w-dyn-item, .slide-item, [class*="slide"]'),n=o.length>0?o:e.children;Array.from(n).forEach((i,s)=>{we(i,t,s)})}function we(e,t,o){const n=e.querySelector(".vimeo.activity"),i=e.querySelector("#titre-original");C.set(e,{isHovered:!1,isAnimating:!1,elements:{vimeo:n,titre:i}}),console.log(`üéØ Configuration du slide ${o}:`,{hasVimeo:!!n,hasTitreOriginal:!!i}),e.addEventListener("mouseenter",()=>{const s=C.get(e);if(!s.isHovered){if(console.log(`üé™ Survol du slide ${o}`),s.isHovered=!0,s.isAnimating=!0,w&&w!==e&&N(w),w=e,t.pause(),n&&window.gsap.killTweensOf(n),i&&window.gsap.killTweensOf(i),n&&(n.style.display="flex",window.gsap.to(n,{opacity:1,duration:.3,ease:"power2.out",onComplete:()=>{s.isAnimating=!1}})),i&&n){const r=i.dataset.originalColor||"#000000",a=ve(r)?"#000000":"#ffffff";window.gsap.to(i,{color:a,duration:.3,ease:"power2.out"})}n||(s.isAnimating=!1)}}),e.addEventListener("mouseleave",()=>{const s=C.get(e);s.isHovered&&(console.log(`üé™ Fin de survol du slide ${o}`),s.isHovered=!1,setTimeout(()=>{!e.matches(":hover")&&w===e&&(N(e),w=null,t.resume())},50))})}function N(e){const t=C.get(e);if(!t)return;const{vimeo:o,titre:n}=t.elements;if(o&&window.gsap.killTweensOf(o),n&&window.gsap.killTweensOf(n),t.isAnimating=!0,o&&window.gsap.to(o,{opacity:0,duration:.2,ease:"power2.out",onComplete:()=>{o.style.display="none",t.isAnimating=!1}}),n&&o){const i=n.dataset.originalColor||"#000000";window.gsap.to(n,{color:i,duration:.2,ease:"power2.out"})}t.isHovered=!1,o||(t.isAnimating=!1)}function ve(e){let t,o,n;if(e.startsWith("#")){const s=e.substring(1);t=parseInt(s.substring(0,2),16),o=parseInt(s.substring(2,4),16),n=parseInt(s.substring(4,6),16)}else if(e.startsWith("rgb")){const s=e.match(/\d+/g);t=parseInt(s[0]),o=parseInt(s[1]),n=parseInt(s[2])}else return!1;return(.299*t+.587*o+.114*n)/255>.5}console.log("üöÄ main_gsap.js v3.0.2 charg√©");function be(){console.log("‚úÖ GSAP est pr√™t. Initialisation des modules...");try{X(),te(),oe(),ce(),pe(),me(),new R().init();const e=window.location.pathname;(e==="/offres"||e==="/anniversaires"||e==="/anniversaire-enfant")&&(console.log(`-> Page ${e} d√©tect√©e. Initialisation du filtrage obligatoire...`),new F().init(),console.log("‚úÖ Module de filtrage obligatoire charg√© et initialis√©.")),(e==="/"||e==="/index"||e==="")&&(console.log("-> Page d'accueil d√©tect√©e. Initialisation de l'animation marquee..."),setTimeout(()=>{ge()},500)),de(),document.querySelector('[data-attribute="preselect-booking-button"]')&&(console.log("-> Bouton de pr√©s√©lection d√©tect√©. Initialisation du module."),ue()),console.log("‚ú® Tous les modules principaux ont √©t√© initialis√©s."),K()}catch(e){console.error("‚ùå Erreur lors de l'initialisation des modules. For√ßage du masquage du loader.",e),$()}}function Se(){V();let e=0;const t=100,n=setInterval(()=>{window.gsap?(clearInterval(n),be()):(e++,e>t&&(clearInterval(n),console.error("GSAP n'a pas pu √™tre charg√© apr√®s 10 secondes. Annulation de l'initialisation des modules."),$()))},100)}window.Webflow=window.Webflow||[],window.Webflow.push(function(){console.log("üöÄ Webflow est pr√™t, lancement de l'attente de GSAP."),Se()}),window.addEventListener("load",()=>{console.log("üé¨ La page est enti√®rement charg√©e. Initialisation des modules d√©pendants du contenu."),re(),Q()})})();
