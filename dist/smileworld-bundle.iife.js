(function(Bo){"use strict";/*!
 * matrix 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Te,Re,jt,Mt,at,It,Dt,lt,he="transform",Gt=he+"Origin",Li,Mi=function(e){var t=e.ownerDocument||e;for(!(he in e.style)&&("msTransform"in e.style)&&(he="msTransform",Gt=he+"Origin");t.parentNode&&(t=t.parentNode););if(Re=window,Dt=new Be,t){Te=t,jt=t.documentElement,Mt=t.body,lt=Te.createElementNS("http://www.w3.org/2000/svg","g"),lt.style.transform="none";var i=t.createElement("div"),n=t.createElement("div"),r=t&&(t.body||t.firstElementChild);r&&r.appendChild&&(r.appendChild(i),i.appendChild(n),i.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),Li=n.offsetParent!==i,r.removeChild(i))}return t},Wo=function(e){for(var t,i;e&&e!==Mt;)i=e._gsap,i&&i.uncache&&i.get(e,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),t?t.push(i):t=[i]),e=e.parentNode;return t},Ii=[],Di=[],Ho=function(){return Re.pageYOffset||Te.scrollTop||jt.scrollTop||Mt.scrollTop||0},Xo=function(){return Re.pageXOffset||Te.scrollLeft||jt.scrollLeft||Mt.scrollLeft||0},Ut=function(e){return e.ownerSVGElement||((e.tagName+"").toLowerCase()==="svg"?e:null)},zo=function s(e){if(Re.getComputedStyle(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return s(e)},Kt=function s(e,t){if(e.parentNode&&(Te||Mi(e))){var i=Ut(e),n=i?i.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",r=i?t?"rect":"g":"div",l=t!==2?0:100,a=t===3?100:0,u="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",d=Te.createElementNS?Te.createElementNS(n.replace(/^https/,"http"),r):Te.createElement(r);return t&&(i?(It||(It=s(e)),d.setAttribute("width",.01),d.setAttribute("height",.01),d.setAttribute("transform","translate("+l+","+a+")"),It.appendChild(d)):(at||(at=s(e),at.style.cssText=u),d.style.cssText=u+"width:0.1px;height:0.1px;top:"+a+"px;left:"+l+"px",at.appendChild(d))),d}throw"Need document and parent."},Yo=function(e){for(var t=new Be,i=0;i<e.numberOfItems;i++)t.multiply(e.getItem(i).matrix);return t},Vo=function(e){var t=e.getCTM(),i;return t||(i=e.style[he],e.style[he]="none",e.appendChild(lt),t=lt.getCTM(),e.removeChild(lt),i?e.style[he]=i:e.style.removeProperty(he.replace(/([A-Z])/g,"-$1").toLowerCase())),t||Dt.clone()},jo=function(e,t){var i=Ut(e),n=e===i,r=i?Ii:Di,l=e.parentNode,a=l&&!i&&l.shadowRoot&&l.shadowRoot.appendChild?l.shadowRoot:l,u,d,p,g,y,o;if(e===Re)return e;if(r.length||r.push(Kt(e,1),Kt(e,2),Kt(e,3)),u=i?It:at,i)n?(p=Vo(e),g=-p.e/p.a,y=-p.f/p.d,d=Dt):e.getBBox?(p=e.getBBox(),d=e.transform?e.transform.baseVal:{},d=d.numberOfItems?d.numberOfItems>1?Yo(d):d.getItem(0).matrix:Dt,g=d.a*p.x+d.c*p.y,y=d.b*p.x+d.d*p.y):(d=new Be,g=y=0),(n?i:l).appendChild(u),u.setAttribute("transform","matrix("+d.a+","+d.b+","+d.c+","+d.d+","+(d.e+g)+","+(d.f+y)+")");else{if(g=y=0,Li)for(d=e.offsetParent,p=e;p&&(p=p.parentNode)&&p!==d&&p.parentNode;)(Re.getComputedStyle(p)[he]+"").length>4&&(g=p.offsetLeft,y=p.offsetTop,p=0);if(o=Re.getComputedStyle(e),o.position!=="absolute"&&o.position!=="fixed")for(d=e.offsetParent;l&&l!==d;)g+=l.scrollLeft||0,y+=l.scrollTop||0,l=l.parentNode;p=u.style,p.top=e.offsetTop-y+"px",p.left=e.offsetLeft-g+"px",p[he]=o[he],p[Gt]=o[Gt],p.position=o.position==="fixed"?"fixed":"absolute",a.appendChild(u)}return u},Zt=function(e,t,i,n,r,l,a){return e.a=t,e.b=i,e.c=n,e.d=r,e.e=l,e.f=a,e},Be=function(){function s(t,i,n,r,l,a){t===void 0&&(t=1),i===void 0&&(i=0),n===void 0&&(n=0),r===void 0&&(r=1),l===void 0&&(l=0),a===void 0&&(a=0),Zt(this,t,i,n,r,l,a)}var e=s.prototype;return e.inverse=function(){var i=this.a,n=this.b,r=this.c,l=this.d,a=this.e,u=this.f,d=i*l-n*r||1e-10;return Zt(this,l/d,-n/d,-r/d,i/d,(r*u-l*a)/d,-(i*u-n*a)/d)},e.multiply=function(i){var n=this.a,r=this.b,l=this.c,a=this.d,u=this.e,d=this.f,p=i.a,g=i.c,y=i.b,o=i.d,v=i.e,w=i.f;return Zt(this,p*n+y*l,p*r+y*a,g*n+o*l,g*r+o*a,u+v*n+w*l,d+v*r+w*a)},e.clone=function(){return new s(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(i){var n=this.a,r=this.b,l=this.c,a=this.d,u=this.e,d=this.f;return n===i.a&&r===i.b&&l===i.c&&a===i.d&&u===i.e&&d===i.f},e.apply=function(i,n){n===void 0&&(n={});var r=i.x,l=i.y,a=this.a,u=this.b,d=this.c,p=this.d,g=this.e,y=this.f;return n.x=r*a+l*d+g||0,n.y=r*u+l*p+y||0,n},s}();function We(s,e,t,i){if(!s||!s.parentNode||(Te||Mi(s)).documentElement===s)return new Be;var n=Wo(s),r=Ut(s),l=r?Ii:Di,a=jo(s),u=l[0].getBoundingClientRect(),d=l[1].getBoundingClientRect(),p=l[2].getBoundingClientRect(),g=a.parentNode,y=zo(s),o=new Be((d.left-u.left)/100,(d.top-u.top)/100,(p.left-u.left)/100,(p.top-u.top)/100,u.left+(y?0:Xo()),u.top+(y?0:Ho()));if(g.removeChild(a),n)for(u=n.length;u--;)d=n[u],d.scaleX=d.scaleY=0,d.renderTransform(1,d);return e?o.inverse():o}function qi(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Go(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}var I,B,re,ge,Ee,Qt,Pe,Jt,ct,Me,Fi,ei,dt,ti,ut,me,ft,qt,$i,ii,Ft=0,Ni=function(){return typeof window<"u"},Oi=function(){return I||Ni()&&(I=window.gsap)&&I.registerPlugin&&I},Ie=function(e){return typeof e=="function"},pt=function(e){return typeof e=="object"},ye=function(e){return typeof e>"u"},$t=function(){return!1},ht="transform",oi="transformOrigin",De=function(e){return Math.round(e*1e4)/1e4},gt=Array.isArray,Nt=function(e,t){var i=re.createElementNS?re.createElementNS("http://www.w3.org/1999/xhtml".replace(/^https/,"http"),e):re.createElement(e);return i.style?i:re.createElement(e)},Ri=180/Math.PI,He=1e20,Uo=new Be,qe=Date.now||function(){return new Date().getTime()},Xe=[],Ke={},Ko=0,Zo=/^(?:a|input|textarea|button|select)$/i,Bi=0,Ze={},Ce={},Wi=function(e,t){var i={},n;for(n in e)i[n]=t?e[n]*t:e[n];return i},Qo=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},Hi=function s(e,t){for(var i=e.length,n;i--;)t?e[i].style.touchAction=t:e[i].style.removeProperty("touch-action"),n=e[i].children,n&&n.length&&s(n,t)},Xi=function(){return Xe.forEach(function(e){return e()})},Jo=function(e){Xe.push(e),Xe.length===1&&I.ticker.add(Xi)},zi=function(){return!Xe.length&&I.ticker.remove(Xi)},Yi=function(e){for(var t=Xe.length;t--;)Xe[t]===e&&Xe.splice(t,1);I.to(zi,{overwrite:!0,delay:15,duration:0,onComplete:zi,data:"_draggable"})},en=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},U=function(e,t,i,n){if(e.addEventListener){var r=dt[t];n=n||(Fi?{passive:!1}:null),e.addEventListener(r||t,i,n),r&&t!==r&&e.addEventListener(t,i,n)}},V=function(e,t,i,n){if(e.removeEventListener){var r=dt[t];e.removeEventListener(r||t,i,n),r&&t!==r&&e.removeEventListener(t,i,n)}},ce=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},tn=function(e,t){for(var i=e.length;i--;)if(e[i].identifier===t)return!0},on=function s(e){ti=e.touches&&Ft<e.touches.length,V(e.target,"touchend",s)},Vi=function(e){ti=e.touches&&Ft<e.touches.length,U(e.target,"touchend",on)},Qe=function(e){return B.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Je=function(e){return B.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},ji=function s(e,t){U(e,"scroll",t),et(e.parentNode)||s(e.parentNode,t)},Gi=function s(e,t){V(e,"scroll",t),et(e.parentNode)||s(e.parentNode,t)},et=function(e){return!e||e===ge||e.nodeType===9||e===re.body||e===B||!e.nodeType||!e.parentNode},Ui=function(e,t){var i=t==="x"?"Width":"Height",n="scroll"+i,r="client"+i;return Math.max(0,et(e)?Math.max(ge[n],Ee[n])-(B["inner"+i]||ge[r]||Ee[r]):e[n]-e[r])},ni=function s(e,t){var i=Ui(e,"x"),n=Ui(e,"y");et(e)?e=Ce:s(e.parentNode,t),e._gsMaxScrollX=i,e._gsMaxScrollY=n,t||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},si=function(e,t,i){var n=e.style;n&&(ye(n[t])&&(t=ct(t,e)||t),i==null?n.removeProperty&&n.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):n[t]=i)},mt=function(e){return B.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},ze={},tt=function(e){if(e===B)return ze.left=ze.top=0,ze.width=ze.right=ge.clientWidth||e.innerWidth||Ee.clientWidth||0,ze.height=ze.bottom=(e.innerHeight||0)-20<ge.clientHeight?ge.clientHeight:e.innerHeight||Ee.clientHeight||0,ze;var t=e.ownerDocument||re,i=ye(e.pageX)?!e.nodeType&&!ye(e.left)&&!ye(e.top)?e:Me(e)[0].getBoundingClientRect():{left:e.pageX-Je(t),top:e.pageY-Qe(t),right:e.pageX-Je(t)+1,bottom:e.pageY-Qe(t)+1};return ye(i.right)&&!ye(i.width)?(i.right=i.left+i.width,i.bottom=i.top+i.height):ye(i.width)&&(i={width:i.right-i.left,height:i.bottom-i.top,right:i.right,left:i.left,bottom:i.bottom,top:i.top}),i},z=function(e,t,i){var n=e.vars,r=n[i],l=e._listeners[t],a;return Ie(r)&&(a=r.apply(n.callbackScope||e,n[i+"Params"]||[e.pointerEvent])),l&&e.dispatchEvent(t)===!1&&(a=!1),a},Ki=function(e,t){var i=Me(e)[0],n,r,l;return!i.nodeType&&i!==B?ye(e.left)?(r=e.min||e.minX||e.minRotation||0,n=e.min||e.minY||0,{left:r,top:n,width:(e.max||e.maxX||e.maxRotation||0)-r,height:(e.max||e.maxY||0)-n}):(l={x:0,y:0},{left:e.left-l.x,top:e.top-l.y,width:e.width,height:e.height}):nn(i,t)},de={},nn=function(e,t){t=Me(t)[0];var i=e.getBBox&&e.ownerSVGElement,n=e.ownerDocument||re,r,l,a,u,d,p,g,y,o,v,w,E,C;if(e===B)a=Qe(n),r=Je(n),l=r+(n.documentElement.clientWidth||e.innerWidth||n.body.clientWidth||0),u=a+((e.innerHeight||0)-20<n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight||n.body.clientHeight||0);else{if(t===B||ye(t))return e.getBoundingClientRect();r=a=0,i?(v=e.getBBox(),w=v.width,E=v.height):(e.viewBox&&(v=e.viewBox.baseVal)&&(r=v.x||0,a=v.y||0,w=v.width,E=v.height),w||(C=mt(e),v=C.boxSizing==="border-box",w=(parseFloat(C.width)||e.clientWidth||0)+(v?0:parseFloat(C.borderLeftWidth)+parseFloat(C.borderRightWidth)),E=(parseFloat(C.height)||e.clientHeight||0)+(v?0:parseFloat(C.borderTopWidth)+parseFloat(C.borderBottomWidth)))),l=w,u=E}return e===t?{left:r,top:a,width:l-r,height:u-a}:(d=We(t,!0).multiply(We(e)),p=d.apply({x:r,y:a}),g=d.apply({x:l,y:a}),y=d.apply({x:l,y:u}),o=d.apply({x:r,y:u}),r=Math.min(p.x,g.x,y.x,o.x),a=Math.min(p.y,g.y,y.y,o.y),{left:r,top:a,width:Math.max(p.x,g.x,y.x,o.x)-r,height:Math.max(p.y,g.y,y.y,o.y)-a})},ri=function(e,t,i,n,r,l){var a={},u,d,p;if(t)if(r!==1&&t instanceof Array){if(a.end=u=[],p=t.length,pt(t[0]))for(d=0;d<p;d++)u[d]=Wi(t[d],r);else for(d=0;d<p;d++)u[d]=t[d]*r;i+=1.1,n-=1.1}else Ie(t)?a.end=function(g){var y=t.call(e,g),o,v;if(r!==1)if(pt(y)){o={};for(v in y)o[v]=y[v]*r;y=o}else y*=r;return y}:a.end=t;return(i||i===0)&&(a.max=i),(n||n===0)&&(a.min=n),l&&(a.velocity=0),a},sn=function s(e){var t;return!e||!e.getAttribute||e===Ee?!1:(t=e.getAttribute("data-clickable"))==="true"||t!=="false"&&(Zo.test(e.nodeName+"")||e.getAttribute("contentEditable")==="true")?!0:s(e.parentNode)},Ot=function(e,t){for(var i=e.length,n;i--;)n=e[i],n.ondragstart=n.onselectstart=t?null:$t,I.set(n,{lazy:!0,userSelect:t?"text":"none"})},rn=function s(e){if(mt(e).position==="fixed")return!0;if(e=e.parentNode,e&&e.nodeType===1)return s(e)},Zi,ai,an=function(e,t){e=I.utils.toArray(e)[0],t=t||{};var i=document.createElement("div"),n=i.style,r=e.firstChild,l=0,a=0,u=e.scrollTop,d=e.scrollLeft,p=e.scrollWidth,g=e.scrollHeight,y=0,o=0,v=0,w,E,C,M,D,P;Zi&&t.force3D!==!1?(D="translate3d(",P="px,0px)"):ht&&(D="translate(",P="px)"),this.scrollTop=function(x,W){if(!arguments.length)return-this.top();this.top(-x,W)},this.scrollLeft=function(x,W){if(!arguments.length)return-this.left();this.left(-x,W)},this.left=function(x,W){if(!arguments.length)return-(e.scrollLeft+a);var F=e.scrollLeft-d,_=a;if((F>2||F<-2)&&!W){d=e.scrollLeft,I.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-d),t.onKill&&t.onKill();return}x=-x,x<0?(a=x-.5|0,x=0):x>o?(a=x-o|0,x=o):a=0,(a||_)&&(this._skip||(n[ht]=D+-a+"px,"+-l+P),a+y>=0&&(n.paddingRight=a+y+"px")),e.scrollLeft=x|0,d=e.scrollLeft},this.top=function(x,W){if(!arguments.length)return-(e.scrollTop+l);var F=e.scrollTop-u,_=l;if((F>2||F<-2)&&!W){u=e.scrollTop,I.killTweensOf(this,{top:1,scrollTop:1}),this.top(-u),t.onKill&&t.onKill();return}x=-x,x<0?(l=x-.5|0,x=0):x>v?(l=x-v|0,x=v):l=0,(l||_)&&(this._skip||(n[ht]=D+-a+"px,"+-l+P)),e.scrollTop=x|0,u=e.scrollTop},this.maxScrollTop=function(){return v},this.maxScrollLeft=function(){return o},this.disable=function(){for(r=i.firstChild;r;)M=r.nextSibling,e.appendChild(r),r=M;e===i.parentNode&&e.removeChild(i)},this.enable=function(){if(r=e.firstChild,r!==i){for(;r;)M=r.nextSibling,i.appendChild(r),r=M;e.appendChild(i),this.calibrate()}},this.calibrate=function(x){var W=e.clientWidth===w,F,_,ne;u=e.scrollTop,d=e.scrollLeft,!(W&&e.clientHeight===E&&i.offsetHeight===C&&p===e.scrollWidth&&g===e.scrollHeight&&!x)&&((l||a)&&(_=this.left(),ne=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),F=mt(e),(!W||x)&&(n.display="block",n.width="auto",n.paddingRight="0px",y=Math.max(0,e.scrollWidth-e.clientWidth),y&&(y+=parseFloat(F.paddingLeft)+(ai?parseFloat(F.paddingRight):0))),n.display="inline-block",n.position="relative",n.overflow="visible",n.verticalAlign="top",n.boxSizing="content-box",n.width="100%",n.paddingRight=y+"px",ai&&(n.paddingBottom=F.paddingBottom),w=e.clientWidth,E=e.clientHeight,p=e.scrollWidth,g=e.scrollHeight,o=e.scrollWidth-w,v=e.scrollHeight-E,C=i.offsetHeight,n.display="block",(_||ne)&&(this.left(_),this.top(ne)))},this.content=i,this.element=e,this._skip=!1,this.enable()},li=function(e){if(Ni()&&document.body){var t=window&&window.navigator;B=window,re=document,ge=re.documentElement,Ee=re.body,Qt=Nt("div"),qt=!!window.PointerEvent,Pe=Nt("div"),Pe.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",ft=Pe.style.cursor==="grab"?"grab":"move",ut=t&&t.userAgent.toLowerCase().indexOf("android")!==-1,ei="ontouchstart"in ge&&"orientation"in B||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),ai=function(){var i=Nt("div"),n=Nt("div"),r=n.style,l=Ee,a;return r.display="inline-block",r.position="relative",i.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",i.appendChild(n),l.appendChild(i),a=n.offsetHeight+18>i.scrollHeight,l.removeChild(i),a}(),dt=function(i){for(var n=i.split(","),r=("onpointerdown"in Qt?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in Qt?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":i).split(","),l={},a=4;--a>-1;)l[n[a]]=r[a],l[r[a]]=n[a];try{ge.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Fi=1}}))}catch{}return l}("touchstart,touchmove,touchend,touchcancel"),U(re,"touchcancel",$t),U(B,"touchmove",$t),Ee&&Ee.addEventListener("touchstart",$t),U(re,"contextmenu",function(){for(var i in Ke)Ke[i].isPressed&&Ke[i].endDrag()}),I=Jt=Oi()}I?(me=I.plugins.inertia,$i=I.core.context||function(){},ct=I.utils.checkPrefix,ht=ct(ht),oi=ct(oi),Me=I.utils.toArray,ii=I.core.getStyleSaver,Zi=!!ct("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},ln=function(){function s(t){this._listeners={},this.target=t||this}var e=s.prototype;return e.addEventListener=function(i,n){var r=this._listeners[i]||(this._listeners[i]=[]);~r.indexOf(n)||r.push(n)},e.removeEventListener=function(i,n){var r=this._listeners[i],l=r&&r.indexOf(n);l>=0&&r.splice(l,1)},e.dispatchEvent=function(i){var n=this,r;return(this._listeners[i]||[]).forEach(function(l){return l.call(n,{type:i,target:n.target})===!1&&(r=!1)}),r},s}(),yt=function(s){Go(e,s);function e(t,i){var n;n=s.call(this)||this,Jt||li(1),t=Me(t)[0],n.styles=ii&&ii(t,"transform,left,top"),me||(me=I.plugins.inertia),n.vars=i=Wi(i||{}),n.target=t,n.x=n.y=n.rotation=0,n.dragResistance=parseFloat(i.dragResistance)||0,n.edgeResistance=isNaN(i.edgeResistance)?1:parseFloat(i.edgeResistance)||0,n.lockAxis=i.lockAxis,n.autoScroll=i.autoScroll||0,n.lockedAxis=null,n.allowEventDefault=!!i.allowEventDefault,I.getProperty(t,"x");var r=(i.type||"x,y").toLowerCase(),l=~r.indexOf("x")||~r.indexOf("y"),a=r.indexOf("rotation")!==-1,u=a?"rotation":l?"x":"left",d=l?"y":"top",p=!!(~r.indexOf("x")||~r.indexOf("left")||r==="scroll"),g=!!(~r.indexOf("y")||~r.indexOf("top")||r==="scroll"),y=i.minimumMovement||2,o=qi(n),v=Me(i.trigger||i.handle||t),w={},E=0,C=!1,M=i.autoScrollMarginTop||40,D=i.autoScrollMarginRight||40,P=i.autoScrollMarginBottom||40,x=i.autoScrollMarginLeft||40,W=i.clickableTest||sn,F=0,_=t._gsap||I.core.getCache(t),ne=rn(t),J=function(c,h){return parseFloat(_.get(t,c,h))},$=t.ownerDocument||re,Ae,A,_e,xe,te,Z,Ve,Mo,Io,X,H,Q,j,Xt,ue,Et,ee,xi,$e,Ne,je,Pt,ie,N,Do,fe,ve,ki,Ti,qo,le,Fo,zt,$o=function(c){return ce(c),c.stopImmediatePropagation&&c.stopImmediatePropagation(),!1},ke=function T(c){if(o.autoScroll&&o.isDragging&&(C||ee)){var h=t,f=o.autoScroll*15,m,b,S,L,k,O,q,R;for(C=!1,Ce.scrollTop=B.pageYOffset!=null?B.pageYOffset:$.documentElement.scrollTop!=null?$.documentElement.scrollTop:$.body.scrollTop,Ce.scrollLeft=B.pageXOffset!=null?B.pageXOffset:$.documentElement.scrollLeft!=null?$.documentElement.scrollLeft:$.body.scrollLeft,L=o.pointerX-Ce.scrollLeft,k=o.pointerY-Ce.scrollTop;h&&!b;)b=et(h.parentNode),m=b?Ce:h.parentNode,S=b?{bottom:Math.max(ge.clientHeight,B.innerHeight||0),right:Math.max(ge.clientWidth,B.innerWidth||0),left:0,top:0}:m.getBoundingClientRect(),O=q=0,g&&(R=m._gsMaxScrollY-m.scrollTop,R<0?q=R:k>S.bottom-P&&R?(C=!0,q=Math.min(R,f*(1-Math.max(0,S.bottom-k)/P)|0)):k<S.top+M&&m.scrollTop&&(C=!0,q=-Math.min(m.scrollTop,f*(1-Math.max(0,k-S.top)/M)|0)),q&&(m.scrollTop+=q)),p&&(R=m._gsMaxScrollX-m.scrollLeft,R<0?O=R:L>S.right-D&&R?(C=!0,O=Math.min(R,f*(1-Math.max(0,S.right-L)/D)|0)):L<S.left+x&&m.scrollLeft&&(C=!0,O=-Math.min(m.scrollLeft,f*(1-Math.max(0,L-S.left)/x)|0)),O&&(m.scrollLeft+=O)),b&&(O||q)&&(B.scrollTo(m.scrollLeft,m.scrollTop),Lt(o.pointerX+O,o.pointerY+q)),h=m}if(ee){var Y=o.x,se=o.y;a?(o.deltaX=Y-parseFloat(_.rotation),o.rotation=Y,_.rotation=Y+"deg",_.renderTransform(1,_)):A?(g&&(o.deltaY=se-A.top(),A.top(se)),p&&(o.deltaX=Y-A.left(),A.left(Y))):l?(g&&(o.deltaY=se-parseFloat(_.y),_.y=se+"px"),p&&(o.deltaX=Y-parseFloat(_.x),_.x=Y+"px"),_.renderTransform(1,_)):(g&&(o.deltaY=se-parseFloat(t.style.top||0),t.style.top=se+"px"),p&&(o.deltaX=Y-parseFloat(t.style.left||0),t.style.left=Y+"px")),Mo&&!c&&!ki&&(ki=!0,z(o,"drag","onDrag")===!1&&(p&&(o.x-=o.deltaX),g&&(o.y-=o.deltaY),T(!0)),ki=!1)}ee=!1},Ge=function(c,h){var f=o.x,m=o.y,b,S;t._gsap||(_=I.core.getCache(t)),_.uncache&&I.getProperty(t,"x"),l?(o.x=parseFloat(_.x),o.y=parseFloat(_.y)):a?o.x=o.rotation=parseFloat(_.rotation):A?(o.y=A.top(),o.x=A.left()):(o.y=parseFloat(t.style.top||(S=mt(t))&&S.top)||0,o.x=parseFloat(t.style.left||(S||{}).left)||0),($e||Ne||je)&&!h&&(o.isDragging||o.isThrowing)&&(je&&(Ze.x=o.x,Ze.y=o.y,b=je(Ze),b.x!==o.x&&(o.x=b.x,ee=!0),b.y!==o.y&&(o.y=b.y,ee=!0)),$e&&(b=$e(o.x),b!==o.x&&(o.x=b,a&&(o.rotation=b),ee=!0)),Ne&&(b=Ne(o.y),b!==o.y&&(o.y=b),ee=!0)),ee&&ke(!0),c||(o.deltaX=o.x-f,o.deltaY=o.y-m,z(o,"throwupdate","onThrowUpdate"))},Ei=function(c,h,f,m){return h==null&&(h=-He),f==null&&(f=He),Ie(c)?function(b){var S=o.isPressed?1-o.edgeResistance:1;return c.call(o,(b>f?f+(b-f)*S:b<h?h+(b-h)*S:b)*m)*m}:gt(c)?function(b){for(var S=c.length,L=0,k=He,O,q;--S>-1;)O=c[S],q=O-b,q<0&&(q=-q),q<k&&O>=h&&O<=f&&(L=S,k=q);return c[L]}:isNaN(c)?function(b){return b}:function(){return c*m}},Qn=function(c,h,f,m,b,S,L){return S=S&&S<He?S*S:He,Ie(c)?function(k){var O=o.isPressed?1-o.edgeResistance:1,q=k.x,R=k.y,Y,se,Le;return k.x=q=q>f?f+(q-f)*O:q<h?h+(q-h)*O:q,k.y=R=R>b?b+(R-b)*O:R<m?m+(R-m)*O:R,Y=c.call(o,k),Y!==k&&(k.x=Y.x,k.y=Y.y),L!==1&&(k.x*=L,k.y*=L),S<He&&(se=k.x-q,Le=k.y-R,se*se+Le*Le>S&&(k.x=q,k.y=R)),k}:gt(c)?function(k){for(var O=c.length,q=0,R=He,Y,se,Le,pe;--O>-1;)Le=c[O],Y=Le.x-k.x,se=Le.y-k.y,pe=Y*Y+se*se,pe<R&&(q=O,R=pe);return R<=S?c[q]:k}:function(k){return k}},Pi=function(){var c,h,f,m;Ve=!1,A?(A.calibrate(),o.minX=H=-A.maxScrollLeft(),o.minY=j=-A.maxScrollTop(),o.maxX=X=o.maxY=Q=0,Ve=!0):i.bounds&&(c=Ki(i.bounds,t.parentNode),a?(o.minX=H=c.left,o.maxX=X=c.left+c.width,o.minY=j=o.maxY=Q=0):!ye(i.bounds.maxX)||!ye(i.bounds.maxY)?(c=i.bounds,o.minX=H=c.minX,o.minY=j=c.minY,o.maxX=X=c.maxX,o.maxY=Q=c.maxY):(h=Ki(t,t.parentNode),o.minX=H=Math.round(J(u,"px")+c.left-h.left),o.minY=j=Math.round(J(d,"px")+c.top-h.top),o.maxX=X=Math.round(H+(c.width-h.width)),o.maxY=Q=Math.round(j+(c.height-h.height))),H>X&&(o.minX=X,o.maxX=X=H,H=o.minX),j>Q&&(o.minY=Q,o.maxY=Q=j,j=o.minY),a&&(o.minRotation=H,o.maxRotation=X),Ve=!0),i.liveSnap&&(f=i.liveSnap===!0?i.snap||{}:i.liveSnap,m=gt(f)||Ie(f),a?($e=Ei(m?f:f.rotation,H,X,1),Ne=null):f.points?je=Qn(m?f:f.points,H,X,j,Q,f.radius,A?-1:1):(p&&($e=Ei(m?f:f.x||f.left||f.scrollLeft,H,X,A?-1:1)),g&&(Ne=Ei(m?f:f.y||f.top||f.scrollTop,j,Q,A?-1:1))))},Jn=function(){o.isThrowing=!1,z(o,"throwcomplete","onThrowComplete")},es=function(){o.isThrowing=!1},Ci=function(c,h){var f,m,b,S;c&&me?(c===!0&&(f=i.snap||i.liveSnap||{},m=gt(f)||Ie(f),c={resistance:(i.throwResistance||i.resistance||1e3)/(a?10:1)},a?c.rotation=ri(o,m?f:f.rotation,X,H,1,h):(p&&(c[u]=ri(o,m?f:f.points||f.x||f.left,X,H,A?-1:1,h||o.lockedAxis==="x")),g&&(c[d]=ri(o,m?f:f.points||f.y||f.top,Q,j,A?-1:1,h||o.lockedAxis==="y")),(f.points||gt(f)&&pt(f[0]))&&(c.linkedProps=u+","+d,c.radius=f.radius))),o.isThrowing=!0,S=isNaN(i.overshootTolerance)?i.edgeResistance===1?0:1-o.edgeResistance+.2:i.overshootTolerance,c.duration||(c.duration={max:Math.max(i.minDuration||0,"maxDuration"in i?i.maxDuration:2),min:isNaN(i.minDuration)?S===0||pt(c)&&c.resistance>1e3?0:.5:i.minDuration,overshoot:S}),o.tween=b=I.to(A||t,{inertia:c,data:"_draggable",inherit:!1,onComplete:Jn,onInterrupt:es,onUpdate:i.fastMode?z:Ge,onUpdateParams:i.fastMode?[o,"onthrowupdate","onThrowUpdate"]:f&&f.radius?[!1,!0]:[]}),i.fastMode||(A&&(A._skip=!0),b.render(1e9,!0,!0),Ge(!0,!0),o.endX=o.x,o.endY=o.y,a&&(o.endRotation=o.x),b.play(0),Ge(!0,!0),A&&(A._skip=!1))):Ve&&o.applyBounds()},No=function(c){var h=N,f;N=We(t.parentNode,!0),c&&o.isPressed&&!N.equals(h||new Be)&&(f=h.inverse().apply({x:_e,y:xe}),N.apply(f,f),_e=f.x,xe=f.y),N.equals(Uo)&&(N=null)},Yt=function(){var c=1-o.edgeResistance,h=ne?Je($):0,f=ne?Qe($):0,m,b,S;l&&(_.x=J(u,"px")+"px",_.y=J(d,"px")+"px",_.renderTransform()),No(!1),de.x=o.pointerX-h,de.y=o.pointerY-f,N&&N.apply(de,de),_e=de.x,xe=de.y,ee&&(Lt(o.pointerX,o.pointerY),ke(!0)),Fo=We(t),A?(Pi(),Z=A.top(),te=A.left()):(Ct()?(Ge(!0,!0),Pi()):o.applyBounds(),a?(m=t.ownerSVGElement?[_.xOrigin-t.getBBox().x,_.yOrigin-t.getBBox().y]:(mt(t)[oi]||"0 0").split(" "),Et=o.rotationOrigin=We(t).apply({x:parseFloat(m[0])||0,y:parseFloat(m[1])||0}),Ge(!0,!0),b=o.pointerX-Et.x-h,S=Et.y-o.pointerY+f,te=o.x,Z=o.y=Math.atan2(S,b)*Ri):(Z=J(d,"px"),te=J(u,"px"))),Ve&&c&&(te>X?te=X+(te-X)/c:te<H&&(te=H-(H-te)/c),a||(Z>Q?Z=Q+(Z-Q)/c:Z<j&&(Z=j-(j-Z)/c))),o.startX=te=De(te),o.startY=Z=De(Z)},Ct=function(){return o.tween&&o.tween.isActive()},ts=function(){Pe.parentNode&&!Ct()&&!o.isDragging&&Pe.parentNode.removeChild(Pe)},At=function(c,h){var f;if(!Ae||o.isPressed||!c||(c.type==="mousedown"||c.type==="pointerdown")&&!h&&qe()-F<30&&dt[o.pointerEvent.type]){le&&c&&Ae&&ce(c);return}if(Do=Ct(),zt=!1,o.pointerEvent=c,dt[c.type]?(ie=~c.type.indexOf("touch")?c.currentTarget||c.target:$,U(ie,"touchend",we),U(ie,"touchmove",Ue),U(ie,"touchcancel",we),U($,"touchstart",Vi)):(ie=null,U($,"mousemove",Ue)),ve=null,(!qt||!ie)&&(U($,"mouseup",we),c&&c.target&&U(c.target,"mouseup",we)),Pt=W.call(o,c.target)&&i.dragClickables===!1&&!h,Pt){U(c.target,"change",we),z(o,"pressInit","onPressInit"),z(o,"press","onPress"),Ot(v,!0),le=!1;return}if(fe=!ie||p===g||o.vars.allowNativeTouchScrolling===!1||o.vars.allowContextMenu&&c&&(c.ctrlKey||c.which>2)?!1:p?"y":"x",le=!fe&&!o.allowEventDefault,le&&(ce(c),U(B,"touchforcechange",ce)),c.changedTouches?(c=Xt=c.changedTouches[0],ue=c.identifier):c.pointerId?ue=c.pointerId:Xt=ue=null,Ft++,Jo(ke),xe=o.pointerY=c.pageY,_e=o.pointerX=c.pageX,z(o,"pressInit","onPressInit"),(fe||o.autoScroll)&&ni(t.parentNode),t.parentNode&&o.autoScroll&&!A&&!a&&t.parentNode._gsMaxScrollX&&!Pe.parentNode&&!t.getBBox&&(Pe.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(Pe)),Yt(),o.tween&&o.tween.kill(),o.isThrowing=!1,I.killTweensOf(A||t,w,!0),A&&I.killTweensOf(t,{scrollTo:1},!0),o.tween=o.lockedAxis=null,(i.zIndexBoost||!a&&!A&&i.zIndexBoost!==!1)&&(t.style.zIndex=e.zIndex++),o.isPressed=!0,Mo=!!(i.onDrag||o._listeners.drag),Io=!!(i.onMove||o._listeners.move),i.cursor!==!1||i.activeCursor)for(f=v.length;--f>-1;)I.set(v[f],{cursor:i.activeCursor||i.cursor||(ft==="grab"?"grabbing":ft)});z(o,"press","onPress")},Ue=function(c){var h=c,f,m,b,S,L,k;if(!Ae||ti||!o.isPressed||!c){le&&c&&Ae&&ce(c);return}if(o.pointerEvent=c,f=c.changedTouches,f){if(c=f[0],c!==Xt&&c.identifier!==ue){for(S=f.length;--S>-1&&(c=f[S]).identifier!==ue&&c.target!==t;);if(S<0)return}}else if(c.pointerId&&ue&&c.pointerId!==ue)return;if(ie&&fe&&!ve&&(de.x=c.pageX-(ne?Je($):0),de.y=c.pageY-(ne?Qe($):0),N&&N.apply(de,de),m=de.x,b=de.y,L=Math.abs(m-_e),k=Math.abs(b-xe),(L!==k&&(L>y||k>y)||ut&&fe===ve)&&(ve=L>k&&p?"x":"y",fe&&ve!==fe&&U(B,"touchforcechange",ce),o.vars.lockAxisOnTouchScroll!==!1&&p&&g&&(o.lockedAxis=ve==="x"?"y":"x",Ie(o.vars.onLockAxis)&&o.vars.onLockAxis.call(o,h)),ut&&fe===ve))){we(h);return}!o.allowEventDefault&&(!fe||ve&&fe!==ve)&&h.cancelable!==!1?(ce(h),le=!0):le&&(le=!1),o.autoScroll&&(C=!0),Lt(c.pageX,c.pageY,Io)},Lt=function(c,h,f){var m=1-o.dragResistance,b=1-o.edgeResistance,S=o.pointerX,L=o.pointerY,k=Z,O=o.x,q=o.y,R=o.endX,Y=o.endY,se=o.endRotation,Le=ee,pe,Oe,oe,G,Ai,be;o.pointerX=c,o.pointerY=h,ne&&(c-=Je($),h-=Qe($)),a?(G=Math.atan2(Et.y-h,c-Et.x)*Ri,Ai=o.y-G,Ai>180?(Z-=360,o.y=G):Ai<-180&&(Z+=360,o.y=G),o.x!==te||Math.max(Math.abs(_e-c),Math.abs(xe-h))>y?(o.y=G,oe=te+(Z-G)*m):oe=te):(N&&(be=c*N.a+h*N.c+N.e,h=c*N.b+h*N.d+N.f,c=be),Oe=h-xe,pe=c-_e,Oe<y&&Oe>-y&&(Oe=0),pe<y&&pe>-y&&(pe=0),(o.lockAxis||o.lockedAxis)&&(pe||Oe)&&(be=o.lockedAxis,be||(o.lockedAxis=be=p&&Math.abs(pe)>Math.abs(Oe)?"y":g?"x":null,be&&Ie(o.vars.onLockAxis)&&o.vars.onLockAxis.call(o,o.pointerEvent)),be==="y"?Oe=0:be==="x"&&(pe=0)),oe=De(te+pe*m),G=De(Z+Oe*m)),($e||Ne||je)&&(o.x!==oe||o.y!==G&&!a)&&(je&&(Ze.x=oe,Ze.y=G,be=je(Ze),oe=De(be.x),G=De(be.y)),$e&&(oe=De($e(oe))),Ne&&(G=De(Ne(G)))),Ve&&(oe>X?oe=X+Math.round((oe-X)*b):oe<H&&(oe=H+Math.round((oe-H)*b)),a||(G>Q?G=Math.round(Q+(G-Q)*b):G<j&&(G=Math.round(j+(G-j)*b)))),(o.x!==oe||o.y!==G&&!a)&&(a?(o.endRotation=o.x=o.endX=oe,ee=!0):(g&&(o.y=o.endY=G,ee=!0),p&&(o.x=o.endX=oe,ee=!0)),!f||z(o,"move","onMove")!==!1?!o.isDragging&&o.isPressed&&(o.isDragging=zt=!0,z(o,"dragstart","onDragStart")):(o.pointerX=S,o.pointerY=L,Z=k,o.x=O,o.y=q,o.endX=R,o.endY=Y,o.endRotation=se,ee=Le))},we=function T(c,h){if(!Ae||!o.isPressed||c&&ue!=null&&!h&&(c.pointerId&&c.pointerId!==ue&&c.target!==t||c.changedTouches&&!tn(c.changedTouches,ue))){le&&c&&Ae&&ce(c);return}o.isPressed=!1;var f=c,m=o.isDragging,b=o.vars.allowContextMenu&&c&&(c.ctrlKey||c.which>2),S=I.delayedCall(.001,ts),L,k,O,q,R;if(ie?(V(ie,"touchend",T),V(ie,"touchmove",Ue),V(ie,"touchcancel",T),V($,"touchstart",Vi)):V($,"mousemove",Ue),V(B,"touchforcechange",ce),(!qt||!ie)&&(V($,"mouseup",T),c&&c.target&&V(c.target,"mouseup",T)),ee=!1,m&&(E=Bi=qe(),o.isDragging=!1),Yi(ke),Pt&&!b){c&&(V(c.target,"change",T),o.pointerEvent=f),Ot(v,!1),z(o,"release","onRelease"),z(o,"click","onClick"),Pt=!1;return}for(k=v.length;--k>-1;)si(v[k],"cursor",i.cursor||(i.cursor!==!1?ft:null));if(Ft--,c){if(L=c.changedTouches,L&&(c=L[0],c!==Xt&&c.identifier!==ue)){for(k=L.length;--k>-1&&(c=L[k]).identifier!==ue&&c.target!==t;);if(k<0&&!h)return}o.pointerEvent=f,o.pointerX=c.pageX,o.pointerY=c.pageY}return b&&f?(ce(f),le=!0,z(o,"release","onRelease")):f&&!m?(le=!1,Do&&(i.snap||i.bounds)&&Ci(i.inertia||i.throwProps),z(o,"release","onRelease"),(!ut||f.type!=="touchmove")&&f.type.indexOf("cancel")===-1&&(z(o,"click","onClick"),qe()-F<300&&z(o,"doubleclick","onDoubleClick"),q=f.target||t,F=qe(),R=function(){F!==Ti&&o.enabled()&&!o.isPressed&&!f.defaultPrevented&&(q.click?q.click():$.createEvent&&(O=$.createEvent("MouseEvents"),O.initMouseEvent("click",!0,!0,B,1,o.pointerEvent.screenX,o.pointerEvent.screenY,o.pointerX,o.pointerY,!1,!1,!1,!1,0,null),q.dispatchEvent(O)))},!ut&&!f.defaultPrevented&&I.delayedCall(.05,R))):(Ci(i.inertia||i.throwProps),!o.allowEventDefault&&f&&(i.dragClickables!==!1||!W.call(o,f.target))&&m&&(!fe||ve&&fe===ve)&&f.cancelable!==!1?(le=!0,ce(f)):le=!1,z(o,"release","onRelease")),Ct()&&S.duration(o.tween.duration()),m&&z(o,"dragend","onDragEnd"),!0},Vt=function(c){if(c&&o.isDragging&&!A){var h=c.target||t.parentNode,f=h.scrollLeft-h._gsScrollX,m=h.scrollTop-h._gsScrollY;(f||m)&&(N?(_e-=f*N.a+m*N.c,xe-=m*N.d+f*N.b):(_e-=f,xe-=m),h._gsScrollX+=f,h._gsScrollY+=m,Lt(o.pointerX,o.pointerY))}},Oo=function(c){var h=qe(),f=h-F<100,m=h-E<50,b=f&&Ti===F,S=o.pointerEvent&&o.pointerEvent.defaultPrevented,L=f&&qo===F,k=c.isTrusted||c.isTrusted==null&&f&&b;if((b||m&&o.vars.suppressClickOnDrag!==!1)&&c.stopImmediatePropagation&&c.stopImmediatePropagation(),f&&!(o.pointerEvent&&o.pointerEvent.defaultPrevented)&&(!b||k&&!L)){k&&b&&(qo=F),Ti=F;return}(o.isPressed||m||f)&&(!k||!c.detail||!f||S)&&ce(c),!f&&!m&&!zt&&(c&&c.target&&(o.pointerEvent=c),z(o,"click","onClick"))},Ro=function(c){return N?{x:c.x*N.a+c.y*N.c+N.e,y:c.x*N.b+c.y*N.d+N.f}:{x:c.x,y:c.y}};return xi=e.get(t),xi&&xi.kill(),n.startDrag=function(T,c){var h,f,m,b;At(T||o.pointerEvent,!0),c&&!o.hitTest(T||o.pointerEvent)&&(h=tt(T||o.pointerEvent),f=tt(t),m=Ro({x:h.left+h.width/2,y:h.top+h.height/2}),b=Ro({x:f.left+f.width/2,y:f.top+f.height/2}),_e-=m.x-b.x,xe-=m.y-b.y),o.isDragging||(o.isDragging=zt=!0,z(o,"dragstart","onDragStart"))},n.drag=Ue,n.endDrag=function(T){return we(T||o.pointerEvent,!0)},n.timeSinceDrag=function(){return o.isDragging?0:(qe()-E)/1e3},n.timeSinceClick=function(){return(qe()-F)/1e3},n.hitTest=function(T,c){return e.hitTest(o.target,T,c)},n.getDirection=function(T,c){var h=T==="velocity"&&me?T:pt(T)&&!a?"element":"start",f,m,b,S,L,k;return h==="element"&&(L=tt(o.target),k=tt(T)),f=h==="start"?o.x-te:h==="velocity"?me.getVelocity(t,u):L.left+L.width/2-(k.left+k.width/2),a?f<0?"counter-clockwise":"clockwise":(c=c||2,m=h==="start"?o.y-Z:h==="velocity"?me.getVelocity(t,d):L.top+L.height/2-(k.top+k.height/2),b=Math.abs(f/m),S=b<1/c?"":f<0?"left":"right",b<c&&(S!==""&&(S+="-"),S+=m<0?"up":"down"),S)},n.applyBounds=function(T,c){var h,f,m,b,S,L;if(T&&i.bounds!==T)return i.bounds=T,o.update(!0,c);if(Ge(!0),Pi(),Ve&&!Ct()){if(h=o.x,f=o.y,h>X?h=X:h<H&&(h=H),f>Q?f=Q:f<j&&(f=j),(o.x!==h||o.y!==f)&&(m=!0,o.x=o.endX=h,a?o.endRotation=h:o.y=o.endY=f,ee=!0,ke(!0),o.autoScroll&&!o.isDragging))for(ni(t.parentNode),b=t,Ce.scrollTop=B.pageYOffset!=null?B.pageYOffset:$.documentElement.scrollTop!=null?$.documentElement.scrollTop:$.body.scrollTop,Ce.scrollLeft=B.pageXOffset!=null?B.pageXOffset:$.documentElement.scrollLeft!=null?$.documentElement.scrollLeft:$.body.scrollLeft;b&&!L;)L=et(b.parentNode),S=L?Ce:b.parentNode,g&&S.scrollTop>S._gsMaxScrollY&&(S.scrollTop=S._gsMaxScrollY),p&&S.scrollLeft>S._gsMaxScrollX&&(S.scrollLeft=S._gsMaxScrollX),b=S;o.isThrowing&&(m||o.endX>X||o.endX<H||o.endY>Q||o.endY<j)&&Ci(i.inertia||i.throwProps,m)}return o},n.update=function(T,c,h){if(c&&o.isPressed){var f=We(t),m=Fo.apply({x:o.x-te,y:o.y-Z}),b=We(t.parentNode,!0);b.apply({x:f.e-m.x,y:f.f-m.y},m),o.x-=m.x-b.e,o.y-=m.y-b.f,ke(!0),Yt()}var S=o.x,L=o.y;return No(!c),T?o.applyBounds():(ee&&h&&ke(!0),Ge(!0)),c&&(Lt(o.pointerX,o.pointerY),ee&&ke(!0)),o.isPressed&&!c&&(p&&Math.abs(S-o.x)>.01||g&&Math.abs(L-o.y)>.01&&!a)&&Yt(),o.autoScroll&&(ni(t.parentNode,o.isDragging),C=o.isDragging,ke(!0),Gi(t,Vt),ji(t,Vt)),o},n.enable=function(T){var c={lazy:!0},h,f,m;if(i.cursor!==!1&&(c.cursor=i.cursor||ft),I.utils.checkPrefix("touchCallout")&&(c.touchCallout="none"),T!=="soft"){for(Hi(v,p===g?"none":i.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||i.allowEventDefault?"manipulation":p?"pan-y":"pan-x"),f=v.length;--f>-1;)m=v[f],qt||U(m,"mousedown",At),U(m,"touchstart",At),U(m,"click",Oo,!0),I.set(m,c),m.getBBox&&m.ownerSVGElement&&p!==g&&I.set(m.ownerSVGElement,{touchAction:i.allowNativeTouchScrolling||i.allowEventDefault?"manipulation":p?"pan-y":"pan-x"}),i.allowContextMenu||U(m,"contextmenu",$o);Ot(v,!1)}return ji(t,Vt),Ae=!0,me&&T!=="soft"&&me.track(A||t,l?"x,y":a?"rotation":"top,left"),t._gsDragID=h=t._gsDragID||"d"+Ko++,Ke[h]=o,A&&(A.enable(),A.element._gsDragID=h),(i.bounds||a)&&Yt(),i.bounds&&o.applyBounds(),o},n.disable=function(T){for(var c=o.isDragging,h=v.length,f;--h>-1;)si(v[h],"cursor",null);if(T!=="soft"){for(Hi(v,null),h=v.length;--h>-1;)f=v[h],si(f,"touchCallout",null),V(f,"mousedown",At),V(f,"touchstart",At),V(f,"click",Oo,!0),V(f,"contextmenu",$o);Ot(v,!0),ie&&(V(ie,"touchcancel",we),V(ie,"touchend",we),V(ie,"touchmove",Ue)),V($,"mouseup",we),V($,"mousemove",Ue)}return Gi(t,Vt),Ae=!1,me&&T!=="soft"&&(me.untrack(A||t,l?"x,y":a?"rotation":"top,left"),o.tween&&o.tween.kill()),A&&A.disable(),Yi(ke),o.isDragging=o.isPressed=Pt=!1,c&&z(o,"dragend","onDragEnd"),o},n.enabled=function(T,c){return arguments.length?T?o.enable(c):o.disable(c):Ae},n.kill=function(){return o.isThrowing=!1,o.tween&&o.tween.kill(),o.disable(),I.set(v,{clearProps:"userSelect"}),delete Ke[t._gsDragID],o},n.revert=function(){this.kill(),this.styles&&this.styles.revert()},~r.indexOf("scroll")&&(A=n.scrollProxy=new an(t,Qo({onKill:function(){o.isPressed&&we(null)}},i)),t.style.overflowY=g&&!ei?"auto":"hidden",t.style.overflowX=p&&!ei?"auto":"hidden",t=A.content),a?w.rotation=1:(p&&(w[u]=1),g&&(w[d]=1)),_.force3D="force3D"in i?i.force3D:!0,$i(qi(n)),n.enable(),n}return e.register=function(i){I=i,li()},e.create=function(i,n){return Jt||li(!0),Me(i).map(function(r){return new e(r,n)})},e.get=function(i){return Ke[(Me(i)[0]||{})._gsDragID]},e.timeSinceDrag=function(){return(qe()-Bi)/1e3},e.hitTest=function(i,n,r){if(i===n)return!1;var l=tt(i),a=tt(n),u=l.top,d=l.left,p=l.right,g=l.bottom,y=l.width,o=l.height,v=a.left>p||a.right<d||a.top>g||a.bottom<u,w,E,C;return v||!r?!v:(C=(r+"").indexOf("%")!==-1,r=parseFloat(r)||0,w={left:Math.max(d,a.left),top:Math.max(u,a.top)},w.width=Math.min(p,a.right)-w.left,w.height=Math.min(g,a.bottom)-w.top,w.width<0||w.height<0?!1:C?(r*=.01,E=w.width*w.height,E>=y*o*r||E>=a.width*a.height*r):w.width>r&&w.height>r)},e}(ln);en(yt.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),yt.zIndex=1e3,yt.version="3.13.0",Oi()&&I.registerPlugin(yt);/*!
 * VelocityTracker: 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Se,ci,vt,Qi,it,ot,di,Ji,eo=function(){return Se||typeof window<"u"&&(Se=window.gsap)},ui={},cn=function(e){return Math.round(e*1e4)/1e4},fi=function(e){return Ji(e).id},wt=function(e){return ui[fi(typeof e=="string"?vt(e)[0]:e)]},to=function(e){var t=it,i;if(e-di>=.05)for(di=e;t;)i=t.g(t.t,t.p),(i!==t.v1||e-t.t1>.2)&&(t.v2=t.v1,t.v1=i,t.t2=t.t1,t.t1=e),t=t._next},dn={deg:360,rad:Math.PI*2},pi=function(){Se=eo(),Se&&(vt=Se.utils.toArray,Qi=Se.utils.getUnit,Ji=Se.core.getCache,ot=Se.ticker,ci=1)},un=function(e,t,i,n){this.t=e,this.p=t,this.g=e._gsap.get,this.rCap=dn[i||Qi(this.g(e,t))],this.v1=this.v2=0,this.t1=this.t2=ot.time,n&&(this._next=n,n._prev=this)},bt=function(){function s(t,i){ci||pi(),this.target=vt(t)[0],ui[fi(this.target)]=this,this._props={},i&&this.add(i)}s.register=function(i){Se=i,pi()};var e=s.prototype;return e.get=function(i,n){var r=this._props[i]||console.warn("Not tracking "+i+" velocity."),l,a,u;return l=parseFloat(n?r.v1:r.g(r.t,r.p)),a=l-parseFloat(r.v2),u=r.rCap,u&&(a=a%u,a!==a%(u/2)&&(a=a<0?a+u:a-u)),cn(a/((n?r.t1:ot.time)-r.t2))},e.getAll=function(){var i={},n=this._props,r;for(r in n)i[r]=this.get(r);return i},e.isTracking=function(i){return i in this._props},e.add=function(i,n){i in this._props||(it||(ot.add(to),di=ot.time),it=this._props[i]=new un(this.target,i,n,it))},e.remove=function(i){var n=this._props[i],r,l;n&&(r=n._prev,l=n._next,r&&(r._next=l),l?l._prev=r:it===n&&(ot.remove(to),it=0),delete this._props[i])},e.kill=function(i){for(var n in this._props)this.remove(n);i||delete ui[fi(this.target)]},s.track=function(i,n,r){ci||pi();for(var l=[],a=vt(i),u=n.split(","),d=(r||"").split(","),p=a.length,g,y;p--;){for(g=wt(a[p])||new s(a[p]),y=u.length;y--;)g.add(u[y],d[y]||d[0]);l.push(g)}return l},s.untrack=function(i,n){var r=(n||"").split(",");vt(i).forEach(function(l){var a=wt(l);a&&(r.length?r.forEach(function(u){return a.remove(u)}):a.kill(1))})},s.isTracking=function(i,n){var r=wt(i);return r&&r.isTracking(n)},s.getVelocity=function(i,n){var r=wt(i);return!r||!r.isTracking(n)?console.warn("Not tracking velocity of "+n):r.get(n)},s}();bt.getByTarget=wt,eo()&&Se.registerPlugin(bt);/*!
 * InertiaPlugin 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var K,io,oo,no,hi,St,so,ro,ao,gi,lo,_t,mi,co,Rt=bt.getByTarget,uo=function(){return K||typeof window<"u"&&(K=window.gsap)&&K.registerPlugin&&K},fn=function(e){return typeof e=="string"},xt=function(e){return typeof e=="number"},Fe=function(e){return typeof e=="object"},yi=function(e){return typeof e=="function"},pn=1,fo=Array.isArray,hn=function(e){return e},Ye=1e10,po=1/Ye,ho=.05,gn=function(e){return Math.round(e*1e4)/1e4},mn=function(e,t,i){for(var n in t)!(n in e)&&n!==i&&(e[n]=t[n]);return e},yn=function s(e){var t={},i,n;for(i in e)t[i]=Fe(n=e[i])&&!fo(n)?s(n):n;return t},go=function(e,t,i,n,r){var l=t.length,a=0,u=Ye,d,p,g,y;if(Fe(e)){for(;l--;){d=t[l],p=0;for(g in e)y=d[g]-e[g],p+=y*y;p<u&&(a=l,u=p)}if((r||Ye)<Ye&&r<Math.sqrt(u))return e}else for(;l--;)d=t[l],p=d-e,p<0&&(p=-p),p<u&&d>=n&&d<=i&&(a=l,u=p);return t[a]},mo=function(e,t,i,n,r,l,a){if(e.end==="auto")return e;var u=e.end,d,p;if(i=isNaN(i)?Ye:i,n=isNaN(n)?-Ye:n,Fe(t)){if(d=t.calculated?t:(yi(u)?u(t,a):go(t,u,i,n,l))||t,!t.calculated){for(p in d)t[p]=d[p];t.calculated=!0}d=d[r]}else d=yi(u)?u(t,a):fo(u)?go(t,u,i,n,l):parseFloat(u);return d>i?d=i:d<n&&(d=n),{max:d,min:d,unitFactor:e.unitFactor}},Bt=function(e,t,i){return isNaN(e[t])?i:+e[t]},vi=function(e,t){return t*ho*e/gi},yo=function(e,t,i){return Math.abs((t-e)*gi/i/ho)},vo={resistance:1,checkpoint:1,preventOvershoot:1,linkedProps:1,radius:1,duration:1},wo=function(e,t,i,n){if(t.linkedProps){var r=t.linkedProps.split(","),l={},a,u,d,p,g,y;for(a=0;a<r.length;a++)u=r[a],d=t[u],d&&(xt(d.velocity)?p=d.velocity:(g=g||Rt(e),p=g&&g.isTracking(u)?g.get(u):0),y=Math.abs(p/Bt(d,"resistance",n)),l[u]=parseFloat(i(e,u))+vi(p,y));return l}},vn=function(e,t,i,n,r,l){if(i===void 0&&(i=10),n===void 0&&(n=.2),r===void 0&&(r=1),fn(e)&&(e=no(e)[0]),!e)return 0;var a=0,u=Ye,d=t.inertia||t,p=ao(e).get,g=Bt(d,"resistance",St.resistance),y,o,v,w,E,C,M,D,P,x;x=wo(e,d,p,g);for(y in d)vo[y]||(o=d[y],Fe(o)||(D=D||Rt(e),D&&D.isTracking(y)?o=xt(o)?{velocity:o}:{velocity:D.get(y)}:(w=+o||0,v=Math.abs(w/g))),Fe(o)&&(xt(o.velocity)?w=o.velocity:(D=D||Rt(e),w=D&&D.isTracking(y)?D.get(y):0),v=lo(n,i,Math.abs(w/Bt(o,"resistance",g))),E=parseFloat(p(e,y))||0,C=E+vi(w,v),"end"in o&&(o=mo(o,x&&y in x?x:C,o.max,o.min,y,d.radius,w),_t===t&&(_t=d=yn(t)),d[y]=mn(o,d[y],"end")),"max"in o&&C>+o.max+po?(P=o.unitFactor||St.unitFactors[y]||1,M=E>o.max&&o.min!==o.max||w*P>-15&&w*P<45?n+(i-n)*.1:yo(E,o.max,w),M+r<u&&(u=M+r)):"min"in o&&C<+o.min-po&&(P=o.unitFactor||St.unitFactors[y]||1,M=E<o.min&&o.min!==o.max||w*P>-45&&w*P<15?n+(i-n)*.1:yo(E,o.min,w),M+r<u&&(u=M+r)),M>a&&(a=M)),v>a&&(a=v));return a>u&&(a=u),a>i?i:a<n?n:a},bo=function(){K=uo(),K&&(oo=K.parseEase,no=K.utils.toArray,so=K.utils.getUnit,ao=K.core.getCache,lo=K.utils.clamp,mi=K.core.getStyleSaver,co=K.core.reverting||function(){},hi=oo("power3"),gi=hi(.05),ro=K.core.PropTween,K.config({resistance:100,unitFactors:{time:1e3,totalTime:1e3,progress:1e3,totalProgress:1e3}}),St=K.config(),K.registerPlugin(bt),io=1)},wi={version:"3.13.0",name:"inertia",register:function(e){K=e,bo()},init:function(e,t,i,n,r){io||bo();var l=Rt(e);if(t==="auto"){if(!l){console.warn("No inertia tracking on "+e+". InertiaPlugin.track(target) first.");return}t=l.getAll()}this.styles=mi&&typeof e.style=="object"&&mi(e),this.target=e,this.tween=i,_t=t;var a=e._gsap,u=a.get,d=t.duration,p=Fe(d),g=t.preventOvershoot||p&&d.overshoot===0,y=Bt(t,"resistance",St.resistance),o=xt(d)?d:vn(e,t,p&&d.max||10,p&&d.min||.2,p&&"overshoot"in d?+d.overshoot:g?0:1),v,w,E,C,M,D,P,x,W;t=_t,_t=0,W=wo(e,t,u,y);for(v in t)vo[v]||(w=t[v],yi(w)&&(w=w(n,e,r)),xt(w)?M=w:Fe(w)&&!isNaN(w.velocity)?M=+w.velocity:l&&l.isTracking(v)?M=l.get(v):console.warn("ERROR: No velocity was defined for "+e+" property: "+v),D=vi(M,o),x=0,E=u(e,v),C=so(E),E=parseFloat(E),Fe(w)&&(P=E+D,"end"in w&&(w=mo(w,W&&v in W?W:P,w.max,w.min,v,t.radius,M)),"max"in w&&+w.max<P?g||w.preventOvershoot?D=w.max-E:x=w.max-E-D:"min"in w&&+w.min>P&&(g||w.preventOvershoot?D=w.min-E:x=w.min-E-D)),this._props.push(v),this.styles&&this.styles.save(v),this._pt=new ro(this._pt,e,v,E,0,hn,0,a.set(e,v,this)),this._pt.u=C||0,this._pt.c1=D,this._pt.c2=x);return i.duration(o),pn},render:function(e,t){var i=t._pt;if(e=hi(t.tween._time/t.tween._dur),e||!co())for(;i;)i.set(i.t,i.p,gn(i.s+i.c1*e+i.c2*e*e)+i.u,i.d,e),i=i._next;else t.styles.revert()}};"track,untrack,isTracking,getVelocity,getByTarget".split(",").forEach(function(s){return wi[s]=bt[s]}),uo()&&K.registerPlugin(wi),console.log("🚀 loading-screen.js v1.4.0 chargé");const nt={logoPopDuration:.3,fadeOutDuration:.4,ease:"power2.out",logoShrinkScale:.8};let kt=!1,st=!1,So=!1,_o=!1;function xo(){So&&_o&&Sn()}function wn(){try{if(sessionStorage.getItem("preloaderShown")){console.log("✅ Preloader déjà affiché dans cette session, on le cache immédiatement.");const t=document.querySelector(".loadingscreen");return t&&(t.style.display="none"),kt=!0,st=!0,Promise.resolve()}}catch(t){console.warn("Impossible d'accéder à sessionStorage, le preloader s'affichera à chaque fois.",t)}if(console.log("🎬 initLoadingScreen - Début de l'initialisation (0.9s)"),kt)return console.log("ℹ️ Écran de chargement déjà initialisé"),Promise.resolve();const s=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");return console.log("🔍 Éléments trouvés:",{loadingScreen:!!s,logoWrap:!!e}),!s||!e?(console.warn("⚠️ Éléments manquants:",{loadingScreen:s?"OK":"Non trouvé",logoWrap:e?"OK":"Non trouvé"}),kt=!1,Promise.resolve(null)):(console.log("🎨 Configuration des styles initiaux"),window.gsap.set(s,{opacity:1,display:"flex",backgroundColor:"white"}),window.gsap.set(e,{opacity:0,scale:.9}),window.gsap.to(e,{opacity:1,scale:1,duration:.5,delay:.1,ease:nt.ease}),setTimeout(()=>{console.log("⏱️ 0.9 secondes écoulées."),_o=!0,xo()},900),kt=!0,console.log("✅ Écran de chargement initialisé avec succès (0.9s)"),Promise.resolve(s))}function bn(){console.log("🟢 Application prête, demande de masquage de l'écran de chargement."),So=!0,xo()}function Sn(){if(console.log("🎬 hideLoadingScreen - Début du masquage"),!kt){console.warn("⚠️ Écran de chargement non initialisé");return}if(st){console.log("ℹ️ Masquage déjà en cours");return}st=!0;const s=document.querySelector(".loadingscreen"),e=document.querySelector(".loading_logo_wrap");if(console.log("🔍 Éléments trouvés pour le masquage:",{loadingScreen:!!s,logoWrap:!!e}),!s||!e){console.warn("⚠️ Éléments manquants pour le masquage"),st=!1;return}console.log("🎬 Démarrage de l'animation de masquage améliorée"),window.gsap.timeline({onComplete:()=>{console.log("✅ Animation de masquage terminée"),window.gsap.set(s,{display:"none"}),st=!1;try{sessionStorage.setItem("preloaderShown","true")}catch(i){console.warn("Impossible d'enregistrer l'état du preloader dans sessionStorage.",i)}}}).to(e,{opacity:0,scale:nt.logoShrinkScale,duration:nt.logoPopDuration,ease:nt.ease}).to(s,{opacity:0,duration:nt.fadeOutDuration,ease:nt.ease},"-=0.1")}function ko(){const s=document.querySelector(".loadingscreen");s&&window.gsap.to(s,{opacity:0,duration:.5,onComplete:()=>{window.gsap.set(s,{display:"none"})}}),st=!1}console.log("🚀 text-animation.js v2.1.0 chargé");function _n(){const s=document.querySelector(".span_mover");if(s)try{let i=function(){if(t)return;t=!0;const n=gsap.timeline({onComplete:()=>{t=!1,gsap.to(s,{y:e.positions.start,duration:e.duration,ease:e.ease,onComplete:()=>{setTimeout(i,e.cycleDelay*1e3)}})}}),r=[e.positions.start,e.positions.middle,e.positions.end];for(let l=0;l<r.length;l++)n.to(s,{y:r[l],duration:e.duration,ease:e.ease}),l<r.length-1&&n.to({},{duration:e.pauseDuration});n.play()};const e={duration:.6,ease:"back.out(1.7)",pauseDuration:1.5,cycleDelay:.5,positions:{start:"0%",middle:"-34%",end:"-68%"}};let t=!1;i(),window.addEventListener("beforeunload",()=>{gsap.killTweensOf(s)})}catch(e){console.error("Erreur dans l'animation de texte:",e)}}let Tt=!1;async function To(s){if(!s||!s.classList.contains("is-open"))return;Tt=!0;const e=s.querySelector(".faq_respond"),t=s.querySelector(".svg-holder");s.classList.remove("is-open");const i=window.gsap.timeline({onComplete:()=>{e&&(e.style.display="none"),Tt=!1}});t&&i.to(t,{rotation:0,duration:.25,ease:"power2.inOut"},0),e&&(i.to(e,{opacity:0,y:-10,duration:.2,ease:"power1.in"},0),i.to(e,{height:0,duration:.4,ease:"back.in(1.7)"},0)),await i}async function xn(s){if(!s||s.classList.contains("is-open"))return;Tt=!0;const e=s.querySelector(".faq_respond"),t=s.querySelector(".svg-holder");s.classList.add("is-open");const i=window.gsap.timeline({onComplete:()=>{Tt=!1}});if(e){window.gsap.set(e,{display:"block",opacity:0,y:-20,height:0}),window.getComputedStyle(e).height,window.gsap.set(e,{height:"auto"});const n=e.scrollHeight;window.gsap.set(e,{height:0}),i.to(e,{height:n,duration:.6,ease:"elastic.out(1.2, 0.5)"},0),i.to(e,{opacity:1,y:0,duration:.3,ease:"power2.out"},"<0.05")}t&&i.to(t,{rotation:90,duration:.25,ease:"back.out(1.7)"},0),await i}async function kn(s){if(Tt)return;if(s.classList.contains("is-open"))await To(s);else{const t=document.querySelectorAll(".faq_item.is-open");await Promise.all(Array.from(t).map(i=>To(i))),await xn(s)}}function Tn(){const s=document.querySelectorAll(".faq_item");s.length!==0&&s.forEach(e=>{e&&(e.classList.remove("is-open"),e.querySelector(".faq_respond")&&window.gsap.set(e.querySelector(".faq_respond"),{height:0,opacity:0,display:"none"}),e.querySelector(".svg-holder")&&window.gsap.set(e.querySelector(".svg-holder"),{rotation:0}),!e.dataset.faqInitialized&&(e.dataset.faqInitialized="true",e.addEventListener("click",t=>{t.target.closest(".faq_respond a, .faq_respond button")||(t.preventDefault(),kn(e))})))})}console.log('🚀 menu-desktop.js v14.0.0 chargé - Stratégie "Wrapper"');class En{constructor(){this.activePanel=null,this.isAnimating=!1,this.triggerSelector='[data-attribute^="nav-link-desktop-"]',this.wrapperSelector=".desktop_menu_wrapper",this.panelClassMap={parcs:".parc_menu_desktop",activites:".activites_menu_desktop",offres:".offres_menu_desktop"},this._addGlobalListener(),console.log('✅ Gestionnaire de clic "Stratégie Wrapper" est actif.')}_addGlobalListener(){document.body.addEventListener("click",e=>{if(this.isAnimating)return;const t=e.target.closest(this.triggerSelector),i=document.querySelector(this.wrapperSelector);if(this.activePanel&&!t&&!this.activePanel.contains(e.target)){this._closeAll();return}if(!t)return;if(e.preventDefault(),e.stopPropagation(),!i){console.error(`Wrapper introuvable avec le sélecteur: ${this.wrapperSelector}`);return}const n=t.getAttribute("data-attribute").replace("nav-link-desktop-",""),r=i.querySelector(this.panelClassMap[n]);if(!r){console.error(`Panneau cible pour la clé "${n}" non trouvé dans le wrapper.`);return}const l=this.activePanel===r,a=!this.activePanel;l?this._closeAll():a?this._openWrapperAndPanel(r):this._switchPanels(this.activePanel,r)})}_openWrapperAndPanel(e){const t=document.querySelector(this.wrapperSelector);this.isAnimating=!0,window.gsap.set(t,{display:"flex",opacity:0}),Object.values(this.panelClassMap).forEach(i=>{const n=t.querySelector(i);n&&window.gsap.set(n,{display:"none"})}),window.gsap.set(e,{display:"flex"}),window.gsap.to(t,{opacity:1,duration:.3,ease:"power2.out",onComplete:()=>{this.isAnimating=!1,this.activePanel=e}})}_closeAll(){const e=document.querySelector(this.wrapperSelector);!this.activePanel||!e||(this.isAnimating=!0,window.gsap.to(e,{opacity:0,duration:.2,ease:"power1.in",onComplete:()=>{window.gsap.set(e,{display:"none"}),this.activePanel&&window.gsap.set(this.activePanel,{display:"none"}),this.activePanel=null,this.isAnimating=!1}}))}_switchPanels(e,t){this.isAnimating=!0;const i=window.gsap.timeline({onComplete:()=>{this.isAnimating=!1,this.activePanel=t}});i.to(e,{opacity:0,duration:.15,onComplete:()=>window.gsap.set(e,{display:"none"})}),i.set(t,{display:"flex",opacity:0}),i.to(t,{opacity:1,duration:.15})}}function Pn(){new En}function Cn(){const s=document.querySelector("#hamburger-menu"),e=document.querySelector("#main-menu-mobile"),t=document.body,i=document.querySelector("#parcs-nav_button_mobile"),n=document.querySelector("#activites-nav_button_mobile"),r=document.querySelector("#formules-nav_button_mobile"),l=document.querySelector("#parc-menu-mobile"),a=document.querySelector("#activite-menu-mobile"),u=document.querySelector("#offres-menu-mobile"),d=document.querySelectorAll(".button-close"),p=document.querySelectorAll(".button-back-menu");let g=!1,y=0,o=window.gsap.timeline({paused:!0});const v=window.gsap.timeline({paused:!0});v.to(s,{rotation:90,duration:.4,ease:"elastic.out(1, 0.5)",transformOrigin:"center center"}),[e,l,a,u].forEach(_=>{_.style.display="none"});function w(){y=window.pageYOffset||document.documentElement.scrollTop,t.style.overflow="hidden",t.style.position="fixed",t.style.width="100%",t.style.top=`-${y}px`}function E(){t.style.overflow="",t.style.position="",t.style.width="",t.style.top="",window.scrollTo(0,y)}function C(){return window.gsap.timeline({paused:!0}).add(()=>{e.style.display="flex",[l,a,u].forEach(_=>{_.style.display="none"})},"openMainMenu").add(()=>{e.style.display="none",l.style.display="flex"},"openParcMenu").add(()=>{e.style.display="none",a.style.display="flex"},"openActiviteMenu").add(()=>{e.style.display="none",u.style.display="flex"},"openOffresMenu")}o=C();function M(_=null){[i,n,r,document.querySelector("#parcs-nav_button"),document.querySelector("#activites-nav_button"),document.querySelector("#formules-nav_button")].forEach(J=>{J&&(_&&J.id===_?J.classList.add("active"):J.classList.remove("active"))})}function D(_){_?v.play():v.reverse()}function P(_){const J={"parcs-nav_button":l,"activites-nav_button":a,"formules-nav_button":u,"parcs-nav_button_mobile":l,"activites-nav_button_mobile":a,"formules-nav_button_mobile":u}[_];if(J){if(e.style.display="none",l.style.display="none",a.style.display="none",u.style.display="none",g&&J.style.display==="flex"){g=!1,E(),M(),D(!1);return}requestAnimationFrame(()=>{J.style.display="flex",g=!0,w(),M(_),D(!0)})}}function x(){o&&o.kill(),g=!1,[e,l,a,u].forEach(_=>{_.style.display="none"}),E(),M(),D(!1),o=C()}function W(){[l,a,u].forEach(_=>{_.style.display="none"}),e.style.display="flex",g=!0}function F(_){e.style.display="none",g=!0,_.style.display="flex"}s.addEventListener("click",()=>{g?x():([l,a,u].forEach(_=>{_.style.display="none"}),e.style.display="flex",g=!0,w(),D(!0))}),i.addEventListener("click",()=>F(l)),n.addEventListener("click",()=>F(a)),r.addEventListener("click",()=>F(u)),d.forEach(_=>{_.addEventListener("click",x)}),p.forEach(_=>{_.addEventListener("click",W)}),document.querySelectorAll("#parcs-nav_button, #activites-nav_button, #formules-nav_button, #parcs-nav_button_mobile, #activites-nav_button_mobile, #formules-nav_button_mobile").forEach(_=>{_.addEventListener("click",ne=>{ne.preventDefault(),P(_.id)})})}console.log("🚀 centre-card.js v6.1.0 chargé");const ae={CARD:".centre-card_wrapper.effect-cartoon-shadow",CLICKABLE_WRAP:'.clickable_wrap[data-attribute="data-card-toggle"]',TOGGLE_ELEMENTS:[".centre-card_scroll_wrapper",".centre-card_list",".centre-card_button-holder",".tag_holder_wrapper"],ARROW:".svg-holder.arrow",INTERNAL_LINKS:".centre-card_button-holder a, .centre-card_button-holder button"},Eo=new WeakSet;let bi=!1;async function Si(s){if(!s||!s.classList.contains("is-open"))return;const e=s.querySelectorAll(ae.TOGGLE_ELEMENTS.join(",")),t=s.querySelector(ae.ARROW),i=s.querySelector(".centre-card_scroll_wrapper");s.classList.remove("is-open");const n=window.gsap.timeline({onStart:()=>{i&&window.gsap.set(i,{height:"10rem"})},onComplete:()=>{window.gsap.set(e,{display:"none"}),i&&window.gsap.set(i,{height:0})}});n.to(e,{opacity:0,y:-10,duration:.2,ease:"power1.in",stagger:{each:.02,from:"start"}},0),t&&n.to(t,{rotation:0,duration:.25,ease:"power2.inOut"},0),i&&n.to(i,{height:0,duration:.4,ease:"back.in(1.7)"},0),await n}async function Po(s){if(!s||s.classList.contains("is-open"))return;s.classList.add("is-open");const e=s.querySelectorAll(ae.TOGGLE_ELEMENTS.join(",")),t=s.querySelector(ae.ARROW),i=s.querySelector(".centre-card_scroll_wrapper");e.forEach(r=>{window.gsap.set(r,{display:r.dataset.originalDisplay||"block",opacity:0,y:-20})});const n=window.gsap.timeline({onStart:()=>{i&&window.gsap.set(i,{height:0})}});i&&n.to(i,{height:"10rem",duration:.6,ease:"elastic.out(1.2, 0.5)"},0),t&&n.to(t,{rotation:90,duration:.25,ease:"back.out(1.7)"},"<"),n.to(e,{opacity:1,y:0,duration:.3,ease:"power2.out",stagger:{each:.035,from:"start"}},"<0.05"),await n}async function An(s){var e;if(!bi){bi=!0;try{if(s.classList.contains("is-open"))await Si(s),document.dispatchEvent(new CustomEvent("map:reset")),console.log("🗺️ Événement map:reset émis");else{const i=document.querySelectorAll(`${ae.CARD}.is-open`);await Promise.all(Array.from(i).map(r=>Si(r))),await Po(s);const n=(e=s.closest(".w-dyn-item"))==null?void 0:e.dataset.placeId;n&&(document.dispatchEvent(new CustomEvent("map:focus",{detail:{placeId:n}})),console.log("📍 Événement map:focus émis pour:",n))}}finally{bi=!1}}}function _i(s){var n,r;if(!s||Eo.has(s)){console.log("⏭️ Carte déjà initialisée, ignorée");return}console.log("🔧 Initialisation de la carte:",s);let e=(n=s.parentElement)==null?void 0:n.querySelector(ae.CLICKABLE_WRAP);if(e||(e=(r=s.parentElement)==null?void 0:r.querySelector(".clickable_wrap"),e&&console.log("✅ Clickable wrap trouvé sans attribut data-card-toggle")),!e){console.log("❌ Clickable wrap non trouvé pour la carte:",s);return}const t=s.querySelectorAll(ae.TOGGLE_ELEMENTS.join(","));console.log(`📋 Éléments à basculer trouvés: ${t.length}`),t.forEach(l=>{const a=window.getComputedStyle(l);l.dataset.originalDisplay=a.display,console.log(`💾 Display original sauvé pour ${l.className}: ${a.display}`)}),window.gsap.set(t,{display:"none",opacity:0,y:-20}),console.log("🔒 Carte fermée par défaut");const i=l=>{if(l.target.closest(ae.INTERNAL_LINKS)){console.log("🔗 Clic sur lien interne, toggle ignoré");return}l.preventDefault(),l.stopPropagation(),console.log("👆 Clic sur carte détecté"),An(s)};e.addEventListener("click",i),Eo.add(s),console.log("✅ Carte initialisée avec succès")}function Ln(){const s=document.querySelector(".collection-list-centre-wrapper");if(!s)return;new MutationObserver(t=>{for(const i of t)i.type==="childList"&&i.addedNodes.forEach(n=>{n.nodeType===1&&(n.matches(ae.CARD)&&_i(n),n.querySelectorAll(ae.CARD).forEach(r=>_i(r)))})}).observe(s,{childList:!0,subtree:!0})}function Mn(s){if(!s)return null;const e=document.querySelectorAll(".w-dyn-item");for(const t of e){const i=t.querySelector(ae.CARD);if(!i)continue;if(t.querySelectorAll('a[href*="/nos-parcs-a-paris-region-parisienne/'+s+'"]').length>0)return i}return null}function In(){console.log("🎯 Configuration de l'écoute du menu Parcs..."),document.addEventListener("click",s=>{const e=s.target.closest('a[href*="/nos-parcs-a-paris-region-parisienne/"]');if(!e||!window.location.pathname.includes("/activites-par-centre/"))return;const i=e.getAttribute("href").split("/nos-parcs-a-paris-region-parisienne/")[1];console.log("🖱️ Clic détecté sur lien centre:",i),setTimeout(()=>{const n=Mn(i);n?(console.log("✅ Carte trouvée pour le centre cliqué, ouverture..."),document.querySelectorAll(`${ae.CARD}.is-open`).forEach(l=>{l!==n&&Si(l)}),n.classList.contains("is-open")||Po(n)):console.log("❌ Aucune carte trouvée pour le centre:",i)},300)}),console.log("✅ Écoute du menu Parcs configurée")}function Dn(){if(console.log("🚀 === INITIALISATION DES CARTES DE CENTRE ==="),console.log("📍 Page actuelle:",window.location.pathname),console.log("🏗️ DOM ready state:",document.readyState),!window.gsap){console.log("❌ GSAP non disponible, initialisation annulée");return}let s=document.querySelectorAll(ae.CARD);if(s.length===0){console.log("⚠️ Aucune carte trouvée avec le sélecteur principal. Tentative avec sélecteurs alternatifs...");const e=[".centre-card_wrapper",'[class*="centre-card"]',".card-centre_wrapper"];for(const t of e)if(s=document.querySelectorAll(t),s.length>0){console.log(`✅ Cartes trouvées avec sélecteur alternatif: ${t} (${s.length} éléments)`);break}}if(console.log(`📊 ${s.length} cartes trouvées au total`),s.length===0){console.log("❌ Aucune carte trouvée, initialisation annulée");return}s.forEach(e=>{e.classList.contains("is-open")&&(console.log("🔒 Fermeture forcée de carte ouverte au démarrage"),e.classList.remove("is-open"))}),s.forEach((e,t)=>{console.log(`🔧 Initialisation carte ${t+1}/${s.length}`),_i(e)}),Ln(),In(),console.log("✅ === INITIALISATION TERMINÉE ===")}function qn(){console.group("--- Informations de Débogage ---"),console.log("Wrapper Menu Desktop:",document.querySelector(".desktop_menu_wrapper")),console.log("Boutons de menu:",{parcs:document.querySelector('[data-attribute="nav-link-desktop-parcs"]'),activites:document.querySelector('[data-attribute="nav-link-desktop-activites"]'),offres:document.querySelector('[data-attribute="nav-link-desktop-offres"]')}),console.log("Conteneurs de menu:",{parcs:document.querySelector(".parc_menu_desktop"),activites:document.querySelector(".activites_menu_desktop"),offres:document.querySelector(".offres_menu_desktop")}),console.groupEnd()}function Fn(){window.location.hash==="#debug"&&(console.log("🐛 Mode de débogage activé."),qn())}class $n{constructor(){this.config={defaultVideoUrl:"https://player.vimeo.com/progressive_redirect/playback/1088767237/rendition/1080p/file.mp4?loc=external&signature=1d46b415bde9b315b01d645374b5f7319940ecff5995ac8ac213f847577f6536",ids:{initialContainer:"container-initial",filteredContainer:"container-filtre",hiddenMap:"hidden-map",initialActivitiesPane:"tab-pane-initial-activites",initialParksPane:"tab-pane-initial-parcs",filteredActivitiesPane:"tab-pane-filtre-activites",filteredParksPane:"tab-pane-filtre-parcs",initialActivitiesTabLink:"tab-link-initial-activites",initialParksTabLink:"tab-link-initial-parcs",filteredActivitiesTabLink:"tab-link-filtre-activites",filteredParksTabLink:"tab-link-filtre-parcs",selectionWrapper:"selection-wrapper",label:"selection-label",reserveBtn:"reserve-btn",iframeWrap:"iframe-wrapper"}},this.state={primarySelectionType:null,selectedInitialSlugs:new Set,selectedInitialParkId:null,finalSelectedParkId:null,finalSelectedSlugs:new Set},this.dom={},this.mapItems=[],this.init()}init(){this._setupDomElements()&&(this._injectStyles(),this._injectVideoPlayer(),this._setupEventListeners(),this._applyUrlParameters(),this._setInitialUiState())}_setupDomElements(){for(const e in this.config.ids)if(this.dom[e]=document.getElementById(this.config.ids[e]),!this.dom[e])return console.error(`[SW-RSV] Essential element #${this.config.ids[e]} is missing.`),!1;return this.dom.videoBackgroundDiv=document.querySelector('[data-attribute="video_background"]'),this.dom.resetButton=document.querySelector('[data-attribute="reset_form"]'),this.mapItems=Array.from(this.dom.hiddenMap.querySelectorAll(".map-item")),!0}_setInitialUiState(){this.dom.filteredContainer.style.display="none",this.dom.reserveBtn.classList.add("disabled"),this.dom.iframeWrap.style.display="none",this.dom.selectionWrapper&&(window.gsap.set(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none"}),window.gsap.set(this.dom.label,{opacity:0}))}_setupEventListeners(){this.dom.initialActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"initialActivity")),this.dom.initialParksPane.addEventListener("click",this._handleSelection.bind(this,"initialPark")),this.dom.filteredActivitiesPane.addEventListener("click",this._handleSelection.bind(this,"finalActivity")),this.dom.filteredParksPane.addEventListener("click",this._handleSelection.bind(this,"finalPark")),this.dom.reserveBtn.addEventListener("click",this._handleReserveClick.bind(this)),this.dom.resetButton&&this.dom.resetButton.addEventListener("click",this._fullReset.bind(this))}_handleSelection(e,t){const i=t.target.closest("[data-activity-slug], [data-centre-apex-id]");if(!i)return;const n=i.dataset.activitySlug,r=i.dataset.centreApexId;switch(e){case"initialActivity":this._handleInitialActivitySelection(n,i);break;case"initialPark":this._handleInitialParkSelection(r,i);break;case"finalActivity":this._handleFinalActivitySelection(n,i);break;case"finalPark":this._handleFinalParkSelection(r,i);break}}_handleInitialActivitySelection(e,t){if(this.state.primarySelectionType==="parks"&&(this._resetInitialSelections("parks"),this._resetInitialTabs()),this.state.primarySelectionType="activities",t.classList.toggle("isSelected"),t.classList.contains("isSelected")?this.state.selectedInitialSlugs.add(e):this.state.selectedInitialSlugs.delete(e),this._resetFinalSelections(),this.state.selectedInitialSlugs.size>0){this.dom.initialParksTabLink.style.display="none";const i=Array.from(this.state.selectedInitialSlugs).map(l=>new Set(this.mapItems.filter(a=>a.dataset.activitySlug===l).map(a=>a.dataset.centreApexId))),n=i.length>0?i[0]:new Set,r=i.reduce((l,a)=>new Set([...l].filter(u=>a.has(u))),n);this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(l=>{l.style.display=r.has(l.dataset.centreApexId)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("parks")}else this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this.state.primarySelectionType=null;this._updateStateAndButton()}_handleInitialParkSelection(e,t){this.state.primarySelectionType==="activities"&&(this._resetInitialSelections("activities"),this._resetInitialTabs()),this.state.primarySelectionType="parks";const i=this.state.selectedInitialParkId===e;if(this._resetFinalSelections(),i)this.state.selectedInitialParkId=null,t.classList.remove("isSelected"),this._resetInitialTabs(),this.dom.filteredContainer.style.display="none",this._resetFilteredTabs(),this._updateVideoSource(null);else{this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(r=>r.classList.remove("isSelected")),this.state.selectedInitialParkId=e,t.classList.add("isSelected"),this._updateVideoSource(t),this.dom.initialActivitiesTabLink.style.display="none";const n=new Set(this.mapItems.filter(r=>r.dataset.centreApexId===e).map(r=>r.dataset.activitySlug));this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(r=>{r.style.display=n.has(r.dataset.activitySlug)?"block":"none"}),this.dom.filteredContainer.style.display="flex",this._switchFilteredTab("activities")}this._updateStateAndButton()}_handleFinalParkSelection(e,t){this.state.primarySelectionType==="activities"&&(this.state.finalSelectedParkId===e?(this.state.finalSelectedParkId=null,t.classList.remove("isSelected"),this._updateVideoSource(null)):(this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(i=>i.classList.remove("isSelected")),this.state.finalSelectedParkId=e,t.classList.add("isSelected"),this._updateVideoSource(t)),this._updateStateAndButton())}_handleFinalActivitySelection(e,t){this.state.primarySelectionType==="parks"&&(t.classList.toggle("isSelected"),t.classList.contains("isSelected")?this.state.finalSelectedSlugs.add(e):this.state.finalSelectedSlugs.delete(e),this._updateStateAndButton())}_handleReserveClick(e){if(this.dom.reserveBtn.classList.contains("disabled")){e.preventDefault();return}e.preventDefault();const t=this.dom.reserveBtn.href;if(t&&t!=="#"){this.dom.iframeWrap.innerHTML=`<iframe src="${t}" style="width: 100%; height: 100vh; border: none;"></iframe>`,this.dom.iframeWrap.style.display="block";const i=this.dom.iframeWrap.getBoundingClientRect().top+window.scrollY,r=7*parseFloat(getComputedStyle(document.documentElement).fontSize);window.scrollTo({top:i-r,behavior:"smooth"})}}_updateStateAndButton(){let e=null,t=null;if(this.state.primarySelectionType==="activities"?(e=this.state.finalSelectedParkId,t=this.state.selectedInitialSlugs):this.state.primarySelectionType==="parks"&&(e=this.state.selectedInitialParkId,t=this.state.finalSelectedSlugs),e&&t&&t.size>0){const i=Array.from(t).map(n=>{const r=this.mapItems.find(l=>l.dataset.centreApexId===e&&l.dataset.activitySlug===n);return r?r.dataset.activityApexId:null}).filter(Boolean);if(i.length===t.size){const n=i.join(",");this.dom.reserveBtn.href=`https://www.apex-timing.com/gokarts/sessions_booking.php?center=${e}&categories=${n}&language=fr&iframe_id=axiframe_0`,this.dom.reserveBtn.classList.remove("disabled");const r=this.state.primarySelectionType==="activities"?this.dom.filteredParksPane.querySelector(`[data-centre-apex-id="${e}"]`):this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${e}"]`),l=r?r.dataset.parkLabel:"",a=Array.from(t).map(u=>{const d=this.state.primarySelectionType==="activities"?this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${u}"]`):this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${u}"]`);return d?d.dataset.activityLabel:u});this.dom.label.textContent=`C'est parti pour ${a.map(u=>`un ${u}`).join(" & ")} à ${l} !`,this._animateSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="La combinaison sélectionnée est invalide.",this._resetSelectionAppearance()}else this.dom.reserveBtn.href="#",this.dom.reserveBtn.classList.add("disabled"),this.dom.label.textContent="Veuillez terminer votre sélection.",this._resetSelectionAppearance()}_switchFilteredTab(e){const t="w--current",i=e==="parks"?"Parks":"Activities",n=e==="parks"?"Activities":"Parks";this.dom[`filtered${i}TabLink`].classList.add(t),this.dom[`filtered${n}TabLink`].classList.remove(t),this.dom[`filtered${i}Pane`].classList.add(t),this.dom[`filtered${n}Pane`].classList.remove(t),this.dom[`filtered${i}TabLink`].style.display="inline-block",this.dom[`filtered${i}Pane`].style.display="block",this.dom[`filtered${n}TabLink`].style.display="none",this.dom[`filtered${n}Pane`].style.display="none"}_animateSelectionAppearance(){if(!this.dom.selectionWrapper)return;window.gsap.timeline().to(this.dom.selectionWrapper,{opacity:1,pointerEvents:"auto",duration:.4,ease:"power2.inOut"}).from(this.dom.selectionWrapper,{scale:.9,ease:"elastic.out(1, 0.6)",duration:1.2},"-=0.2").to(this.dom.label,{opacity:1,duration:.5},"-=1")}_resetSelectionAppearance(){this.dom.selectionWrapper&&(window.gsap.to(this.dom.selectionWrapper,{opacity:.5,pointerEvents:"none",duration:.3}),window.gsap.to(this.dom.label,{opacity:0,duration:.2}))}_updateVideoSource(e){if(!this.dom.videoBackgroundDiv)return;const t=this.dom.videoBackgroundDiv.querySelector("source"),i=this.dom.videoBackgroundDiv.querySelector("video");if(!t||!i)return;const n=e&&e.dataset.video?e.dataset.video:this.config.defaultVideoUrl;t.src!==n&&(t.src=n,i.load(),i.play().catch(()=>{}))}_fullReset(e){e&&e.preventDefault(),this.state.primarySelectionType=null,this._resetInitialSelections("activities"),this._resetInitialSelections("parks"),this._resetFinalSelections(),this._resetInitialTabs(),this._resetFilteredTabs(),this.dom.filteredContainer.style.display="none",this.dom.iframeWrap.style.display="none",this._updateStateAndButton()}_resetInitialTabs(){this.dom.initialActivitiesTabLink&&(this.dom.initialActivitiesTabLink.style.display="flex"),this.dom.initialParksTabLink&&(this.dom.initialParksTabLink.style.display="flex")}_resetInitialSelections(e){e==="activities"?(this.dom.initialActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(t=>t.classList.remove("isSelected")),this.state.selectedInitialSlugs.clear()):e==="parks"&&(this.dom.initialParksPane.querySelectorAll("[data-centre-apex-id]").forEach(t=>t.classList.remove("isSelected")),this.state.selectedInitialParkId=null,this._updateVideoSource(null))}_resetFinalSelections(){this.dom.filteredActivitiesPane.querySelectorAll("[data-activity-slug]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedSlugs.clear(),this.dom.filteredParksPane.querySelectorAll("[data-centre-apex-id]").forEach(e=>e.classList.remove("isSelected")),this.state.finalSelectedParkId=null}_resetFilteredTabs(){this.dom.filteredActivitiesTabLink.style.display="inline-block",this.dom.filteredParksTabLink.style.display="inline-block"}_injectStyles(){const e=document.createElement("style");e.id="sw-rsv-styles",e.textContent=`
        .isSelected .tags_content { background-color: black !important; color: white !important; }
        .isSelected .tags_content * { color: white !important; }`,document.head.appendChild(e)}_injectVideoPlayer(){this.dom.videoBackgroundDiv.innerHTML=`<video playsinline autoplay muted loop class="background-video_element" style="width: 100%; height: 100%; object-fit: cover;"><source src="${this.config.defaultVideoUrl}" type="video/mp4"></video>`}_applyUrlParameters(){const e=new URLSearchParams(window.location.search),t=e.get("activite"),i=e.get("parc");!t&&!i||(i&&t?(this.dom.initialParksTabLink&&this.dom.initialParksTabLink.click(),setTimeout(()=>{const n=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${i}"]`);n&&n.click(),setTimeout(()=>{const r=this.dom.filteredActivitiesPane.querySelector(`[data-activity-slug="${t}"]`);r&&(r.click(),setTimeout(()=>{this.dom.reserveBtn.classList.contains("disabled")||(console.log("🎯 Auto-clic sur le bouton Réserver avec les deux paramètres présélectionnés"),this.dom.reserveBtn.click())},200))},100)},100)):t?(this.dom.initialActivitiesTabLink&&this.dom.initialActivitiesTabLink.click(),setTimeout(()=>{const n=this.dom.initialActivitiesPane.querySelector(`[data-activity-slug="${t}"]`);n&&n.click()},100)):i&&(this.dom.initialParksTabLink&&this.dom.initialParksTabLink.click(),setTimeout(()=>{const n=this.dom.initialParksPane.querySelector(`[data-centre-apex-id="${i}"]`);n&&n.click()},100)))}}function Nn(){new $n}console.log("🗺️ map-integration.js v2.1.1 chargé");const Wt={map:null,markers:[],infoWindow:null,bottomSheetElement:null,initialCenter:{lat:48.82,lng:2.25},initialZoom:10,initMap:function(){const s=document.getElementById("map");if(!s){console.error("Erreur : L'élément #map est introuvable dans le DOM.");return}const e=s.dataset.mapId;e||console.warn("⚠️ data-map-id n'est pas défini sur l'élément #map. Les marqueurs avancés pourraient ne pas fonctionner."),this.map=new google.maps.Map(s,{center:this.initialCenter,zoom:this.initialZoom,disableDefaultUI:!0,zoomControl:!0,mapId:e}),this.infoWindow=new google.maps.InfoWindow,google.maps.event.addListener(this.infoWindow,"closeclick",()=>{this.resetMapView()}),this.injectBottomSheet(),this.createMarkers()},injectBottomSheet:function(){const s=document.createElement("style");s.textContent=`
            .map-bottom-sheet {
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background-color: white;
                border-top-left-radius: 16px;
                border-top-right-radius: 16px;
                box-shadow: 0 -4px 12px rgba(0,0,0,0.1);
                transform: translateY(100%);
                transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
                z-index: 1000;
                max-height: 85vh;
                overflow-y: auto;
                -webkit-overflow-scrolling: touch;
                visibility: hidden;
            }
            .map-bottom-sheet.is-visible {
                transform: translateY(0);
                visibility: visible;
            }
            .map-bottom-sheet__content {
                padding: 24px;
                padding-top: 50px;
            }
            .map-bottom-sheet__close-btn {
                position: absolute;
                top: 12px;
                right: 12px;
                background: #f0f0f0;
                border: none;
                border-radius: 50%;
                width: 32px;
                height: 32px;
                font-size: 22px;
                line-height: 32px;
                text-align: center;
                cursor: pointer;
                font-weight: bold;
                color: #333;
                z-index: 2;
            }
            .map-bottom-sheet__handle {
                position: absolute;
                top: 8px;
                left: 50%;
                transform: translateX(-50%);
                width: 40px;
                height: 4px;
                background-color: #ccc;
                border-radius: 2px;
            }
        `,document.head.appendChild(s),document.body.insertAdjacentHTML("beforeend",`
            <div id="map-bottom-sheet" class="map-bottom-sheet" aria-hidden="true">
                <div class="map-bottom-sheet__handle"></div>
                <button class="map-bottom-sheet__close-btn" aria-label="Fermer">&times;</button>
                <div class="map-bottom-sheet__content"></div>
            </div>
        `),this.bottomSheetElement=document.getElementById("map-bottom-sheet"),this.bottomSheetElement.querySelector(".map-bottom-sheet__close-btn").addEventListener("click",()=>{this.hideBottomSheet()})},createMarkers:function(){const s=document.querySelectorAll(".w-dyn-item[data-place-id]");console.log(`📍 ${s.length} cartes trouvées pour la création des marqueurs.`),s.forEach(e=>{var l,a;const t=parseFloat(e.dataset.lat),i=parseFloat(e.dataset.lng),n=e.dataset.placeId;if(isNaN(t)||isNaN(i)||!n){const u=((l=e.querySelector("h3"))==null?void 0:l.textContent)||"Nom non trouvé";console.warn(`⚠️ Carte ignorée (nom: "${u}") car ses données de latitude/longitude sont manquantes ou invalides.`,e);return}const r=new google.maps.marker.AdvancedMarkerElement({map:this.map,position:{lat:t,lng:i},title:((a=e.querySelector("h3"))==null?void 0:a.textContent)||"Centre Smile World"});r.addListener("click",()=>{window.matchMedia("(max-width: 768px)").matches?this.showBottomSheetForPlace(n):this.focusOnCenter(n,r)}),this.markers.push({placeId:n,marker:r})})},focusOnCenter:async function(s,e){var t;if(!(!s||!this.map)){console.log(`🔎 Zoom sur le centre avec Place ID : ${s}`);try{const{Place:i}=await google.maps.importLibrary("places"),n=new i({id:s}),r=["displayName","formattedAddress","location","rating","googleMapsURI","photos","reviews","userRatingCount","regularOpeningHours"];if(await n.fetchFields({fields:r}),n.location){this.map.panTo(n.location),this.map.setZoom(15);const l=this.buildInfoWindowContent(n,!1);this.infoWindow.setContent(l);const a=e||((t=this.markers.find(u=>u.placeId===s))==null?void 0:t.marker);a&&this.infoWindow.open(this.map,a)}else console.error(`Aucune donnée de localisation trouvée pour le Place ID ${s}`)}catch(i){console.error(`Erreur lors de la récupération des détails pour le Place ID ${s}:`,i)}}},showBottomSheetForPlace:async function(s){if(!(!s||!this.map)){console.log(`📱 Affichage du panneau mobile pour Place ID : ${s}`);try{const{Place:e}=await google.maps.importLibrary("places"),t=new e({id:s}),i=["displayName","formattedAddress","location","rating","googleMapsURI","photos","reviews","userRatingCount","regularOpeningHours"];if(await t.fetchFields({fields:i}),t.location){this.map.panTo(t.location),this.map.setZoom(15);const n=this.buildInfoWindowContent(t,!0);this.bottomSheetElement.querySelector(".map-bottom-sheet__content").innerHTML=n,this.bottomSheetElement.classList.add("is-visible"),this.bottomSheetElement.setAttribute("aria-hidden","false")}else console.error(`Aucune donnée de localisation trouvée pour le Place ID ${s}`)}catch(e){console.error(`Erreur lors de la récupération des détails pour le Place ID ${s}:`,e)}}},hideBottomSheet:function(){!this.bottomSheetElement||!this.map||(this.bottomSheetElement.classList.remove("is-visible"),this.bottomSheetElement.setAttribute("aria-hidden","true"),console.log("🔙 Réinitialisation de la vue de la carte..."),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))},buildInfoWindowContent:function(s,e=!1){let t="";s.photos&&s.photos.length>0&&(t=`<img src="${s.photos[0].getURI({maxWidth:400,maxHeight:200})}" alt="Photo de ${s.displayName}" style="width: 100%; height: 120px; object-fit: cover; border-radius: 8px; margin-bottom: 12px;">`);let i="";s.rating&&(i=`
                <div style="display: flex; align-items: center; color: #555; margin-bottom: 8px; font-size: 14px;">
                    <span style="color: #f8b400; font-size: 18px; margin-right: 8px;">${"★".repeat(Math.round(s.rating))+"☆".repeat(5-Math.round(s.rating))}</span>
                    <span style="font-weight: bold; color: #111; margin-right: 5px;">${s.rating.toFixed(1)}</span>
                    <span>(${s.userRatingCount||0} avis)</span>
                </div>`);let n="";if(s.reviews&&s.reviews.length>0){const a=s.reviews[0];a.text&&(n=`
                    <div style="margin-top: 16px;">
                        <strong style="display: block; font-size: 14px; color: #111; margin-bottom: 8px; font-weight: 600;">Dernier avis</strong>
                        <div style="border-left: 3px solid #f0f0f0; padding-left: 12px; font-style: italic;">
                            <p style="margin: 0 0 5px 0; font-size: 13px; color: #555;">"${a.text.substring(0,100)}..."</p>
                            <span style="font-weight: 500; font-size: 12px; color: #333;">- ${a.authorAttribution.displayName}</span>
                        </div>
                    </div>
                `)}let r="";if(s.regularOpeningHours&&s.regularOpeningHours.weekdayDescriptions){const a=new Date().getDay(),u=a===0?6:a-1;r=`<div style="font-size: 13px; color: #333; margin-bottom: 12px; display: flex; align-items: center;"><svg viewBox="0 0 24 24" style="width:16px; height:16px; margin-right: 8px; fill: #555;"><path d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path><path d="M13 7h-2v6h6v-2h-4V7z"></path></svg><span>${s.regularOpeningHours.weekdayDescriptions[u]}</span></div>`}return`
            <div style="${`font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; ${e?"":"max-width: 290px;"} padding: 5px;`}">
                ${t}
                <div style="font-size: 18px; font-weight: 700; color: #1a1a1a; margin-bottom: 4px;">${s.displayName}</div>
                <div style="font-size: 13px; color: #555; margin-bottom: 8px;">${s.formattedAddress}</div>
                ${i}
                ${r}
                <a href="${s.googleMapsURI}" target="_blank" style="display: inline-block; margin-top: 8px; font-size: 13px; color: #1a73e8; text-decoration: none; font-weight: 500;">Voir sur Google Maps</a>
                ${n}
            </div>
        `},resetMapView:function(){this.map&&(console.log("🔄 Réinitialisation de la vue de la carte."),this.infoWindow.close(),this.hideBottomSheet(),this.map.panTo(this.initialCenter),this.map.setZoom(this.initialZoom))}};window.initGoogleMap=Wt.initMap.bind(Wt),window.mapManager=Wt;function On(){const s=document.getElementById("map");if(!s)return;const e=s.dataset.apiKey;if(!e){console.error(`❌ Clé API Google Maps manquante. Veuillez l'ajouter dans l'attribut "data-api-key" de la div #map.`);return}if(window.google&&window.google.maps){console.log("🗺️ Google Maps API déjà chargée."),Wt.initMap();return}console.log("🗺️ Chargement de l'API Google Maps...");const t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,marker&callback=initGoogleMap&loading=async&language=fr`,t.async=!0,document.head.appendChild(t)}console.log("🔗 preselect.js prêt à être initialisé");function Rn(){const s="[SW-PRESELECT]",e=(...u)=>console.log(new Date().toLocaleTimeString(),s,...u),t="/reservation",i=document.querySelector("[data-preselect-activity-slug], [data-preselect-park-id]");if(!i){console.warn(s,"Aucun élément wrapper avec [data-preselect-activity-slug] ou [data-preselect-park-id] trouvé.");return}const n=document.querySelectorAll('[data-attribute="preselect-booking-button"]');console.log("✅ Module de présélection initialisé.");const r=i.dataset.preselectActivitySlug,l=i.dataset.preselectParkId,a=new URLSearchParams;if(r&&a.set("activite",r),l&&a.set("parc",l),a.toString()){const u=`${t}?${a.toString()}`;n.forEach(d=>{d.href=u,d.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation(),window.location.href=u},!0)}),e(`Liens de réservation mis à jour et clics gérés pour pointer vers : ${u}`)}}const Bn=()=>{const s=document.querySelector(".desktop_menu_content.right .w-dyn-items"),e=document.querySelectorAll(".desktop_menu_list.acitivt-s .default-container");if(!s||!e.length)return;const t=Array.from(s.children).find(a=>{const u=a.querySelector("img");return u&&u.id==="Bowling"});Array.from(s.children).forEach(a=>{a===t?(a.style.opacity="1",a.style.display="block"):(a.style.opacity="0",a.style.display="none")});const i=new Map;let n=null;const r=(a,u)=>{const d=Array.from(s.children).find(p=>{const g=p.querySelector("img");return g&&g.id===a});if(d)if(i.has(d)&&(i.get(d).kill(),i.delete(d)),u){if(n=a,t&&t!==d){i.has(t)&&i.get(t).kill();const g=window.gsap.to(t,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{t&&(t.style.display="none"),i.delete(t)}});i.set(t,g)}d.style.display="block";const p=window.gsap.to(d,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>i.delete(d)});i.set(d,p)}else{n===a&&(n=null);const p=window.gsap.to(d,{opacity:0,duration:.15,ease:"power2.out",onComplete:()=>{if(d.style.display="none",n===null&&t){t.style.display="block",i.has(t)&&i.get(t).kill();const g=window.gsap.to(t,{opacity:1,duration:.15,ease:"power2.out",onComplete:()=>i.delete(t)});i.set(t,g)}i.delete(d)}});i.set(d,p)}},l=(a,u)=>{i.has(a)&&(i.get(a).kill(),i.delete(a));const d={duration:u?.1:.05,ease:"power2.out",onComplete:()=>i.delete(a)},p=u?{scale:1.1,backgroundColor:"#FFFFFF"}:{scale:1,backgroundColor:""},g=window.gsap.to(a,{...p,...d});i.set(a,g)};e.forEach(a=>{const u=a.getAttribute("data-name");u&&(a.addEventListener("mouseenter",()=>{r(u,!0),l(a,!0)}),a.addEventListener("mouseleave",()=>{r(u,!1),l(a,!1)}))})};function Wn(){console.log("🔧 Configuration du gestionnaire de filtres vides v2.1.0..."),window.fsAttributes||(window.fsAttributes=[]),window.fsAttributes.push(["list",s=>{console.log("✅ Finsweet list callback déclenché!",s.length,"instances"),Hn()}]),console.log("📋 Callback Finsweet configuré correctement avec fsAttributes")}function Hn(){console.log("🎯 Configuration des filtres vides...");const s=document.querySelectorAll("input[fs-list-field]");console.log(`📊 ${s.length} inputs fs-list-field trouvés`),s.forEach((e,t)=>{if(e.closest(".is-list-emptyfacet")){console.log(`🔒 Input ${t+1} dans empty facet - désactivation`),e.style.cursor="default";const n=e.closest("label");n&&(n.style.cursor="default")}e.addEventListener("click",n=>{if(e.closest(".is-list-emptyfacet")){console.log("🚫 Clic bloqué sur filtre vide"),n.preventDefault(),n.stopPropagation();return}}),e.addEventListener("change",()=>{var l;if(e.closest(".is-list-emptyfacet"))return;const r=(l=e.closest(".tag_wrap"))==null?void 0:l.querySelector(".tags_content");r&&(e.checked?r.classList.add("is-active"):r.classList.remove("is-active"))})}),console.log("🎯 Filtres vides configurés avec succès")}class Co{constructor(){this.version="1.2.1",this.initialized=!1,this.selectors={collectionList:'[fs-list-element="list"]',collectionItems:'[fs-list-element="item"]',filterInputs:"input[fs-list-field]",noItemsMessage:".w-dyn-empty",filterForms:'[fs-list-element="filters"]',cmsSlider:"#cms-slider-offres",helperText:"#helper-text"},this.messages={selectFilter:"👆 Sélectionnez un parc ou un type d'offre pour voir nos offres disponibles",noResults:"Aucune offre ne correspond à vos critères. Essayez une autre sélection."}}init(){const e=window.location.pathname;if(!["/offres","/anniversaires","/tarifs-generaux"].includes(e)){console.log(`🚫 mandatory-filter-selection.js - Page ${e} non concernée`);return}if(this.initialized){console.log("⚠️ mandatory-filter-selection.js déjà initialisé");return}console.log(`🎯 mandatory-filter-selection.js v${this.version} - Initialisation sur ${e}`),this.setupInitialState(),this.bindEvents(),this.initialized=!0,console.log("✅ Filtrage obligatoire activé - Sélectionnez un filtre pour voir les offres")}setupInitialState(){const e=document.querySelector(this.selectors.collectionList),t=document.querySelectorAll(this.selectors.collectionItems);if(!e){console.log("❌ Collection list non trouvée");return}t.forEach(i=>{i.style.display="none"}),this.showSelectionMessage(),this.hideCmsSlider(),this.showHelperText(),console.log(`🔒 ${t.length} offres cachées - En attente de sélection de filtre`)}showSelectionMessage(){const e=document.querySelector(this.selectors.collectionList);if(!e)return;const t=e.querySelector(".mandatory-filter-message");t&&t.remove();const i=document.createElement("div");if(i.className="mandatory-filter-message",i.style.cssText=`
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            margin: 20px 0;
            color: white;
            font-size: 18px;
            font-weight: 500;
            box-shadow: 0 8px 32px rgba(102, 126, 234, 0.3);
            animation: pulse 2s infinite;
        `,i.innerHTML=`
            <div style="font-size: 48px; margin-bottom: 16px;">🎯</div>
            <div>${this.messages.selectFilter}</div>
        `,!document.querySelector("#mandatory-filter-styles")){const n=document.createElement("style");n.id="mandatory-filter-styles",n.textContent=`
                @keyframes pulse {
                    0%, 100% { transform: scale(1); opacity: 1; }
                    50% { transform: scale(1.02); opacity: 0.9; }
                }
                .mandatory-filter-message {
                    transition: all 0.3s ease;
                }
            `,document.head.appendChild(n)}e.appendChild(i)}bindEvents(){const e=document.querySelectorAll(this.selectors.filterInputs);e.forEach(t=>{t.addEventListener("change",()=>{this.handleFilterChange()})}),window.addEventListener("list-updated",()=>{this.handleListUpdate()}),console.log(`🔗 ${e.length} filtres écoutés`)}handleFilterChange(){const e=document.querySelectorAll(`${this.selectors.filterInputs}:checked`);e.length>0?(console.log(`✅ ${e.length} filtre(s) sélectionné(s) - Affichage des offres`),this.showCollectionItems(),this.hideSelectionMessage(),this.showCmsSlider(),this.hideHelperText()):(console.log("🔒 Aucun filtre sélectionné - Masquage des offres"),this.hideCollectionItems(),this.showSelectionMessage(),this.hideCmsSlider(),this.showHelperText())}handleListUpdate(){const e=document.querySelectorAll(`${this.selectors.filterInputs}:checked`),t=document.querySelectorAll(`${this.selectors.collectionItems}:not([style*="display: none"])`);e.length>0&&t.length===0&&(console.log("⚠️ Aucun résultat pour les filtres sélectionnés"),this.showNoResultsMessage())}showCollectionItems(){document.querySelectorAll(this.selectors.collectionItems).forEach(t=>{t.style.display=""})}hideCollectionItems(){document.querySelectorAll(this.selectors.collectionItems).forEach(t=>{t.style.display="none"})}hideSelectionMessage(){const e=document.querySelector(".mandatory-filter-message");e&&(e.style.display="none")}showCmsSlider(){const e=document.querySelector(this.selectors.cmsSlider);e&&(e.style.display="",console.log("👁️ Slider CMS des offres affiché (filtre sélectionné)"))}hideCmsSlider(){const e=document.querySelector(this.selectors.cmsSlider);e&&(e.style.display="none",console.log("🙈 Slider CMS des offres masqué (aucun filtre)"))}showHelperText(){const e=document.querySelector(this.selectors.helperText);e&&(e.style.display="",console.log("👁️ Texte d'aide affiché (aucun filtre)"))}hideHelperText(){const e=document.querySelector(this.selectors.helperText);e&&(e.style.display="none",console.log("🙈 Texte d'aide masqué (filtre sélectionné)"))}showNoResultsMessage(){const e=document.querySelector(this.selectors.collectionList);if(!e||e.querySelector(".no-results-message"))return;const i=document.createElement("div");i.className="no-results-message",i.style.cssText=`
            padding: 30px 20px;
            text-align: center;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 20px 0;
            color: #6c757d;
            font-size: 16px;
        `,i.innerHTML=`
            <div style="font-size: 32px; margin-bottom: 12px;">😕</div>
            <div>${this.messages.noResults}</div>
        `,e.appendChild(i),setTimeout(()=>{i.parentNode&&i.remove()},3e3)}reset(){this.hideSelectionMessage(),this.showCollectionItems(),this.hideCmsSlider(),this.showHelperText(),this.initialized=!1,console.log("🔄 Filtrage obligatoire réinitialisé")}}window.mandatoryFilterSelection=new Co,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.mandatoryFilterSelection.init()}):window.mandatoryFilterSelection.init(),console.log("🚀 mandatory-filter-selection.js v1.2.1 chargé");class Ao{constructor(){this.version="1.6.0",this.initialized=!1,this.selectors={formWrapper:"#devis-form-wrapper",filterElements:"[fs-list-value]",filterForms:'[fs-list-element="filters"]',mapElement:"#map"}}init(){const e=window.location.pathname;if(!["/smile-event"].includes(e)){console.log(`🚫 event-form-visibility.js - Page ${e} non concernée`);return}if(this.initialized){console.log("⚠️ event-form-visibility.js déjà initialisé");return}console.log(`🎯 event-form-visibility.js v${this.version} - Initialisation sur ${e}`),this.setupInitialState(),this.bindEvents(),this.setupMapData(),this.initialized=!0,console.log("✅ Logique d'affichage du formulaire de devis activée")}setupInitialState(){const e=document.querySelector(this.selectors.formWrapper);if(!e){console.log("❌ Conteneur du formulaire de devis non trouvé");return}e.style.display="none",console.log("🔒 Formulaire de devis caché - En attente de sélection de centre")}setupMapData(){if(!document.querySelector(this.selectors.mapElement)){console.log("ℹ️ Aucun élément #map trouvé, pas d'initialisation de carte");return}const t=document.querySelector("select[fs-list-field]");if(!t){console.log("❌ Dropdown des centres non trouvé pour récupérer les données de la carte");return}const i=document.createElement("div");i.id="centres-data-container",i.style.display="none",document.body.appendChild(i);let n=0;Array.from(t.options).forEach((r,l)=>{if(l===0||!r.value)return;const a=r.dataset.placeId,u=r.dataset.lat,d=r.dataset.lng,p=r.textContent.trim();if(a&&u&&d){const g=document.createElement("div");g.className="w-dyn-item",g.setAttribute("data-place-id",a),g.setAttribute("data-lat",u),g.setAttribute("data-lng",d);const y=document.createElement("h3");y.textContent=p,g.appendChild(y),i.appendChild(g),n++}else console.warn(`⚠️ Données manquantes pour le centre "${p}". Vérifiez les attributs data-place-id, data-lat, data-lng sur l'option du dropdown.`)}),n>0?(console.log(`🗺️ ${n} centres configurés pour la carte Google Maps`),window.mapManager&&window.mapManager.createMarkers()):console.log("⚠️ Aucune donnée de centre trouvée pour la carte. Ajoutez les attributs data-place-id, data-lat, data-lng aux options du dropdown côté Webflow.")}bindEvents(){const e=document.querySelectorAll(this.selectors.filterElements);e.forEach(t=>{t.addEventListener("change",()=>{this.handleFilterChange()}),t.addEventListener("click",()=>{this.handleFilterChange()})}),window.addEventListener("list-updated",()=>{this.handleFilterChange()}),console.log(`🔗 ${e.length} élément(s) de filtre écouté(s)`)}handleFilterChange(){const e=document.querySelectorAll(this.selectors.filterElements);let t=!1;e.forEach(i=>{if(i.checked||i.classList.contains("w--current")||i.tagName.toLowerCase()==="select"&&i.value&&i.value!==""){const n=i.getAttribute("fs-list-value");n&&(t=!0,console.log(`🎯 Filtre actif détecté: ${n}`))}}),t?(console.log("✅ Centre sélectionné - Affichage du formulaire de devis"),this.showFormWrapper()):(console.log("🔒 Aucun centre sélectionné - Masquage du formulaire de devis"),this.hideFormWrapper())}showFormWrapper(){const e=document.querySelector(this.selectors.formWrapper);e&&(e.style.display="")}hideFormWrapper(){const e=document.querySelector(this.selectors.formWrapper);e&&(e.style.display="none")}reset(){this.hideFormWrapper();const e=document.getElementById("centres-data-container");e&&e.remove(),this.initialized=!1,console.log("🔄 Logique du formulaire de devis réinitialisée")}}window.eventFormVisibility=new Ao,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.eventFormVisibility.init()}):window.eventFormVisibility.init(),console.log("🚀 event-form-visibility.js v1.6.0 chargé"),console.log("🎠 marquee-animation.js v2.1.0 chargé");let rt=null,Ht=new WeakMap;function Xn(){console.log("🎬 Initialisation de l'animation marquee draggable...");const s=document.querySelectorAll(".cms_slider_wrapper");if(s.length===0){console.log("-> Aucun élément .cms_slider_wrapper trouvé. Animation marquee ignorée.");return}s.forEach((e,t)=>{zn(e,t)})}function zn(s,e){const t=gsap.utils.toArray(s.children);if(t.length===0){console.warn(`-> Wrapper ${e}: Aucun slide trouvé.`);return}gsap.set(t,{x:n=>n*t[n].offsetWidth});const i=Un(t,{paused:!0,draggable:!0,center:!1,speed:.5,reversed:!1});Yn(t,i),console.log(`✅ Marquee draggable ${e} initialisé avec effets de survol.`)}function Yn(s,e){s.forEach((t,i)=>{const n=t.querySelector(".vimeo.activity"),r=t.querySelector("#titre-original");n&&gsap.set(n,{display:"none",opacity:0}),r&&!r.dataset.originalColor&&(r.dataset.originalColor=window.getComputedStyle(r).color),Ht.set(t,{isHovered:!1,elements:{vimeo:n,titre:r}}),t.addEventListener("mouseenter",()=>Vn(t,e)),t.addEventListener("mouseleave",()=>jn(t,e))})}function Vn(s,e){const t=Ht.get(s);if(t.isHovered)return;t.isHovered=!0,rt&&rt!==s&&Lo(rt,e),rt=s,e.draggable&&e.draggable.disable();const{vimeo:i,titre:n}=t.elements;if(i&&(gsap.killTweensOf(i),gsap.set(i,{display:"flex"}),gsap.to(i,{opacity:1,duration:.3,ease:"power2.out"}),n)){gsap.killTweensOf(n);const r=n.dataset.originalColor||"#000000",l=Gn(r)?"#000000":"#ffffff";gsap.to(n,{color:l,duration:.3,ease:"power2.out"})}}function jn(s,e){const t=Ht.get(s);t.isHovered&&(t.isHovered=!1,setTimeout(()=>{!s.matches(":hover")&&rt===s&&(Lo(s,e),rt=null)},50))}function Lo(s,e){const t=Ht.get(s);if(!t)return;e.draggable&&e.draggable.enable();const{vimeo:i,titre:n}=t.elements;if(i&&(gsap.killTweensOf(i),gsap.to(i,{opacity:0,duration:.2,ease:"power2.out",onComplete:()=>gsap.set(i,{display:"none"})}),n)){gsap.killTweensOf(n);const r=n.dataset.originalColor||"#000000";gsap.to(n,{color:r,duration:.2,ease:"power2.out"})}t.isHovered=!1}function Gn(s){let e,t,i;if(s.startsWith("#")){const r=s.substring(1);e=parseInt(r.substring(0,2),16),t=parseInt(r.substring(2,4),16),i=parseInt(r.substring(4,6),16)}else if(s.startsWith("rgb"))[e,t,i]=s.match(/\d+/g).map(Number);else return!1;return(.299*e+.587*t+.114*i)/255>.5}function Un(s,e){s=gsap.utils.toArray(s),e=e||{};let t=gsap.timeline({repeat:-1,paused:e.paused,defaults:{ease:"none"},onReverseComplete:()=>t.totalTime(t.rawTime()+t.duration()*100)}),i=s.length,n=s[0].x,r=[],l=[],a=[],u=0,d=(e.speed||1)*100,p=e.snap===!1?P=>P:gsap.utils.snap(e.snap||1),g=()=>s.forEach((P,x)=>{l[x]=parseFloat(gsap.getProperty(P,"width","px")),a[x]=p(parseFloat(gsap.getProperty(P,"x","px"))/l[x]*100+gsap.getProperty(P,"xPercent"))}),y=()=>s[i-1].x+a[i-1]/100*l[i-1]-n+s[i-1].offsetWidth*gsap.getProperty(s[i-1],"scaleX"),o,v,w,E,C,M;for(g(),gsap.set(s,{xPercent:P=>a[P]}),gsap.set(s,{x:0}),o=y(),M=0;M<i;M++)C=s[M],v=a[M]/100*l[M],w=C.x-v,E=w+o*(v>0?-1:1),t.to(C,{xPercent:p((v-E)/l[M]*100),duration:E/d},0).fromTo(C,{xPercent:p((v-E+o)/l[M]*100)},{xPercent:a[M],duration:(v-E+o-v)/d,immediateRender:!1},E/d).add("label"+M,w/d),r[M]=w/d;function D(P,x){x=x||{},Math.abs(P-u)>i/2&&(P+=P>u?-i:i);let W=gsap.utils.wrap(0,i,P),F=r[W];return F>t.time()!=P>u&&(x.modifiers={time:gsap.utils.wrap(0,t.duration())},F+=t.duration()*(P>u?1:-1)),u=W,x.overwrite=!0,t.tweenTo(F,x)}if(t.next=P=>D(u+1,P),t.previous=P=>D(u-1,P),t.current=()=>u,t.toIndex=(P,x)=>D(P,x),t.updateIndex=()=>u=Math.round(t.progress()*s.length),t.times=r,t.progress(1,!0).progress(0,!0),e.reversed&&(t.vars.onReverseComplete(),t.reverse()),e.draggable&&typeof Draggable=="function"){let P=document.createElement("div"),x=gsap.utils.wrap(0,1),W,F,_,ne=()=>{let $=x(F+(_.startX-_.x)*W);t.progress($)},J=()=>t.closestIndex(!0);typeof InertiaPlugin>"u"&&console.warn("InertiaPlugin required for momentum-based scrolling and snapping. https://greensock.com/inertia/"),_=Draggable.create(P,{trigger:s[0].parentNode,type:"x",onPressInit(){gsap.killTweensOf(t),F=t.progress(),W=1/y()},onDrag:ne,onThrowUpdate:ne,inertia:!0,onRelease(){J()},onThrowComplete:J})[0],t.draggable=_}return t}console.log("🚀 main_gsap.js v3.0.2 chargé"),Bo.gsap.registerPlugin(yt,wi);function Kn(){console.log("✅ GSAP est prêt. Initialisation des modules...");try{_n(),Pn(),Cn(),Fn(),Bn(),Wn(),new Ao().init(),window.location.pathname.includes("/reservation")&&(console.log("-> Page Réservation détectée via l'URL. Chargement du module..."),Nn(),console.log("✅ Module Réservation chargé et initialisé."));const s=window.location.pathname;(s==="/offres"||s==="/anniversaires")&&(console.log(`-> Page ${s} détectée. Initialisation du filtrage obligatoire...`),new Co().init(),console.log("✅ Module de filtrage obligatoire chargé et initialisé.")),(s==="/"||s==="/index"||s==="")&&(console.log("-> Page d'accueil détectée. Initialisation de l'animation marquee..."),setTimeout(()=>{Xn()},500)),On(),document.querySelector('[data-attribute="preselect-booking-button"]')&&(console.log("-> Bouton de présélection détecté. Initialisation du module."),Rn()),console.log("✨ Tous les modules principaux ont été initialisés."),bn()}catch(s){console.error("❌ Erreur lors de l'initialisation des modules. Forçage du masquage du loader.",s),ko()}}function Zn(){wn();let s=0;const e=100,i=setInterval(()=>{window.gsap?(clearInterval(i),Kn()):(s++,s>e&&(clearInterval(i),console.error("GSAP n'a pas pu être chargé après 10 secondes. Annulation de l'initialisation des modules."),ko()))},100)}window.Webflow=window.Webflow||[],window.Webflow.push(function(){console.log("🚀 Webflow est prêt, lancement de l'attente de GSAP."),Zn()}),window.addEventListener("load",()=>{console.log("🎬 La page est entièrement chargée. Initialisation des modules dépendants du contenu."),Dn(),Tn()})})(gsap);
